<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¨¡å—è°ƒè¯• - æµä½“åŠ›å­¦å­¦ä¹ å¹³å°</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #1a1a1a;
            color: #ffffff;
            margin: 20px;
            line-height: 1.6;
        }
        
        .debug-container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .debug-section {
            background: #2a2a2a;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border: 1px solid #3a3a3a;
        }
        
        .debug-title {
            color: #4facfe;
            font-size: 1.5rem;
            margin-bottom: 15px;
        }
        
        .module-status {
            display: flex;
            align-items: center;
            margin: 10px 0;
            padding: 10px;
            background: #333;
            border-radius: 4px;
        }
        
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 10px;
        }
        
        .status-loaded { background: #10b981; }
        .status-error { background: #ef4444; }
        .status-loading { background: #f59e0b; }
        
        .error-message {
            background: #ef4444;
            color: white;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        
        .success-message {
            background: #10b981;
            color: white;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        
        .log-output {
            background: #000;
            color: #00ff00;
            padding: 15px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
        }
        
        button {
            background: #4facfe;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        
        button:hover {
            background: #0084ff;
        }
    </style>
</head>
<body>
    <div class="debug-container">
        <h1>ğŸ”§ æ¨¡å—åŠ è½½è°ƒè¯•</h1>
        
        <div class="debug-section">
            <h2 class="debug-title">æ–‡ä»¶æ£€æŸ¥</h2>
            <div id="file-check"></div>
        </div>
        
        <div class="debug-section">
            <h2 class="debug-title">æ¨¡å—åŠ è½½çŠ¶æ€</h2>
            <div id="module-status"></div>
        </div>
        
        <div class="debug-section">
            <h2 class="debug-title">æ§åˆ¶å°æ—¥å¿—</h2>
            <div id="log-output" class="log-output"></div>
            <button onclick="clearLog()">æ¸…ç©ºæ—¥å¿—</button>
            <button onclick="checkModules()">é‡æ–°æ£€æŸ¥</button>
        </div>
        
        <div class="debug-section">
            <h2 class="debug-title">æ‰‹åŠ¨åŠ è½½æµ‹è¯•</h2>
            <button onclick="loadConfig()">åŠ è½½ Config</button>
            <button onclick="loadUtils()">åŠ è½½ Utils</button>
            <button onclick="loadEventBus()">åŠ è½½ EventBus</button>
            <button onclick="loadAuth()">åŠ è½½ Auth</button>
            <button onclick="loadAll()">åŠ è½½æ‰€æœ‰æ¨¡å—</button>
        </div>
    </div>

    <script>
        // æ—¥å¿—ç³»ç»Ÿ
        const logOutput = document.getElementById('log-output');
        
        function log(message) {
            const timestamp = new Date().toLocaleTimeString();
            logOutput.textContent += `[${timestamp}] ${message}\n`;
            logOutput.scrollTop = logOutput.scrollHeight;
            console.log(message);
        }
        
        function clearLog() {
            logOutput.textContent = '';
        }
        
        // æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
        async function checkFile(url) {
            try {
                const response = await fetch(url, { method: 'HEAD' });
                return response.ok;
            } catch (error) {
                return false;
            }
        }
        
        // æ£€æŸ¥æ–‡ä»¶çŠ¶æ€
        async function checkFiles() {
            const files = [
                'js/core/config.js',
                'js/core/utils.js', 
                'js/core/eventBus.js',
                'js/auth/auth.js',
                'js/storage/githubStorage.js',
                'js/components/questionBank.js',
                'js/components/aiAssistant.js',
                'js/app.js',
                'styles/main.css',
                'styles/auth.css',
                'styles/dashboard.css',
                'styles/components.css'
            ];
            
            const fileCheckDiv = document.getElementById('file-check');
            let html = '';
            
            for (const file of files) {
                const exists = await checkFile(file);
                const statusClass = exists ? 'status-loaded' : 'status-error';
                const statusText = exists ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨';
                
                html += `
                    <div class="module-status">
                        <span class="status-indicator ${statusClass}"></span>
                        <span>${file}: ${statusText}</span>
                    </div>
                `;
                
                log(`${file}: ${statusText}`);
            }
            
            fileCheckDiv.innerHTML = html;
        }
        
        // æ£€æŸ¥æ¨¡å—çŠ¶æ€
        function checkModules() {
            const modules = [
                'AppConfig', 'Utils', 'EventBus', 'SystemEvents',
                'AuthSystem', 'GitHubStorage', 'LocalQuestionBank',
                'IntelligentAIAssistant', 'App'
            ];
            
            const moduleStatusDiv = document.getElementById('module-status');
            let html = '';
            
            modules.forEach(module => {
                const isLoaded = window[module] !== undefined;
                const statusClass = isLoaded ? 'status-loaded' : 'status-error';
                const statusText = isLoaded ? 'å·²åŠ è½½' : 'æœªåŠ è½½';
                
                html += `
                    <div class="module-status">
                        <span class="status-indicator ${statusClass}"></span>
                        <span>${module}: ${statusText}</span>
                    </div>
                `;
                
                log(`${module}: ${statusText}`);
            });
            
            moduleStatusDiv.innerHTML = html;
        }
        
        // æ‰‹åŠ¨åŠ è½½æ¨¡å—
        function loadScript(src) {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = src;
                script.onload = () => {
                    log(`âœ… æˆåŠŸåŠ è½½: ${src}`);
                    resolve();
                };
                script.onerror = () => {
                    log(`âŒ åŠ è½½å¤±è´¥: ${src}`);
                    reject(new Error(`Failed to load ${src}`));
                };
                document.head.appendChild(script);
            });
        }
        
        async function loadConfig() {
            try {
                await loadScript('js/core/config.js');
                checkModules();
            } catch (error) {
                log(`ConfigåŠ è½½é”™è¯¯: ${error.message}`);
            }
        }
        
        async function loadUtils() {
            try {
                await loadScript('js/core/utils.js');
                checkModules();
            } catch (error) {
                log(`UtilsåŠ è½½é”™è¯¯: ${error.message}`);
            }
        }
        
        async function loadEventBus() {
            try {
                await loadScript('js/core/eventBus.js');
                checkModules();
            } catch (error) {
                log(`EventBusåŠ è½½é”™è¯¯: ${error.message}`);
            }
        }
        
        async function loadAuth() {
            try {
                await loadScript('js/auth/auth.js');
                checkModules();
            } catch (error) {
                log(`AuthåŠ è½½é”™è¯¯: ${error.message}`);
            }
        }
        
        async function loadAll() {
            const scripts = [
                'js/core/config.js',
                'js/core/utils.js',
                'js/core/eventBus.js',
                'js/auth/auth.js',
                'js/storage/githubStorage.js',
                'js/components/questionBank.js',
                'js/components/aiAssistant.js',
                'js/app.js'
            ];
            
            for (const script of scripts) {
                try {
                    await loadScript(script);
                    await new Promise(resolve => setTimeout(resolve, 100)); // çŸ­æš‚å»¶è¿Ÿ
                } catch (error) {
                    log(`åŠ è½½å¤±è´¥: ${script} - ${error.message}`);
                }
            }
            
            checkModules();
        }
        
        // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œ
        document.addEventListener('DOMContentLoaded', () => {
            log('ğŸ”§ è°ƒè¯•é¡µé¢å·²åŠ è½½');
            checkFiles();
            setTimeout(checkModules, 1000);
        });
        
        // æ•è·å…¨å±€é”™è¯¯
        window.addEventListener('error', (e) => {
            log(`ğŸš¨ å…¨å±€é”™è¯¯: ${e.message} at ${e.filename}:${e.lineno}`);
        });
        
        // æ•è·æœªå¤„ç†çš„Promiseé”™è¯¯
        window.addEventListener('unhandledrejection', (e) => {
            log(`ğŸš¨ Promiseé”™è¯¯: ${e.reason}`);
        });
    </script>
</body>
</html> 