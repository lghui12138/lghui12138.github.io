<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–‡ä»¶æ£€æŸ¥</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #1a1a1a;
            color: #ffffff;
            margin: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .file-item {
            display: flex;
            align-items: center;
            margin: 10px 0;
            padding: 10px;
            background: #2a2a2a;
            border-radius: 4px;
        }
        
        .status {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 10px;
        }
        
        .status-exists { background: #10b981; }
        .status-missing { background: #ef4444; }
        
        .file-path {
            font-family: monospace;
            color: #b8c5d1;
        }
        
        .file-size {
            margin-left: auto;
            color: #6c7b7f;
            font-size: 0.9rem;
        }
        
        button {
            background: #4facfe;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 10px 5px;
        }
        
        button:hover {
            background: #0084ff;
        }
        
        .log {
            background: #000;
            color: #00ff00;
            padding: 15px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“ æ–‡ä»¶æ£€æŸ¥å·¥å…·</h1>
        
        <div>
            <button onclick="checkAllFiles()">æ£€æŸ¥æ‰€æœ‰æ–‡ä»¶</button>
            <button onclick="clearLog()">æ¸…ç©ºæ—¥å¿—</button>
            <button onclick="loadTestFile()">æµ‹è¯•åŠ è½½æ–‡ä»¶</button>
        </div>
        
        <div id="file-list"></div>
        <div id="log" class="log"></div>
    </div>

    <script>
        const logElement = document.getElementById('log');
        
        function log(message) {
            const timestamp = new Date().toLocaleTimeString();
            logElement.textContent += `[${timestamp}] ${message}\n`;
            logElement.scrollTop = logElement.scrollHeight;
            console.log(message);
        }
        
        function clearLog() {
            logElement.textContent = '';
        }
        
        async function checkFile(url) {
            try {
                const response = await fetch(url, { method: 'HEAD' });
                if (response.ok) {
                    const size = response.headers.get('content-length');
                    return { exists: true, size: size };
                } else {
                    return { exists: false, size: 0 };
                }
            } catch (error) {
                return { exists: false, size: 0, error: error.message };
            }
        }
        
        async function checkAllFiles() {
            const files = [
                'js/core/config.js',
                'js/core/utils.js',
                'js/core/eventBus.js',
                'js/auth/auth.js',
                'js/storage/githubStorage.js',
                'js/components/questionBank.js',
                'js/components/aiAssistant.js',
                'js/app.js',
                'styles/main.css',
                'styles/auth.css',
                'styles/dashboard.css',
                'styles/components.css',
                'index.html',
                'manifest.json'
            ];
            
            const fileList = document.getElementById('file-list');
            let html = '';
            
            for (const file of files) {
                log(`æ£€æŸ¥æ–‡ä»¶: ${file}`);
                const result = await checkFile(file);
                
                const statusClass = result.exists ? 'status-exists' : 'status-missing';
                const statusText = result.exists ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨';
                const sizeText = result.exists && result.size ? `(${result.size} bytes)` : '';
                
                html += `
                    <div class="file-item">
                        <span class="status ${statusClass}"></span>
                        <span class="file-path">${file}</span>
                        <span class="file-size">${statusText} ${sizeText}</span>
                    </div>
                `;
                
                log(`${file}: ${statusText} ${sizeText}`);
            }
            
            fileList.innerHTML = html;
        }
        
        async function loadTestFile() {
            try {
                log('å°è¯•åŠ è½½æµ‹è¯•æ–‡ä»¶...');
                
                // æµ‹è¯•åŠ è½½ä¸€ä¸ªç®€å•çš„JSæ–‡ä»¶
                const response = await fetch('js/core/config.js');
                if (response.ok) {
                    const content = await response.text();
                    log(`âœ… æˆåŠŸåŠ è½½ config.jsï¼Œå†…å®¹é•¿åº¦: ${content.length} å­—ç¬¦`);
                    log(`æ–‡ä»¶å¼€å¤´: ${content.substring(0, 100)}...`);
                } else {
                    log(`âŒ åŠ è½½å¤±è´¥ï¼ŒçŠ¶æ€ç : ${response.status}`);
                }
            } catch (error) {
                log(`âŒ åŠ è½½é”™è¯¯: ${error.message}`);
            }
        }
        
        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æ£€æŸ¥
        document.addEventListener('DOMContentLoaded', () => {
            log('ğŸ”§ æ–‡ä»¶æ£€æŸ¥å·¥å…·å·²åŠ è½½');
            log('å½“å‰URL: ' + window.location.href);
            log('åè®®: ' + window.location.protocol);
            
            if (window.location.protocol === 'file:') {
                log('âš ï¸ è­¦å‘Š: é€šè¿‡ file:// åè®®è®¿é—®ï¼Œå»ºè®®ä½¿ç”¨ HTTP æœåŠ¡å™¨');
                log('è¯·è®¿é—®: http://localhost:8000/file-check.html');
            }
            
            setTimeout(checkAllFiles, 1000);
        });
    </script>
</body>
</html> 