<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ü§ñ AIÂ≠¶‰π†Âä©Êâã - ÂÖ®Â±èÊîØÊåÅ</title>
    
    <!-- Â§ñÈÉ®‰æùËµñ - Ê∑ªÂä†ÈîôËØØÂ§ÑÁêÜ -->
    <script>
        // ËµÑÊ∫êÂä†ËΩΩÈîôËØØÂ§ÑÁêÜ
        window.resourceErrors = [];
        window.addEventListener('error', function(e) {
            if (e.target.tagName === 'SCRIPT' || e.target.tagName === 'LINK') {
                console.warn('ËµÑÊ∫êÂä†ËΩΩÂ§±Ë¥•:', e.target.src || e.target.href);
                window.resourceErrors.push(e.target.src || e.target.href);
            }
        });
    </script>
    
    <!-- Vue.js - ‰∏ªË¶ÅCDN -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js" 
            onerror="loadVueFallback()"></script>
    <script>
        function loadVueFallback() {
            console.log('Vue.jsÂä†ËΩΩÂ§±Ë¥•ÔºåÂ∞ùËØïÂ§áÁî®CDN...');
            const script = document.createElement('script');
            script.src = 'https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.js';
            script.onerror = function() {
                console.error('Vue.jsÊâÄÊúâCDNÈÉΩÂ§±Ë¥•Ôºå‰ΩøÁî®Êú¨Âú∞Â§áÁî®ÊñπÊ°à');
                // ÂèØ‰ª•Âú®ËøôÈáåÊ∑ªÂä†Êú¨Âú∞Vue.jsÊñá‰ª∂
            };
            document.head.appendChild(script);
        }
    </script>
    
    <!-- Font Awesome - ‰∏ªË¶ÅCDN -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" 
          rel="stylesheet" 
          onerror="loadFontAwesomeFallback()">
    <script>
        function loadFontAwesomeFallback() {
            console.log('Font AwesomeÂä†ËΩΩÂ§±Ë¥•Ôºå‰ΩøÁî®UnicodeÂõæÊ†á');
            // Ê∑ªÂä†CSSÊù•‰ΩøÁî®UnicodeÂõæÊ†á‰Ωú‰∏∫Â§áÁî®
            const style = document.createElement('style');
            style.textContent = `
                .fas.fa-circle::before { content: "‚óè"; }
                .fas.fa-arrow-up::before { content: "‚Üë"; }
                .fas.fa-home::before { content: "üè†"; }
                .fas.fa-expand::before { content: "‚õ∂"; }
                .fas.fa-compress::before { content: "‚õ∂"; }
            `;
            document.head.appendChild(style);
        }
    </script>
    
    <!-- Google Fonts - ‰∏ªË¶ÅCDN -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" 
          rel="stylesheet" 
          onerror="loadFontFallback()">
    <script>
        function loadFontFallback() {
            console.log('Google FontsÂä†ËΩΩÂ§±Ë¥•Ôºå‰ΩøÁî®Á≥ªÁªüÂ≠ó‰Ωì');
            const style = document.createElement('style');
            style.textContent = `
                body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
            `;
            document.head.appendChild(style);
        }
    </script>
    
    <!-- Êô∫ËÉΩAIÁ≥ªÁªü - Êú¨Âú∞Êñá‰ª∂ -->
    <script src="../js/core/config.js" onerror="console.warn('config.jsÂä†ËΩΩÂ§±Ë¥•')"></script>
    <script src="../js/core/smart-model-selector.js" onerror="console.warn('smart-model-selector.jsÂä†ËΩΩÂ§±Ë¥•')"></script>
    
    <!-- ÁÆÄÂåñÁöÑÊï∞Â≠¶ÂÖ¨ÂºèÂ§ÑÁêÜ - Á∫ØCSSÊñπÊ°à -->
    <script>
        // ÁÆÄÂçïÁöÑÊï∞Â≠¶ÂÖ¨ÂºèÂ§ÑÁêÜÂáΩÊï∞
        function processMathFormulas() {
            console.log('üî¢ Â§ÑÁêÜÊï∞Â≠¶ÂÖ¨Âºè - ‰ΩøÁî®CSSÊñπÊ°à');

            document.querySelectorAll('.math-formula').forEach(el => {
                let content = el.innerHTML;

                // Â§ÑÁêÜÂ∏∏ËßÅÁöÑLaTeXÁ¨¶Âè∑
                content = content
                    // ÂàÜÊï∞
                    .replace(/\\frac\{([^}]+)\}\{([^}]+)\}/g, '<span class="fraction"><span class="numerator">$1</span><span class="denominator">$2</span></span>')
                    // Âπ≥ÊñπÊ†π
                    .replace(/\\sqrt\{([^}]+)\}/g, '<span class="sqrt">‚àö<span class="sqrt-content">$1</span></span>')
                    // Â∏åËÖäÂ≠óÊØç
                    .replace(/\\rho/g, 'œÅ')
                    .replace(/\\mu/g, 'Œº')
                    .replace(/\\nu/g, 'ŒΩ')
                    .replace(/\\alpha/g, 'Œ±')
                    .replace(/\\beta/g, 'Œ≤')
                    .replace(/\\gamma/g, 'Œ≥')
                    .replace(/\\delta/g, 'Œ¥')
                    .replace(/\\epsilon/g, 'Œµ')
                    .replace(/\\theta/g, 'Œ∏')
                    .replace(/\\lambda/g, 'Œª')
                    .replace(/\\pi/g, 'œÄ')
                    .replace(/\\sigma/g, 'œÉ')
                    .replace(/\\tau/g, 'œÑ')
                    .replace(/\\phi/g, 'œÜ')
                    .replace(/\\omega/g, 'œâ')
                    .replace(/\\Gamma/g, 'Œì')
                    .replace(/\\Delta/g, 'Œî')
                    .replace(/\\Theta/g, 'Œò')
                    .replace(/\\Lambda/g, 'Œõ')
                    .replace(/\\Pi/g, 'Œ†')
                    .replace(/\\Sigma/g, 'Œ£')
                    .replace(/\\Phi/g, 'Œ¶')
                    .replace(/\\Omega/g, 'Œ©')
                    // Êï∞Â≠¶Á¨¶Âè∑
                    .replace(/\\nabla/g, '‚àá')
                    .replace(/\\partial/g, '‚àÇ')
                    .replace(/\\infty/g, '‚àû')
                    .replace(/\\approx/g, '‚âà')
                    .replace(/\\neq/g, '‚â†')
                    .replace(/\\leq/g, '‚â§')
                    .replace(/\\geq/g, '‚â•')
                    .replace(/\\cdot/g, '¬∑')
                    .replace(/\\times/g, '√ó')
                    .replace(/\\div/g, '√∑')
                    .replace(/\\pm/g, '¬±')
                    // ÂêëÈáè
                    .replace(/\\vec\{([^}]+)\}/g, '<span class="vector">$1‚Éó</span>')
                    // ‰∏ä‰∏ãÊ†á
                    .replace(/\^(\d+)/g, '<sup>$1</sup>')
                    .replace(/_(\d+)/g, '<sub>$1</sub>')
                    .replace(/\^{([^}]+)}/g, '<sup>$1</sup>')
                    .replace(/_{([^}]+)}/g, '<sub>$1</sub>')
                    // ÁßªÈô§$$Á¨¶Âè∑
                    .replace(/\$\$/g, '');

                el.innerHTML = content;
                el.style.display = 'block';
                el.style.visibility = 'visible';
            });

            console.log('‚úÖ Êï∞Â≠¶ÂÖ¨ÂºèÂ§ÑÁêÜÂÆåÊàê');
        }

        // È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÂ§ÑÁêÜÂÖ¨Âºè
        document.addEventListener('DOMContentLoaded', processMathFormulas);
    </script>


    <!-- Êï∞Â≠¶ÂÖ¨ÂºèCSSÊ†∑Âºè -->
    <style>
        .math-display {
            text-align: center;
            margin: 15px 0;
            font-size: 1.2em;
            font-family: 'Times New Roman', serif;
        }

        .math-inline {
            font-family: 'Times New Roman', serif;
            font-style: italic;
        }

        .fraction {
            display: inline-block;
            vertical-align: middle;
            text-align: center;
        }

        .numerator {
            display: block;
            border-bottom: 1px solid currentColor;
            padding-bottom: 2px;
        }

        .denominator {
            display: block;
            padding-top: 2px;
        }

        .sqrt {
            position: relative;
        }

        .sqrt-content {
            border-top: 1px solid currentColor;
            padding-left: 2px;
        }
    </style>

    <style>
        :root {
            --primary-color: #667eea;
            --secondary-color: #764ba2;
            --accent-color: #4facfe;
            --success-color: #43e97b;
            --warning-color: #feca57;
            --error-color: #ff6b6b;
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.8);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            animation: gradientFlow 25s ease infinite;
            line-height: 1.6;
        }

        @keyframes gradientFlow {
            0%, 100% { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
            20% { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
            40% { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); }
            60% { background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); }
            80% { background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); }
        }

        /* ÂÖ®Â±èÊ®°ÂºèÊ†∑Âºè */
        .ai-container {
            position: relative;
            min-height: 100vh;
            transition: all 0.3s ease;
        }

        .ai-container.is-fullscreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 10000;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
        }

        /* ÂÖ®Â±èÊéßÂà∂ÊåâÈíÆ */
        .fullscreen-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 10001;
            display: flex;
            gap: 10px;
            opacity: 0.9;
            transition: all 0.3s ease;
        }

        .fullscreen-controls:hover {
            opacity: 1;
            transform: scale(1.05);
        }

        .fullscreen-btn, .back-btn, .advanced-btn {
            background: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            backdrop-filter: blur(10px);
            font-weight: 500;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9em;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .fullscreen-btn:hover, .back-btn:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(0,0,0,0.2);
        }

        .fullscreen-btn.active {
            background: linear-gradient(135deg, var(--accent-color), var(--primary-color));
            border-color: var(--accent-color);
        }

        /* ‰∏ªË¶ÅÂÜÖÂÆπ */
        .main-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 80px 20px 40px;
            position: relative;
            z-index: 10;
            transition: all 0.3s ease;
        }

        .is-fullscreen .main-content {
            max-width: 100%;
            padding: 80px 40px 40px;
            height: 100vh;
            overflow-y: auto;
        }

        /* È°µÈù¢Ê†áÈ¢ò */
        .page-title {
            text-align: center;
            font-size: clamp(2.5rem, 5vw, 3.8rem);
            font-weight: 700;
            margin-bottom: 20px;
            background: linear-gradient(45deg, #fff, #f0f8ff, #e6f3ff, #fff);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: titleShine 4s ease-in-out infinite;
            text-shadow: 0 0 50px rgba(255,255,255,0.3);
        }

        @keyframes titleShine {
            0%, 100% { background-position: 0% 50%; filter: brightness(1); }
            50% { background-position: 100% 50%; filter: brightness(1.3); }
        }

        .page-subtitle {
            text-align: center;
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 40px;
            animation: fadeInUp 1s ease-out 0.5s both;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 0.9;
                transform: translateY(0);
            }
        }

        /* ËÅäÂ§©ÂÆπÂô® */
        .chat-container {
            background: rgba(255,255,255,0.95);
            border-radius: 25px;
            padding: 0;
            margin-bottom: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
            overflow: hidden;
            transition: all 0.5s ease;
            animation: chatSlideIn 0.8s ease-out both;
            border: 2px solid transparent;
        }

        @keyframes chatSlideIn {
            from {
                opacity: 0;
                transform: translateY(50px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .chat-container:hover {
            transform: translateY(-5px);
            box-shadow: 0 30px 80px rgba(0,0,0,0.2);
            border-color: rgba(102, 126, 234, 0.3);
        }

        .chat-header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 20px 30px;
            font-weight: 600;
            font-size: 1.1em;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .chat-header .ai-icon {
            animation: aiPulse 2s ease-in-out infinite;
        }

        @keyframes aiPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .chat-messages {
            height: 400px;
            overflow-y: auto;
            padding: 20px;
            color: #333;
            background: white;
        }

        .is-fullscreen .chat-messages {
            height: 50vh;
        }

        .message {
            margin-bottom: 20px;
            animation: messageSlideIn 0.3s ease-out;
        }

        @keyframes messageSlideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .message.user {
            text-align: right;
        }

        .message.user .message-content {
            background: linear-gradient(135deg, var(--accent-color), var(--primary-color));
            color: white;
            margin-left: auto;
        }

        .message.ai .message-content {
            background: #f8f9fa;
            color: #333;
            margin-right: auto;
        }

        .message-content {
            display: inline-block;
            max-width: 80%;
            padding: 15px 20px;
            border-radius: 20px;
            line-height: 1.6;
            word-wrap: break-word;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .message-content:hover {
            transform: scale(1.02);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .message-time {
            font-size: 0.8em;
            opacity: 0.6;
            margin-top: 5px;
        }

        /* ËæìÂÖ•Âå∫Âüü */
        .chat-input {
            padding: 20px;
            background: white;
            border-top: 1px solid #eee;
        }

        .input-container {
            display: flex;
            gap: 15px;
            align-items: flex-end;
        }

        .input-wrapper {
            flex: 1;
            position: relative;
        }

        .input-tools {
            position: absolute;
            right: 10px;
            bottom: 10px;
            display: flex;
            gap: 5px;
            z-index: 10;
        }

        .voice-btn, .math-btn, .template-btn {
            background: rgba(79, 172, 254, 0.1);
            border: 1px solid rgba(79, 172, 254, 0.3);
            color: var(--accent-color);
            padding: 8px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .voice-btn:hover, .math-btn:hover, .template-btn:hover {
            background: rgba(79, 172, 254, 0.2);
            transform: scale(1.1);
        }

        .voice-btn.active {
            background: var(--error-color);
            color: white;
            animation: pulse 1s infinite;
        }

        .math-btn.active {
            background: var(--accent-color);
            color: white;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .message-input {
            width: 100%;
            padding: 15px 60px 15px 20px; /* Âè≥‰æßÁïôÁ©∫Èó¥ÁªôÂ∑•ÂÖ∑ÊåâÈíÆ */
            border: 2px solid #e9ecef;
            border-radius: 25px;
            font-size: 1em;
            resize: none;
            min-height: 50px;
            max-height: 150px;
            transition: all 0.3s ease;
            background: #f8f9fa;
        }

        .message-input:focus {
            outline: none;
            border-color: var(--accent-color);
            background: white;
            box-shadow: 0 5px 20px rgba(79, 172, 254, 0.2);
        }

        .send-btn {
            background: linear-gradient(135deg, var(--accent-color), var(--primary-color));
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 5px 20px rgba(79, 172, 254, 0.3);
        }

        .send-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(79, 172, 254, 0.5);
        }

        .send-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Êï∞Â≠¶ËæìÂÖ•Èù¢Êùø */
        .math-input-panel {
            margin-top: 15px;
            padding: 15px;
            background: rgba(79, 172, 254, 0.05);
            border-radius: 15px;
            border: 1px solid rgba(79, 172, 254, 0.2);
        }

        .math-symbols {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(40px, 1fr));
            gap: 8px;
            margin-bottom: 15px;
        }

        .symbol-btn {
            background: white;
            border: 1px solid #ddd;
            padding: 8px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.2em;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 40px;
        }

        .symbol-btn:hover {
            background: var(--accent-color);
            color: white;
            transform: scale(1.1);
        }

        .math-templates {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .template-btn-small {
            background: var(--accent-color);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 0.85em;
            transition: all 0.3s ease;
        }

        .template-btn-small:hover {
            background: var(--primary-color);
            transform: translateY(-2px);
        }

        /* ËØ≠Èü≥Áä∂ÊÄÅ */
        .voice-status {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-top: 15px;
            padding: 15px;
            background: rgba(255, 107, 107, 0.1);
            border-radius: 15px;
            border: 1px solid rgba(255, 107, 107, 0.3);
            color: var(--error-color);
            font-weight: 500;
        }

        .voice-animation {
            display: flex;
            gap: 3px;
        }

        .voice-wave {
            width: 4px;
            height: 20px;
            background: var(--error-color);
            border-radius: 2px;
            animation: voiceWave 1s ease-in-out infinite;
        }

        .voice-wave:nth-child(2) {
            animation-delay: 0.2s;
        }

        .voice-wave:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes voiceWave {
            0%, 100% {
                height: 20px;
                background: var(--error-color);
            }
            50% {
                height: 35px;
                background: #ff8a80;
            }
        }

        /* ËØ≠Èü≥ËæìÂÖ•Â¢ûÂº∫Ê†∑Âºè */
        .voice-btn.recording {
            background: linear-gradient(45deg, #ff6b6b, #ff8a80);
            color: white;
            box-shadow: 0 0 20px rgba(255, 107, 107, 0.5);
            animation: recordingPulse 1.5s ease-in-out infinite;
        }

        @keyframes recordingPulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 0 20px rgba(255, 107, 107, 0.5);
            }
            50% {
                transform: scale(1.1);
                box-shadow: 0 0 30px rgba(255, 107, 107, 0.8);
            }
        }

        /* ËØ≠Èü≥ÊùÉÈôêÊèêÁ§∫ */
        .voice-permission-hint {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            z-index: 10004;
            text-align: center;
            color: #333;
            max-width: 400px;
            animation: slideInScale 0.3s ease-out;
        }

        @keyframes slideInScale {
            from {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.8);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }

        /* ‰ºòÂåñÁöÑÊï∞Â≠¶ÂÖ¨ÂºèÊ†∑Âºè - Á∫ØCSSÊñπÊ°à */
        .math-formula {
            margin: 15px 0;
            padding: 12px;
            background: linear-gradient(135deg, rgba(79, 172, 254, 0.1), rgba(0, 242, 254, 0.1));
            border-radius: 12px;
            border-left: 4px solid var(--accent-color);
            text-align: center;
            font-size: 1.2em;
            font-family: 'Times New Roman', 'STIX Two Math', 'Latin Modern Math', 'Cambria Math', 'Lucida Bright Math', 'DejaVu Math', serif;
            overflow-x: auto;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            /* Á°Æ‰øùUnicodeÂ≠óÁ¨¶Ê≠£Á°ÆÊòæÁ§∫ */
            unicode-bidi: embed;
            direction: ltr;
        }

        /* ÂàÜÊï∞Ê†∑Âºè */
        .fraction {
            display: inline-block;
            text-align: center;
            vertical-align: middle;
            margin: 0 3px;
        }

        .numerator {
            display: block;
            border-bottom: 1px solid currentColor;
            padding-bottom: 2px;
            font-size: 0.9em;
        }

        .denominator {
            display: block;
            padding-top: 2px;
            font-size: 0.9em;
        }

        /* Âπ≥ÊñπÊ†πÊ†∑Âºè */
        .sqrt {
            position: relative;
            display: inline-block;
            margin: 0 2px;
        }

        .sqrt-content {
            border-top: 1px solid currentColor;
            padding-left: 2px;
            margin-left: 2px;
        }

        /* ÂêëÈáèÊ†∑Âºè - Á≤æÁ°ÆÁÆ≠Â§¥ÂØπÈΩê */
        .vector {
            position: relative;
            font-weight: bold;
            display: inline-block;
            margin: 0 1px; /* ÁªôÁÆ≠Â§¥ÁïôÂá∫Á©∫Èó¥ */
        }

        .vector::after {
            content: '‚Üí';
            position: absolute;
            top: -0.4em; /* Ë∞ÉÊï¥ÂûÇÁõ¥‰ΩçÁΩÆ */
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.7em; /* Á®çÂæÆÁº©Â∞èÁÆ≠Â§¥ */
            font-weight: normal;
            line-height: 1;
            z-index: 1;
        }

        /* ÂçïÂ≠óÊØçÂêëÈáè‰ºòÂåñ */
        .vector.single-letter {
            min-width: 0.8em;
            text-align: center;
        }

        .vector.single-letter::after {
            top: -0.35em;
            font-size: 0.65em;
        }

        /* Â§öÂ≠óÊØçÂêëÈáè‰ºòÂåñ */
        .vector.multi-letter::after {
            top: -0.45em;
            font-size: 0.75em;
        }

        /* Â§áÁî®ÂêëÈáèÊ†∑ÂºèÔºà‰ΩøÁî®‰∏äÂàíÁ∫øÔºâ */
        .vector-overline {
            text-decoration: overline;
            text-decoration-thickness: 1px;
            text-underline-offset: -0.2em;
            font-weight: bold;
        }

        /* ‰∏äÊ†á‰∏ãÊ†á‰ºòÂåñ */
        sup, sub {
            font-size: 0.75em;
            line-height: 0;
        }

        /* Â∏åËÖäÂ≠óÊØçÂíåÁâπÊÆäÁ¨¶Âè∑ */
        .math-formula .greek {
            font-style: italic;
            font-weight: normal;
        }

        /* ÂÜÖËÅîÊï∞Â≠¶ÂÖ¨Âºè */
        .math-inline {
            background: rgba(79, 172, 254, 0.1);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Times New Roman', serif;
            font-style: italic;
            margin: 0 2px;
        }

        /* Êï∞Â≠¶ÊòæÁ§∫ÂÖ¨Âºè */
        .math-display {
            display: block;
            text-align: center;
            margin: 15px 0;
            font-size: 1.3em;
            font-family: 'Times New Roman', serif;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
        }

        /* ÁâπÊÆäÊï∞Â≠¶Á¨¶Âè∑Ê†∑Âºè */
        .math-symbol {
            font-family: 'Segoe UI Symbol', 'Symbol', 'Times New Roman', serif;
            font-size: 1.1em;
        }

        /* ÁßØÂàÜÁ¨¶Âè∑ÁâπÊÆäÂ§ÑÁêÜ */
        .integral {
            font-size: 1.4em;
            vertical-align: middle;
            margin: 0 2px;
        }

        /* Ê±ÇÂíåÁ¨¶Âè∑ÁâπÊÆäÂ§ÑÁêÜ */
        .summation {
            font-size: 1.3em;
            vertical-align: middle;
            margin: 0 2px;
        }

        /* Âø´ÈÄüÂª∫ËÆÆ */
        .suggestions-section {
            background: var(--glass-bg);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            animation: suggestionsSlideIn 1s ease-out 0.5s both;
        }

        @keyframes suggestionsSlideIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .suggestions-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 20px;
            text-align: center;
        }

        .suggestions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .suggestion-item {
            background: rgba(255,255,255,0.1);
            padding: 15px 20px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }

        .suggestion-item:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-3px);
            border-color: rgba(255,255,255,0.3);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        /* AIÁä∂ÊÄÅÊåáÁ§∫Âô® */
        .ai-status {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--glass-bg);
            padding: 12px 18px;
            border-radius: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            font-size: 0.9em;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .ai-status.thinking {
            animation: statusPulse 1.5s ease-in-out infinite;
        }

        @keyframes statusPulse {
            0%, 100% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.05); opacity: 1; }
        }

        /* Âø´Êç∑ÈîÆÊèêÁ§∫ */
        .shortcuts-hint {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: var(--glass-bg);
            padding: 15px 20px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            font-size: 0.85em;
            opacity: 0.8;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .shortcuts-hint:hover {
            opacity: 1;
            transform: translateY(-3px);
        }

        /* ÈÄöÁü•ÁªÑ‰ª∂ */
        .notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 15px 25px;
            border-radius: 15px;
            color: white;
            font-weight: 500;
            z-index: 10000;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            transition: all 0.3s ease;
            max-width: 90vw;
        }

        .notification.show {
            animation: notificationSlideIn 0.3s ease-out;
        }

        @keyframes notificationSlideIn {
            from {
                opacity: 0;
                transform: translateX(-50%) translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
        }

        .notification.success {
            background: linear-gradient(135deg, var(--success-color), #38f9d7);
        }

        .notification.error {
            background: linear-gradient(135deg, var(--error-color), #ee5a52);
        }

        .notification.info {
            background: linear-gradient(135deg, var(--accent-color), #00f2fe);
        }

        /* ÂìçÂ∫îÂºèËÆæËÆ° */
        @media (max-width: 768px) {
            .main-content {
                padding: 60px 15px 20px;
            }
            
            .is-fullscreen .main-content {
                padding: 60px 20px 20px;
            }
            
            .chat-messages {
                height: 300px;
            }
            
            .is-fullscreen .chat-messages {
                height: 40vh;
            }
            
            .suggestions-grid {
                grid-template-columns: 1fr;
            }
            
            .input-container {
                flex-direction: column;
                gap: 10px;
            }
            
            .send-btn {
                align-self: stretch;
                justify-content: center;
            }
            
            .shortcuts-hint {
                display: none;
            }
        }

        /* ÁΩëÁªúÁä∂ÊÄÅÊèêÁ§∫ */
        .network-status {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 107, 107, 0.9);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 14px;
            z-index: 10000;
            backdrop-filter: blur(10px);
            display: none;
            animation: slideDown 0.3s ease;
        }

        .network-status.show {
            display: block;
        }

        @keyframes slideDown {
            from { transform: translateX(-50%) translateY(-100%); opacity: 0; }
            to { transform: translateX(-50%) translateY(0); opacity: 1; }
        }

        /* Âä†ËΩΩÁä∂ÊÄÅ */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }

        .loading-overlay.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            color: white;
            font-size: 18px;
            font-weight: 500;
        }

        .loading-progress {
            width: 200px;
            height: 4px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 2px;
            margin-top: 20px;
            overflow: hidden;
        }

        .loading-progress-bar {
            height: 100%;
            background: white;
            border-radius: 2px;
            animation: loadingProgress 3s ease-in-out infinite;
        }

        @keyframes loadingProgress {
            0% { width: 0%; }
            50% { width: 70%; }
            100% { width: 100%; }
        }

        /* È´òÁ∫ßÂäüËÉΩÈù¢ÊùøÊ†∑Âºè */
        .advanced-panel {
            position: fixed;
            top: 0;
            right: 0;
            width: 400px;
            height: 100vh;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(255, 255, 255, 0.9));
            backdrop-filter: blur(20px);
            border-left: 1px solid rgba(255, 255, 255, 0.3);
            z-index: 10002;
            overflow-y: auto;
            transform: translateX(100%);
            animation: slideInRight 0.3s ease-out forwards;
            box-shadow: -10px 0 30px rgba(0, 0, 0, 0.2);
        }

        @keyframes slideInRight {
            to { transform: translateX(0); }
        }

        .panel-header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1;
        }

        .panel-header h3 {
            margin: 0;
            font-size: 1.2em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .close-btn {
            background: none;
            border: none;
            color: white;
            font-size: 1.2em;
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: rotate(90deg);
        }

        .panel-content {
            padding: 20px;
            color: #333;
        }

        .feature-section, .preference-section, .session-section, .stats-section {
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .feature-section h4, .preference-section h4, .session-section h4, .stats-section h4 {
            margin: 0 0 15px 0;
            color: var(--primary-color);
            font-size: 1.1em;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .feature-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .feature-item:hover {
            background: rgba(255, 255, 255, 0.8);
            transform: translateY(-2px);
        }

        /* ÂºÄÂÖ≥Ê†∑Âºè */
        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: 0.4s;
            border-radius: 24px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: 0.4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: var(--primary-color);
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        .preference-grid {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .preference-item {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .preference-item label {
            font-weight: 500;
            color: var(--secondary-color);
        }

        .preference-item select {
            padding: 8px 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            background: white;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }

        .preference-item select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .session-controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .session-btn {
            padding: 10px 15px;
            border: none;
            border-radius: 8px;
            background: var(--primary-color);
            color: white;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .session-btn:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
        }

        .session-btn.danger {
            background: var(--error-color);
        }

        .session-btn.danger:hover {
            background: #dc2626;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }

        .stat-item {
            text-align: center;
            padding: 15px;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .stat-value {
            display: block;
            font-size: 1.5em;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.8em;
            color: #666;
        }

        /* ÊµÆÂä®Á≤íÂ≠êÊïàÊûú */
        .floating-elements {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .floating-particle {
            position: absolute;
            width: 3px;
            height: 3px;
            background: rgba(255,255,255,0.4);
            border-radius: 50%;
            animation: floatParticle 40s linear infinite;
            box-shadow: 0 0 6px rgba(255,255,255,0.3);
        }

        @keyframes floatParticle {
            0% {
                transform: translateY(100vh) rotate(0deg) scale(0);
                opacity: 0;
            }
            5% {
                opacity: 1;
                transform: translateY(95vh) rotate(18deg) scale(1);
            }
            95% {
                opacity: 1;
                transform: translateY(-5vh) rotate(342deg) scale(1);
            }
            100% {
                transform: translateY(-10vh) rotate(360deg) scale(0);
                opacity: 0;
            }
        }

        /* AIÊô∫ËÉΩÊé®ÂØºÂäüËÉΩ */
        .ai-derivation-section {
            margin-top: 40px;
            padding: 30px;
            background: var(--glass-bg);
            border-radius: 20px;
            backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            animation: suggestionsSlideIn 1s ease-out 0.5s both;
        }

        .derivation-card {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .derivation-card .card-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--text-primary);
        }

        .derivation-card .card-content p {
            font-size: 0.95em;
            color: var(--text-secondary);
            margin-bottom: 15px;
        }

        .derivation-example .example-title {
            font-size: 1.1rem;
            font-weight: 500;
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        .derivation-steps .step {
            font-size: 0.9em;
            color: var(--secondary-color);
            margin-bottom: 10px;
            font-weight: 500;
        }

        .derivation-steps .formula {
            font-size: 0.9em;
            color: var(--accent-color);
            font-family: 'Courier New', Courier, monospace;
            margin-left: 20px;
            margin-bottom: 10px;
            padding: 10px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .derivation-example .derivation-steps {
            border-left: 2px solid var(--primary-color);
            padding-left: 15px;
            margin-left: 10px;
        }

        .hint-system .hint-item {
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .hint-system .hint-title {
            font-size: 1em;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 8px;
        }

        .hint-system .hint-content p {
            font-size: 0.85em;
            color: var(--text-secondary);
            margin-bottom: 5px;
        }

        .interactive-exercise .exercise-title {
            font-size: 1.1rem;
            font-weight: 500;
            margin-bottom: 10px;
            color: var(--accent-color);
        }

        .interactive-exercise .exercise-steps .step-prompt {
            font-size: 0.9em;
            color: var(--secondary-color);
            margin-bottom: 8px;
            font-style: italic;
        }

        .interactive-exercise .exercise-steps .formula {
            font-size: 0.9em;
            color: var(--primary-color);
            font-family: 'Courier New', Courier, monospace;
            margin-left: 20px;
            margin-bottom: 10px;
            padding: 10px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .advanced-derivation-section .section-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--primary-color);
        }

        .verification-example .example-title {
            font-size: 1.1rem;
            font-weight: 500;
            margin-bottom: 10px;
            color: var(--accent-color);
        }

        .verification-steps .step {
            font-size: 0.9em;
            color: var(--secondary-color);
            margin-bottom: 10px;
            font-weight: 500;
        }

        .verification-steps .formula {
            font-size: 0.9em;
            color: var(--primary-color);
            font-family: 'Courier New', Courier, monospace;
            margin-left: 20px;
            margin-bottom: 10px;
            padding: 10px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .verification-result .result-title {
            font-size: 1em;
            font-weight: 600;
            color: var(--success-color);
            margin-bottom: 8px;
        }

        .verification-result .result-details p {
            font-size: 0.85em;
            color: var(--text-secondary);
            margin-bottom: 5px;
        }

        .error-detection .error-example {
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .error-detection .error-title {
            font-size: 1em;
            font-weight: 600;
            color: var(--error-color);
            margin-bottom: 8px;
        }

        .error-detection .error-description p {
            font-size: 0.85em;
            color: var(--text-secondary);
            margin-bottom: 5px;
        }

        /* Êï∞Â≠¶ÂÖ¨ÂºèÊ†∑Âºè */
        .math-formula {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
            backdrop-filter: blur(10px);
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .math-formula::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s;
        }

        .math-formula:hover::before {
            left: 100%;
        }

        .math-formula:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .formula-label {
            font-size: 0.9em;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 10px;
            font-weight: 500;
        }

        .derivation-step {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid var(--accent-color);
            transition: all 0.3s ease;
        }

        .derivation-step:hover {
            background: rgba(255, 255, 255, 0.12);
            transform: translateX(5px);
        }

        .step-number {
            display: inline-block;
            background: var(--accent-color);
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            text-align: center;
            line-height: 25px;
            font-weight: bold;
            margin-right: 10px;
            font-size: 0.8em;
        }

        .step-title {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 10px;
        }

        .step-description {
            color: var(--text-secondary);
            font-size: 0.95em;
            margin-bottom: 15px;
            line-height: 1.5;
        }



        /* ÂìçÂ∫îÂºèËÆæËÆ° */
        @media (max-width: 768px) {
            .math-formula {
                padding: 15px;
                margin: 10px 0;
            }

        }
    </style>
</head>
<body>
    <!-- ÊµÆÂä®Á≤íÂ≠êÊïàÊûú -->
    <div class="floating-elements">
        <div class="floating-particle" style="left: 6%; animation-delay: 0s;"></div>
        <div class="floating-particle" style="left: 16%; animation-delay: 6s;"></div>
        <div class="floating-particle" style="left: 26%; animation-delay: 12s;"></div>
        <div class="floating-particle" style="left: 36%; animation-delay: 18s;"></div>
        <div class="floating-particle" style="left: 46%; animation-delay: 24s;"></div>
        <div class="floating-particle" style="left: 56%; animation-delay: 30s;"></div>
        <div class="floating-particle" style="left: 66%; animation-delay: 36s;"></div>
        <div class="floating-particle" style="left: 76%; animation-delay: 42s;"></div>
        <div class="floating-particle" style="left: 86%; animation-delay: 48s;"></div>
        <div class="floating-particle" style="left: 96%; animation-delay: 54s;"></div>
    </div>

    <div id="app" :class="['ai-container', { 'is-fullscreen': isFullscreen }]">
        <!-- Âä†ËΩΩË¶ÜÁõñÂ±Ç -->
        <div v-if="loading" class="loading-overlay">
            <div class="loading-spinner"></div>
            <div class="loading-text">Ê≠£Âú®Âä†ËΩΩAIÂ≠¶‰π†Âä©Êâã...</div>
            <div class="loading-progress">
                <div class="loading-progress-bar"></div>
            </div>
        </div>

        <!-- ÈÄöÁü•ÁªÑ‰ª∂ -->
        <div v-if="notification.show" :class="['notification', notification.type, {show: notification.show}]">
            {{ notification.message }}
        </div>

        <!-- ÁΩëÁªúÁä∂ÊÄÅÊèêÁ§∫ -->
        <div v-if="networkStatus" :class="['network-status', { show: networkStatus.show }]" :title="networkStatus.message">
            <i :class="networkStatus.icon"></i> {{ networkStatus.message }}
        </div>

        <!-- ÂÖ®Â±èÊéßÂà∂ÊåâÈíÆ -->
        <div class="fullscreen-controls">
            <button @click="toggleAdvancedPanel" class="advanced-btn" title="È´òÁ∫ßÂäüËÉΩÈù¢Êùø">
                <i class="fas fa-cog"></i> È´òÁ∫ßÂäüËÉΩ
            </button>
            <button @click="toggleFullscreen" :class="['fullscreen-btn', { active: isFullscreen }]" :title="isFullscreen ? 'ÈÄÄÂá∫ÂÖ®Â±è [F11]' : 'ËøõÂÖ•ÂÖ®Â±è [F11]'">
                <i :class="isFullscreen ? 'fas fa-compress' : 'fas fa-expand'"></i>
                {{ isFullscreen ? 'ÈÄÄÂá∫ÂÖ®Â±è' : 'ÂÖ®Â±èÊ®°Âºè' }}
            </button>
            <a href="../index.html" class="back-btn" title="ËøîÂõû‰∏ªÈ°µ [ESC]">
                <i class="fas fa-arrow-left"></i> ËøîÂõû‰∏ªÈ°µ
            </a>
        </div>

        <!-- È´òÁ∫ßÂäüËÉΩÈù¢Êùø -->
        <div v-if="showAdvancedPanel" class="advanced-panel">
            <div class="panel-header">
                <h3><i class="fas fa-brain"></i> AIÂä©ÊâãÈ´òÁ∫ßÂäüËÉΩ</h3>
                <button @click="showAdvancedPanel = false" class="close-btn">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="panel-content">
                <!-- ÂäüËÉΩÂºÄÂÖ≥ -->
                <div class="feature-section">
                    <h4><i class="fas fa-toggle-on"></i> ÂäüËÉΩÂºÄÂÖ≥</h4>
                    <div class="feature-grid">
                        <div class="feature-item">
                            <label class="switch">
                                <input type="checkbox" v-model="advancedFeatures.mathMode">
                                <span class="slider"></span>
                            </label>
                            <span>Êï∞Â≠¶Ê®°Âºè</span>
                        </div>
                        <div class="feature-item">
                            <label class="switch">
                                <input type="checkbox" v-model="advancedFeatures.expertMode">
                                <span class="slider"></span>
                            </label>
                            <span>‰∏ìÂÆ∂Ê®°Âºè</span>
                        </div>
                        <div class="feature-item">
                            <label class="switch">
                                <input type="checkbox" v-model="advancedFeatures.contextMemory">
                                <span class="slider"></span>
                            </label>
                            <span>‰∏ä‰∏ãÊñáËÆ∞ÂøÜ</span>
                        </div>
                        <div class="feature-item">
                            <label class="switch">
                                <input type="checkbox" v-model="advancedFeatures.smartSuggestions">
                                <span class="slider"></span>
                            </label>
                            <span>Êô∫ËÉΩÂª∫ËÆÆ</span>
                        </div>
                    </div>
                </div>

                <!-- Áî®Êà∑ÂÅèÂ•Ω -->
                <div class="preference-section">
                    <h4><i class="fas fa-user-cog"></i> ‰∏™ÊÄßÂåñËÆæÁΩÆ</h4>
                    <div class="preference-grid">
                        <div class="preference-item">
                            <label>ÂõûÁ≠îËØ¶ÁªÜÁ®ãÂ∫¶:</label>
                            <select v-model="userPreferences.responseLength">
                                <option value="brief">ÁÆÄÊ¥Å</option>
                                <option value="normal">Ê†áÂáÜ</option>
                                <option value="detailed">ËØ¶ÁªÜ</option>
                            </select>
                        </div>
                        <div class="preference-item">
                            <label>Ëß£ÈáäÊ∞¥Âπ≥:</label>
                            <select v-model="userPreferences.explanationLevel">
                                <option value="beginner">ÂàùÂ≠¶ËÄÖ</option>
                                <option value="intermediate">‰∏≠Á∫ß</option>
                                <option value="advanced">È´òÁ∫ß</option>
                            </select>
                        </div>
                        <div class="preference-item">
                            <label>AI‰∏™ÊÄß:</label>
                            <select v-model="aiPersonality">
                                <option value="friendly">ÂèãÂ•Ω</option>
                                <option value="professional">‰∏ì‰∏ö</option>
                                <option value="academic">Â≠¶ÊúØ</option>
                                <option value="casual">ÈöèÊÑè</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- ‰ºöËØùÁÆ°ÁêÜ -->
                <div class="session-section">
                    <h4><i class="fas fa-history"></i> ‰ºöËØùÁÆ°ÁêÜ</h4>
                    <div class="session-controls">
                        <button @click="saveCurrentSession" class="session-btn">
                            <i class="fas fa-save"></i> ‰øùÂ≠ò‰ºöËØù
                        </button>
                        <button @click="loadSessionHistory" class="session-btn">
                            <i class="fas fa-folder-open"></i> ÂéÜÂè≤‰ºöËØù
                        </button>
                        <button @click="exportChat" class="session-btn">
                            <i class="fas fa-download"></i> ÂØºÂá∫ÂØπËØù
                        </button>
                        <button @click="clearAllHistory" class="session-btn danger">
                            <i class="fas fa-trash"></i> Ê∏ÖÁ©∫ÂéÜÂè≤
                        </button>
                    </div>
                </div>

                <!-- ÁªüËÆ°‰ø°ÊÅØ -->
                <div class="stats-section">
                    <h4><i class="fas fa-chart-bar"></i> ‰ºöËØùÁªüËÆ°</h4>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <span class="stat-value">{{ sessionStats.questionsAsked }}</span>
                            <span class="stat-label">ÊèêÈóÆÊ¨°Êï∞</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value">{{ sessionStats.topicsDiscussed.size }}</span>
                            <span class="stat-label">ËÆ®ËÆ∫ËØùÈ¢ò</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value">{{ formatDuration(sessionStats.timeSpent) }}</span>
                            <span class="stat-label">‰ΩøÁî®Êó∂Èïø</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ‰∏ªË¶ÅÂÜÖÂÆπ -->
        <div v-if="!loading" class="main-content">
            <!-- È°µÈù¢Ê†áÈ¢ò -->
            <h1 class="page-title">ü§ñ AIÂ≠¶‰π†Âä©Êâã</h1>
            <p class="page-subtitle">Êô∫ËÉΩÈóÆÁ≠îËß£ÊÉëÔºå‰∏™ÊÄßÂåñÂ≠¶‰π†Âª∫ËÆÆÔºå24Â∞èÊó∂Âú®Á∫øËæÖÂØº</p>

            <!-- ËÅäÂ§©ÂÆπÂô® -->
            <div class="chat-container">
                <div class="chat-header">
                    <i class="fas fa-robot ai-icon"></i>
                    AIÂä©Êâã - Âú®Á∫øÁä∂ÊÄÅ
                    <span v-if="isTyping" style="margin-left: auto; font-size: 0.9em;">Ê≠£Âú®ËæìÂÖ•...</span>
                </div>

                <div class="chat-messages" ref="chatMessages">
                    <div v-for="message in messages" :key="message.id" :class="['message', message.sender]">
                        <div class="message-content" v-html="message.content"></div>
                        <div class="message-time">{{ formatTime(message.timestamp) }}</div>
                    </div>
                </div>

                <div class="chat-input">
                    <div class="input-container">
                        <div class="input-wrapper">
                            <textarea
                                v-model="currentMessage"
                                @keydown.enter="handleEnter"
                                class="message-input"
                                placeholder="ËØ∑ËæìÂÖ•ÊÇ®ÁöÑÈóÆÈ¢ò..."
                                :disabled="isTyping"
                            ></textarea>
                            <div class="input-tools">
                                <button @click="toggleVoiceInput" :class="['voice-btn', { active: isRecording }]" title="ËØ≠Èü≥ËæìÂÖ•">
                                    <i :class="isRecording ? 'fas fa-stop' : 'fas fa-microphone'"></i>
                                </button>
                                <button @click="toggleMathInput" :class="['math-btn', { active: mathInputMode }]" title="Êï∞Â≠¶ÂÖ¨ÂºèËæìÂÖ•">
                                    <i class="fas fa-square-root-alt"></i>
                                </button>
                                <button @click="insertTemplate" class="template-btn" title="ÊèíÂÖ•Ê®°Êùø">
                                    <i class="fas fa-file-alt"></i>
                                </button>
                            </div>
                        </div>
                        <button @click="sendMessage" :disabled="!currentMessage.trim() || isTyping" class="send-btn">
                            <i class="fas fa-paper-plane"></i>
                            ÂèëÈÄÅ
                        </button>
                    </div>

                    <!-- Êï∞Â≠¶ÂÖ¨ÂºèËæìÂÖ•Èù¢Êùø -->
                    <div v-if="mathInputMode" class="math-input-panel">
                        <div class="math-symbols">
                            <button v-for="symbol in mathSymbols" :key="symbol.name"
                                    @click="insertMathSymbol(symbol.latex)"
                                    :title="symbol.name"
                                    class="symbol-btn">
                                {{ symbol.display }}
                            </button>
                        </div>
                        <div class="math-templates">
                            <button v-for="template in mathTemplates" :key="template.name"
                                    @click="insertMathTemplate(template.latex)"
                                    :title="template.name"
                                    class="template-btn-small">
                                {{ template.name }}
                            </button>
                        </div>
                    </div>

                    <!-- ËØ≠Èü≥ËØÜÂà´Áä∂ÊÄÅ -->
                    <div v-if="isRecording" class="voice-status">
                        <div class="voice-animation">
                            <div class="voice-wave"></div>
                            <div class="voice-wave"></div>
                            <div class="voice-wave"></div>
                        </div>
                        <span>Ê≠£Âú®Âê¨ÂèñÊÇ®ÁöÑËØ≠Èü≥...</span>
                    </div>
                </div>
            </div>

            <!-- Âø´ÈÄüÂª∫ËÆÆ -->
            <div class="suggestions-section">
                <h3 class="suggestions-title">üí° Âø´ÈÄüÊèêÈóÆÂª∫ËÆÆ</h3>
                <div class="suggestions-grid">
                    <div v-for="suggestion in suggestions" :key="suggestion" class="suggestion-item" @click="selectSuggestion(suggestion)">
                        {{ suggestion }}
                    </div>
                </div>
            </div>

            <!-- Âø´Êç∑ÈîÆÊèêÁ§∫ -->
            <div class="shortcuts-hint">
                <i class="fas fa-keyboard"></i> 
                Âø´Êç∑ÈîÆ: Enter-ÂèëÈÄÅ | F11-ÂÖ®Â±è | ESC-ÈÄÄÂá∫ | Ctrl+L-Ê∏ÖÁ©∫ÂØπËØù
            </div>

            <!-- AIÊô∫ËÉΩÊé®ÂØºÂäüËÉΩ -->
            <div class="ai-derivation-section">
                <div class="section-title">ü§ñ AIÊô∫ËÉΩÊé®ÂØºÂä©Êâã</div>
                
                <div class="derivation-card">
                    <div class="card-title">Ëá™Âä®ÂÖ¨ÂºèÊé®ÂØº</div>
                    <div class="card-content">
                        <p>AIÂä©ÊâãÂèØ‰ª•Ëá™Âä®Êé®ÂØºÂ§çÊùÇÁöÑÊµÅ‰ΩìÂäõÂ≠¶ÂÖ¨ÂºèÔºåÊèê‰æõËØ¶ÁªÜÁöÑÊ≠•È™§ÂàÜËß£Ôºö</p>
                        
                        <div class="derivation-example">
                            <div class="example-title">‰ºØÂä™Âà©ÊñπÁ®ãÊé®ÂØº</div>
                            <div class="derivation-steps">
                                <div class="derivation-step">
                                    <div class="step-number">1</div>
                                    <div class="step-title">‰ªéÊ¨ßÊãâÊñπÁ®ãÂá∫Âèë</div>
                                    <div class="step-description">Ê¨ßÊãâÊñπÁ®ãÊòØÁêÜÊÉ≥ÊµÅ‰ΩìËøêÂä®ÁöÑÂü∫Êú¨ÊñπÁ®ãÔºåÊèèËø∞‰∫ÜÊµÅ‰ΩìÂæÆÂÖÉÁöÑÂèóÂäõÂπ≥Ë°°„ÄÇ</div>
                                    <div class="math-formula">
                                        <div class="formula-label">Ê¨ßÊãâÊñπÁ®ã</div>
                                        $$\frac{\partial \vec{v}}{\partial t} + (\vec{v} \cdot \nabla)\vec{v} = -\frac{1}{\rho}\nabla p + \vec{g}$$
                                    </div>
                                </div>
                                
                                <div class="derivation-step">
                                    <div class="step-number">2</div>
                                    <div class="step-title">ÂØπ‰∫éÂÆöÂ∏∏ÊµÅÂä®</div>
                                    <div class="step-description">ÂÆöÂ∏∏ÊµÅÂä®‰∏≠ÔºåÈÄüÂ∫¶Âú∫‰∏çÈöèÊó∂Èó¥ÂèòÂåñÔºåÊó∂Èó¥ÂØºÊï∞È°π‰∏∫Èõ∂„ÄÇ</div>
                                    <div class="math-formula">
                                        <div class="formula-label">ÂÆöÂ∏∏Êù°‰ª∂</div>
                                        $$\frac{\partial \vec{v}}{\partial t} = 0$$
                                    </div>
                                </div>
                                
                                <div class="derivation-step">
                                    <div class="step-number">3</div>
                                    <div class="step-title">Ê≤øÊµÅÁ∫øÁßØÂàÜ</div>
                                    <div class="step-description">Ê≤øÊµÅÁ∫øÁßØÂàÜÊ¨ßÊãâÊñπÁ®ãÔºåÂ∞ÜÁü¢ÈáèÊñπÁ®ãËΩ¨Âåñ‰∏∫Ê†áÈáèÊñπÁ®ã„ÄÇ</div>
                                    <div class="math-formula">
                                        <div class="formula-label">ÁßØÂàÜÂΩ¢Âºè</div>
                                        ‚à´[(<span class="vector single-letter">v</span> ¬∑ ‚àá)<span class="vector single-letter">v</span>] ¬∑ d<span class="vector single-letter">s</span> = ‚à´[-<span class="fraction"><span class="numerator">1</span><span class="denominator">œÅ</span></span>‚àáp + <span class="vector single-letter">g</span>] ¬∑ d<span class="vector single-letter">s</span>
                                    </div>
                                </div>
                                
                                <div class="derivation-step">
                                    <div class="step-number">4</div>
                                    <div class="step-title">Âà©Áî®ÂêëÈáèÊÅíÁ≠âÂºè</div>
                                    <div class="step-description">‰ΩøÁî®ÂêëÈáèÂàÜÊûê‰∏≠ÁöÑÊÅíÁ≠âÂºèÔºåÂ∞ÜÂØπÊµÅÈ°πËΩ¨Âåñ‰∏∫Ê¢ØÂ∫¶ÂΩ¢Âºè„ÄÇ</div>
                                    <div class="math-formula">
                                        <div class="formula-label">ÂêëÈáèÊÅíÁ≠âÂºè</div>
                                        (<span class="vector single-letter">v</span> ¬∑ ‚àá)<span class="vector single-letter">v</span> = ‚àá(<span class="fraction"><span class="numerator">v¬≤</span><span class="denominator">2</span></span>) - <span class="vector single-letter">v</span> √ó (‚àá √ó <span class="vector single-letter">v</span>)
                                    </div>
                                </div>
                                
                                <div class="derivation-step">
                                    <div class="step-number">5</div>
                                    <div class="step-title">ÂØπ‰∫éÊó†ÊóãÊµÅÂä®</div>
                                    <div class="step-description">Êó†ÊóãÊµÅÂä®‰∏≠ÔºåÈÄüÂ∫¶Âú∫ÁöÑÊóãÂ∫¶‰∏∫Èõ∂ÔºåÁÆÄÂåñ‰∫ÜÊñπÁ®ãÂΩ¢Âºè„ÄÇ</div>
                                    <div class="math-formula">
                                        <div class="formula-label">Êó†ÊóãÊù°‰ª∂</div>
                                        $$\nabla \times \vec{v} = 0$$
                                    </div>
                                </div>
                                
                                <div class="derivation-step">
                                    <div class="step-number">6</div>
                                    <div class="step-title">ÁßØÂàÜÂæóÂà∞‰ºØÂä™Âà©ÊñπÁ®ã</div>
                                    <div class="step-description">ÊúÄÁªàÁßØÂàÜÂæóÂà∞‰ºØÂä™Âà©ÊñπÁ®ãÔºåÊèèËø∞‰∫ÜÊ≤øÊµÅÁ∫øÁöÑÊú∫Ê¢∞ËÉΩÂÆàÊÅí„ÄÇ</div>
                                    <div class="math-formula">
                                        <div class="formula-label">‰ºØÂä™Âà©ÊñπÁ®ã</div>
                                        $$\frac{v^2}{2} + \frac{p}{\rho} + gz = Â∏∏Êï∞$$
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="derivation-card">
                    <div class="card-title">Êô∫ËÉΩÊ≠•È™§ÂàÜËß£</div>
                    <div class="card-content">
                        <p>AIÂèØ‰ª•Â∞ÜÂ§çÊùÇÊé®ÂØºÂàÜËß£‰∏∫ÁÆÄÂçïÊòìÊáÇÁöÑÊ≠•È™§Ôºö</p>
                        
                        <div class="derivation-example">
                            <div class="example-title">Navier-StokesÊñπÁ®ãÊé®ÂØº</div>
                            <div class="derivation-steps">
                                <div class="derivation-step">
                                    <div class="step-number">1</div>
                                    <div class="step-title">Âü∫‰∫éÁâõÈ°øÁ¨¨‰∫åÂÆöÂæã</div>
                                    <div class="step-description">ÊµÅ‰ΩìÂæÆÂÖÉÁöÑËøêÂä®ÈÅµÂæ™ÁâõÈ°øÁ¨¨‰∫åÂÆöÂæãÔºåÂäõÁ≠â‰∫éË¥®Èáè‰πò‰ª•Âä†ÈÄüÂ∫¶„ÄÇ</div>
                                    <div class="math-formula">
                                        <div class="formula-label">ÁâõÈ°øÁ¨¨‰∫åÂÆöÂæã</div>
                                        $$F = ma$$
                                    </div>
                                </div>
                                
                                <div class="derivation-step">
                                    <div class="step-number">2</div>
                                    <div class="step-title">ÊµÅ‰ΩìÂæÆÂÖÉÂèóÂäõÂàÜÊûê</div>
                                    <div class="step-description">ÊµÅ‰ΩìÂæÆÂÖÉÁöÑÊÉØÊÄßÂäõÁ≠â‰∫éÂØÜÂ∫¶„ÄÅ‰ΩìÁßØÂíåÁâ©Ë¥®ÂØºÊï∞ÁöÑ‰πòÁßØ„ÄÇ</div>
                                    <div class="math-formula">
                                        <div class="formula-label">ÊÉØÊÄßÂäõ</div>
                                        $$F = \rho dV \frac{D\vec{v}}{Dt}$$
                                    </div>
                                </div>
                                
                                <div class="derivation-step">
                                    <div class="step-number">3</div>
                                    <div class="step-title">Ë°®Èù¢ÂäõÔºàÂéãÂäõÊ¢ØÂ∫¶Ôºâ</div>
                                    <div class="step-description">ÂéãÂäõÊ¢ØÂ∫¶‰∫ßÁîüÁöÑË°®Èù¢ÂäõÔºåÊñπÂêëÊåáÂêëÂéãÂäõÈôç‰ΩéÁöÑÊñπÂêë„ÄÇ</div>
                                    <div class="math-formula">
                                        <div class="formula-label">ÂéãÂäõÊ¢ØÂ∫¶Âäõ</div>
                                        $$F_p = -\nabla p dV$$
                                    </div>
                                </div>
                                
                                <div class="derivation-step">
                                    <div class="step-number">4</div>
                                    <div class="step-title">‰ΩìÁßØÂäõÔºàÈáçÂäõÔºâ</div>
                                    <div class="step-description">ÈáçÂäõÊòØ‰ΩúÁî®Âú®ÊµÅ‰ΩìÂæÆÂÖÉ‰∏äÁöÑ‰ΩìÁßØÂäõÔºå‰∏éÂØÜÂ∫¶ÊàêÊ≠£ÊØî„ÄÇ</div>
                                    <div class="math-formula">
                                        <div class="formula-label">ÈáçÂäõ</div>
                                        $$F_g = \rho \vec{g} dV$$
                                    </div>
                                </div>
                                
                                <div class="derivation-step">
                                    <div class="step-number">5</div>
                                    <div class="step-title">Á≤òÊÄßÂäõ</div>
                                    <div class="step-description">Á≤òÊÄßÂäõÁî±ÈÄüÂ∫¶Ê¢ØÂ∫¶ÁöÑ‰∫åÈò∂ÂØºÊï∞‰∫ßÁîüÔºå‰∏éÁ≤òÊÄßÁ≥ªÊï∞ÊàêÊ≠£ÊØî„ÄÇ</div>
                                    <div class="math-formula">
                                        <div class="formula-label">Á≤òÊÄßÂäõ</div>
                                        $$F_v = \mu \nabla^2 \vec{v} dV$$
                                    </div>
                                </div>
                                
                                <div class="derivation-step">
                                    <div class="step-number">6</div>
                                    <div class="step-title">ÂäõÁöÑÂπ≥Ë°°</div>
                                    <div class="step-description">ÊâÄÊúâÂäõÁöÑÂπ≥Ë°°ÂæóÂà∞Navier-StokesÊñπÁ®ãÔºåËøôÊòØÁ≤òÊÄßÊµÅ‰ΩìËøêÂä®ÁöÑÂü∫Êú¨ÊñπÁ®ã„ÄÇ</div>
                                    <div class="math-formula">
                                        <div class="formula-label">Navier-StokesÊñπÁ®ã</div>
                                        $$\rho \frac{D\vec{v}}{Dt} = -\nabla p + \rho \vec{g} + \mu \nabla^2 \vec{v}$$
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="derivation-card">
                    <div class="card-title">Êô∫ËÉΩÊèêÁ§∫Á≥ªÁªü</div>
                    <div class="card-content">
                        <p>AIÊèê‰æõÊô∫ËÉΩÊèêÁ§∫ÔºåÂ∏ÆÂä©ÁêÜËß£Êé®ÂØºËøáÁ®ã‰∏≠ÁöÑÂÖ≥ÈîÆÊ¶ÇÂøµÔºö</p>
                        
                        <div class="hint-system">
                            <div class="hint-item">
                                <div class="hint-title">üí° ËøûÁª≠ÊÄßÊñπÁ®ãÊèêÁ§∫</div>
                                <div class="hint-content">
                                    <p><strong>ÂÖ≥ÈîÆÊ¶ÇÂøµÔºö</strong>Ë¥®ÈáèÂÆàÊÅí</p>
                                    <p><strong>Áâ©ÁêÜÊÑè‰πâÔºö</strong>ÊµÅÂÖ•ÊéßÂà∂‰ΩìÁöÑË¥®ÈáèÁ≠â‰∫éÊµÅÂá∫ÊéßÂà∂‰ΩìÁöÑË¥®Èáè</p>
                                    <div class="math-formula">
                                        <div class="formula-label">ËøûÁª≠ÊÄßÊñπÁ®ã</div>
                                        $$\frac{\partial \rho}{\partial t} + \nabla \cdot (\rho \vec{v}) = 0$$
                                    </div>
                                    <p><strong>Â∫îÁî®Âú∫ÊôØÔºö</strong>ÁÆ°ÈÅìÊµÅÂä®„ÄÅÊµÅÈáèËÆ°ÁÆó</p>
                                </div>
                            </div>
                            
                            <div class="hint-item">
                                <div class="hint-title">üí° ‰ºØÂä™Âà©ÊñπÁ®ãÊèêÁ§∫</div>
                                <div class="hint-content">
                                    <p><strong>ÂÖ≥ÈîÆÊ¶ÇÂøµÔºö</strong>Êú∫Ê¢∞ËÉΩÂÆàÊÅí</p>
                                    <p><strong>Áâ©ÁêÜÊÑè‰πâÔºö</strong>Ê≤øÊµÅÁ∫øÊÄªÊ∞¥Â§¥‰øùÊåÅ‰∏çÂèò</p>
                                    <div class="math-formula">
                                        <div class="formula-label">‰ºØÂä™Âà©ÊñπÁ®ã</div>
                                        $$\frac{v^2}{2g} + \frac{p}{\rho g} + z = H$$
                                    </div>
                                    <p><strong>Â∫îÁî®Âú∫ÊôØÔºö</strong>Êñá‰∏òÈáåÁÆ°„ÄÅÊú∫ÁøºÂçáÂäõ</p>
                                </div>
                            </div>
                            
                            <div class="hint-item">
                                <div class="hint-title">üí° Èõ∑ËØ∫Êï∞ÊèêÁ§∫</div>
                                <div class="hint-content">
                                    <p><strong>ÂÖ≥ÈîÆÊ¶ÇÂøµÔºö</strong>ÊÉØÊÄßÂäõ‰∏éÁ≤òÊÄßÂäõÁöÑÊØîÂÄº</p>
                                    <p><strong>Áâ©ÁêÜÊÑè‰πâÔºö</strong>Âà§Êñ≠ÊµÅÂä®Áä∂ÊÄÅÁöÑÈáçË¶ÅÂèÇÊï∞</p>
                                    <div class="math-formula">
                                        <div class="formula-label">Èõ∑ËØ∫Êï∞</div>
                                        $$Re = \frac{\rho V L}{\mu}$$
                                    </div>
                                    <p><strong>Â∫îÁî®Âú∫ÊôØÔºö</strong>ÊµÅÂä®Áä∂ÊÄÅÂà§Êñ≠„ÄÅÁõ∏‰ººÊÄßÂàÜÊûê</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="derivation-card">
                    <div class="card-title">‰∫§‰∫íÂºèÊé®ÂØºÁªÉ‰π†</div>
                    <div class="card-content">
                        <p>AIÊèê‰æõ‰∫§‰∫íÂºèÊé®ÂØºÁªÉ‰π†ÔºåÂ∏ÆÂä©Â∑©Âõ∫ÁêÜËß£Ôºö</p>
                        
                        <div class="interactive-exercise">
                            <div class="exercise-title">ÁªÉ‰π†1ÔºöÊé®ÂØºÈùôÊ∞¥ÂéãÂº∫ÂàÜÂ∏É</div>
                            <div class="exercise-steps">
                                <div class="derivation-step">
                                    <div class="step-number">1</div>
                                    <div class="step-title">‰ªéÊµÅ‰ΩìÈùôÂäõÂ≠¶Âü∫Êú¨ÊñπÁ®ãÂºÄÂßã</div>
                                    <div class="step-description">ÊµÅ‰ΩìÈùôÂäõÂ≠¶Âü∫Êú¨ÊñπÁ®ãÊèèËø∞‰∫ÜÈùôÊ≠¢ÊµÅ‰Ωì‰∏≠ÂéãÂº∫ÁöÑÂèòÂåñËßÑÂæã„ÄÇ</div>
                                    <div class="math-formula">
                                        <div class="formula-label">ÈùôÂäõÂ≠¶Âü∫Êú¨ÊñπÁ®ã</div>
                                        $$\nabla p = \rho \vec{g}$$
                                    </div>
                                </div>
                                
                                <div class="derivation-step">
                                    <div class="step-number">2</div>
                                    <div class="step-title">ÂØπ‰∫éÈáçÂäõÂú∫ÁÆÄÂåñ</div>
                                    <div class="step-description">Âú®ÈáçÂäõÂú∫‰∏≠ÔºåÂéãÂº∫Ê¢ØÂ∫¶‰∏ªË¶ÅÊ≤øÂûÇÁõ¥ÊñπÂêëÂèòÂåñ„ÄÇ</div>
                                    <div class="math-formula">
                                        <div class="formula-label">ÈáçÂäõÂú∫ÁÆÄÂåñ</div>
                                        $$\frac{dp}{dz} = -\rho g$$
                                    </div>
                                </div>
                                
                                <div class="derivation-step">
                                    <div class="step-number">3</div>
                                    <div class="step-title">ÁßØÂàÜÂæóÂà∞ÁªìÊûú</div>
                                    <div class="step-description">ÂØπÂéãÂº∫Ê¢ØÂ∫¶ÊñπÁ®ãÁßØÂàÜÔºåÂæóÂà∞ÂéãÂº∫ÈöèÈ´òÂ∫¶ÁöÑÂèòÂåñÂÖ≥Á≥ª„ÄÇ</div>
                                    <div class="math-formula">
                                        <div class="formula-label">ÁßØÂàÜÁªìÊûú</div>
                                        $$p - p_0 = -\rho g(z - z_0)$$
                                    </div>
                                </div>
                                
                                <div class="derivation-step">
                                    <div class="step-number">4</div>
                                    <div class="step-title">ÊúÄÁªàË°®ËææÂºè</div>
                                    <div class="step-description">‰ª§Ê∑±Â∫¶h = z‚ÇÄ - zÔºåÂæóÂà∞ÈùôÊ∞¥ÂéãÂº∫ÂàÜÂ∏ÉÁöÑÊúÄÁªàË°®ËææÂºè„ÄÇ</div>
                                    <div class="math-formula">
                                        <div class="formula-label">ÈùôÊ∞¥ÂéãÂº∫ÂàÜÂ∏É</div>
                                        $$p = p_0 + \rho g h$$
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="interactive-exercise">
                            <div class="exercise-title">ÁªÉ‰π†2ÔºöÊé®ÂØºÂ±ÇÊµÅÁÆ°ÈÅìÈÄüÂ∫¶ÂàÜÂ∏É</div>
                            <div class="exercise-steps">
                                <div class="derivation-step">
                                    <div class="step-number">1</div>
                                    <div class="step-title">‰ªéNavier-StokesÊñπÁ®ãÂºÄÂßã</div>
                                    <div class="step-description">ÂúÜÊü±ÂùêÊ†áÁ≥ª‰∏ãÁöÑNavier-StokesÊñπÁ®ãÔºåÊèèËø∞ÂúÜÁÆ°Â±ÇÊµÅÁöÑÂü∫Êú¨ÊñπÁ®ã„ÄÇ</div>
                                    <div class="math-formula">
                                        <div class="formula-label">Navier-StokesÊñπÁ®ã</div>
                                        $$\mu \frac{1}{r} \frac{d}{dr}(r \frac{du}{dr}) = \frac{dp}{dx}$$
                                    </div>
                                </div>
                                
                                <div class="derivation-step">
                                    <div class="step-number">2</div>
                                    <div class="step-title">Á¨¨‰∏ÄÊ¨°ÁßØÂàÜ</div>
                                    <div class="step-description">ÂØπÂæÑÂêëÂùêÊ†árÁßØÂàÜÔºåÂæóÂà∞ÈÄüÂ∫¶Ê¢ØÂ∫¶ÁöÑË°®ËææÂºè„ÄÇ</div>
                                    <div class="math-formula">
                                        <div class="formula-label">Á¨¨‰∏ÄÊ¨°ÁßØÂàÜ</div>
                                        $$r \frac{du}{dr} = \frac{r^2}{2\mu} \frac{dp}{dx} + C_1$$
                                    </div>
                                </div>
                                
                                <div class="derivation-step">
                                    <div class="step-number">3</div>
                                    <div class="step-title">Â∫îÁî®ËæπÁïåÊù°‰ª∂</div>
                                    <div class="step-description">Âú®ÁÆ°ÈÅì‰∏≠ÂøÉr=0Â§ÑÔºåÈÄüÂ∫¶Ê¢ØÂ∫¶‰∏∫Èõ∂ÔºåÁ°ÆÂÆöÁßØÂàÜÂ∏∏Êï∞„ÄÇ</div>
                                    <div class="math-formula">
                                        <div class="formula-label">ËæπÁïåÊù°‰ª∂</div>
                                        $$C_1 = 0$$
                                    </div>
                                </div>
                                
                                <div class="derivation-step">
                                    <div class="step-number">4</div>
                                    <div class="step-title">Á¨¨‰∫åÊ¨°ÁßØÂàÜ</div>
                                    <div class="step-description">ÂÜçÊ¨°ÁßØÂàÜÂæóÂà∞ÈÄüÂ∫¶ÂàÜÂ∏ÉÂáΩÊï∞ÔºåÂ∫îÁî®Â£ÅÈù¢ËæπÁïåÊù°‰ª∂„ÄÇ</div>
                                <div class="formula">$$u = \frac{r^2}{4\mu} \frac{dp}{dx} + C_2$$</div>
                                
                                <div class="step-prompt">ËæπÁïåÊù°‰ª∂ $r = R$ Êó∂ $u = 0$ ÂæóÂà∞ÊúÄÁªàÁªìÊûúÔºö</div>
                                <div class="formula">$$u(r) = \frac{R^2}{4\mu}(-\frac{dp}{dx})(1 - \frac{r^2}{R^2})$$</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- È´òÁ∫ßÊé®ÂØºÂäüËÉΩ -->
            <div class="advanced-derivation-section">
                <div class="section-title">üöÄ È´òÁ∫ßÊé®ÂØºÂäüËÉΩ</div>
                
                <div class="derivation-card">
                    <div class="card-title">Â§öÊ≠•È™§Êé®ÂØºÈ™åËØÅ</div>
                    <div class="card-content">
                        <p>AIÂèØ‰ª•È™åËØÅÊé®ÂØºËøáÁ®ãÁöÑÊ≠£Á°ÆÊÄßÔºåÂπ∂Êèê‰æõÊîπËøõÂª∫ËÆÆÔºö</p>
                        
                        <div class="verification-example">
                            <div class="example-title">Ê∂°ÈáèËæìËøêÊñπÁ®ãÈ™åËØÅ</div>
                            <div class="verification-steps">
                                <div class="step">ÂéüÂßãÊñπÁ®ãÔºöNavier-StokesÊñπÁ®ã</div>
                                <div class="formula">$$\rho(\frac{\partial \vec{v}}{\partial t} + (\vec{v} \cdot \nabla)\vec{v}) = -\nabla p + \rho\vec{g} + \mu\nabla^2\vec{v}$$</div>
                                
                                <div class="step">ÂèñÊóãÂ∫¶Êìç‰Ωú</div>
                                <div class="formula">$$\nabla \times [\rho(\frac{\partial \vec{v}}{\partial t} + (\vec{v} \cdot \nabla)\vec{v})] = \nabla \times [-\nabla p + \rho\vec{g} + \mu\nabla^2\vec{v}]$$</div>
                                
                                <div class="step">Âà©Áî®ÂêëÈáèÊÅíÁ≠âÂºè</div>
                                <div class="formula">$$\nabla \times (\nabla p) = 0, \quad \nabla \times \vec{g} = 0$$</div>
                                
                                <div class="step">ÂæóÂà∞Ê∂°ÈáèËæìËøêÊñπÁ®ã</div>
                                <div class="formula">$$\frac{D\vec{\omega}}{Dt} = (\vec{\omega} \cdot \nabla)\vec{v} + \nu\nabla^2\vec{\omega}$$</div>
                                
                                <div class="verification-result">
                                    <div class="result-title">‚úÖ È™åËØÅÁªìÊûúÔºöÊé®ÂØºÊ≠£Á°Æ</div>
                                    <div class="result-details">
                                        <p>‚Ä¢ ÂêëÈáèËøêÁÆóÊ≠£Á°Æ</p>
                                        <p>‚Ä¢ Áâ©ÁêÜÊÑè‰πâÊòéÁ°Æ</p>
                                        <p>‚Ä¢ Êï∞Â≠¶ÂΩ¢ÂºèÂêàÁêÜ</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="derivation-card">
                    <div class="card-title">Êô∫ËÉΩÈîôËØØÊ£ÄÊµã</div>
                    <div class="card-content">
                        <p>AIÂèØ‰ª•Ê£ÄÊµãÊé®ÂØºËøáÁ®ã‰∏≠ÁöÑÂ∏∏ËßÅÈîôËØØÔºö</p>
                        
                        <div class="error-detection">
                            <div class="error-example">
                                <div class="error-title">‚ùå Â∏∏ËßÅÈîôËØØ1ÔºöÂøΩÁï•ËæπÁïåÊù°‰ª∂</div>
                                <div class="error-description">
                                    <p>Âú®Êé®ÂØºÂ±ÇÊµÅÁÆ°ÈÅìÊµÅÂä®Êó∂ÔºåÂÆπÊòìÂøΩÁï•ËæπÁïåÊù°‰ª∂Ôºö</p>
                                    <div class="formula">$$r = 0: \frac{du}{dr} = 0$$</div>
                                    <div class="formula">$$r = R: u = 0$$</div>
                                    <p>Ëøô‰∫õËæπÁïåÊù°‰ª∂ÂØπ‰∫éÁ°ÆÂÆöÁßØÂàÜÂ∏∏Êï∞Ëá≥ÂÖ≥ÈáçË¶Å„ÄÇ</p>
                                </div>
                            </div>
                            
                            <div class="error-example">
                                <div class="error-title">‚ùå Â∏∏ËßÅÈîôËØØ2ÔºöÂêëÈáèËøêÁÆóÈîôËØØ</div>
                                <div class="error-description">
                                    <p>Âú®Êé®ÂØº‰ºØÂä™Âà©ÊñπÁ®ãÊó∂ÔºåÂÆπÊòìÊ∑∑Ê∑ÜÂêëÈáèËøêÁÆóÔºö</p>
                                    <div class="formula">$$(\vec{v} \cdot \nabla)\vec{v} \neq \vec{v} \cdot (\nabla \vec{v})$$</div>
                                    <p>Ê≠£Á°ÆÁöÑÂ±ïÂºÄÂ∫îËØ•ÊòØÔºö</p>
                                    <div class="formula">$$(\vec{v} \cdot \nabla)\vec{v} = \nabla(\frac{v^2}{2}) - \vec{v} \times (\nabla \times \vec{v})$$</div>
                                </div>
                            </div>
                            
                            <div class="error-example">
                                <div class="error-title">‚ùå Â∏∏ËßÅÈîôËØØ3ÔºöÂçï‰Ωç‰∏ç‰∏ÄËá¥</div>
                                <div class="error-description">
                                    <p>Âú®Êé®ÂØºËøáÁ®ã‰∏≠ÂÆπÊòìÂøΩÁï•Âçï‰Ωç‰∏ÄËá¥ÊÄßÔºö</p>
                                    <div class="formula">$$[p] = \text{Pa}, \quad [\rho] = \text{kg/m}^3, \quad [g] = \text{m/s}^2$$</div>
                                    <p>Á°Æ‰øùÊâÄÊúâÈ°πÁöÑÂçï‰Ωç‰∏ÄËá¥ÊòØÊé®ÂØºÊ≠£Á°ÆÊÄßÁöÑÈáçË¶Å‰øùËØÅ„ÄÇ</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- AIÁä∂ÊÄÅÊåáÁ§∫Âô® -->
        <div :class="['ai-status', { thinking: isTyping }]">
            <i class="fas fa-circle" :style="{ color: isTyping ? '#feca57' : '#43e97b' }"></i>
            {{ isTyping ? 'AIÊÄùËÄÉ‰∏≠...' : 'AIÂú®Á∫ø' }}
        </div>
    </div>

    <!-- Vue.js Â∫îÁî®ËÑöÊú¨ -->
    <script>
        // ÈÖçÁΩÆVue‰ª•ÂáèÂ∞ëÂºÄÂèëÊ®°ÂºèË≠¶Âëä
        const originalWarn = console.warn;
        console.warn = function(message, ...args) {
            // ËøáÊª§ÊéâVueÊ®°ÊùøÁºñËØëË≠¶Âëä
            if (typeof message === 'string' && message.includes('Tags with side effect')) {
                return; // ÂøΩÁï•Ëøô‰∏™ÁâπÂÆöË≠¶Âëä
            }
            if (typeof message === 'string' && message.includes('Template compilation error')) {
                return; // ÂøΩÁï•Ê®°ÊùøÁºñËØëÈîôËØØ
            }
            originalWarn.apply(console, [message, ...args]);
        };

        const { createApp } = Vue;

        const app = createApp({
            data() {
                return {
                    loading: false, // Áõ¥Êé•ËÆæÁΩÆ‰∏∫falseÔºå‰∏çÊòæÁ§∫Âä†ËΩΩÁïåÈù¢
                    isFullscreen: false,
                    isTyping: false,
                    currentMessage: '',
                    messages: [
                        {
                            id: 1,
                            sender: 'ai',
                            content: 'üëã ÊÇ®Â•ΩÔºÅÊàëÊòØAIÂ≠¶‰π†Âä©ÊâãÔºå‰∏ìÈó®Â∏ÆÂä©ÊÇ®Â≠¶‰π†ÊµÅ‰ΩìÂäõÂ≠¶„ÄÇËØ∑ÈöèÊó∂ÂêëÊàëÊèêÈóÆÔºÅ',
                            timestamp: new Date()
                        }
                    ],
                    suggestions: [
                        // Âü∫Á°ÄÊ¶ÇÂøµ
                        '‰ªÄ‰πàÊòØÊµÅ‰ΩìÔºüÊµÅ‰ΩìÊúâÂì™‰∫õÂü∫Êú¨ÁâπÊÄßÔºü',
                        'ÊµÅ‰ΩìÁöÑ‰∏ªË¶ÅÁâ©ÁêÜÊÄßË¥®ÊúâÂì™‰∫õÔºü',
                        'ÊµÅ‰ΩìÈùôÂäõÂ≠¶Âü∫Êú¨ÂéüÁêÜ',
                        'Â¶Ç‰ΩïÊµãÈáèÊµÅ‰ΩìÂéãÂäõÔºü',

                        // ËøêÂä®Â≠¶‰∏éÂä®ÂäõÂ≠¶
                        'ÊµÅ‰ΩìËøêÂä®Â≠¶Âü∫Êú¨Ê¶ÇÂøµ',
                        '‰ªÄ‰πàÊòØ‰ºØÂä™Âà©ÊñπÁ®ãÔºü',
                        'Âä®ÈáèÊñπÁ®ãÁöÑÂ∫îÁî®',
                        'ËøûÁª≠ÊÄßÊñπÁ®ãÁöÑÊé®ÂØºËøáÁ®ã',

                        // Á≤òÊÄßÊµÅÂä®
                        '‰ªÄ‰πàÊòØÁ≤òÊÄßÔºüÁâõÈ°øÁ≤òÊÄßÂÆöÂæã',
                        'Â±ÇÊµÅÂíåÊπçÊµÅÁöÑÂå∫Âà´ÊòØ‰ªÄ‰πàÔºü',
                        'Â¶Ç‰ΩïËÆ°ÁÆóÈõ∑ËØ∫Êï∞Ôºü',
                        'Êé®ÂØºNavier-StokesÊñπÁ®ã',

                        // ËæπÁïåÂ±ÇÁêÜËÆ∫
                        'ËæπÁïåÂ±ÇÁêÜËÆ∫ÁöÑÂü∫Êú¨Ê¶ÇÂøµ',
                        'ËæπÁïåÂ±ÇÂàÜÁ¶ªÁé∞Ë±°',
                        'BlasiusËß£ÁöÑÁâ©ÁêÜÊÑè‰πâ',

                        // ÁÆ°ÈÅìÊµÅÂä®
                        'ÁÆ°ÈÅìÊµÅÂä®ÁöÑÁâπÁÇπ',
                        'Â¶Ç‰ΩïËÆ°ÁÆóÁÆ°ÈÅìÂéãÂäõÊçüÂ§±Ôºü',
                        'ÁÆ°ÁΩëÁ≥ªÁªüÁöÑËÆ°ÁÆóÊñπÊ≥ï',

                        // ÁªïÊµÅ
                        'ÂúÜÊü±ÁªïÊµÅÁé∞Ë±°ÂàÜÊûê',
                        'ÂàÜÊûêÊú∫ÁøºÂçáÂäõ‰∫ßÁîüÊú∫ÁêÜ',
                        '‰ªÄ‰πàÊòØÈòªÂäõÁ≥ªÊï∞Ôºü',

                        // È´òÁ∫ßÁêÜËÆ∫
                        'ÂèØÂéãÁº©ÊµÅÂä®Âü∫Á°Ä',
                        'Ëß£ÈáäÊ∂°ÈáèËæìËøêÊñπÁ®ã',
                        'Áõ∏‰ººÁêÜËÆ∫‰∏éÈáèÁ∫≤ÂàÜÊûê',

                        // Â∑•Á®ãÂ∫îÁî®
                        'ËÆæËÆ°Êñá‰∏òÈáåÊµÅÈáèËÆ°',
                        'Ê≥µÁöÑÊÄßËÉΩÊõ≤Á∫øÂàÜÊûê',
                        'ÊµÅ‰ΩìÊµãÈáèÊäÄÊúØ',
                        'Ê±ΩËöÄÁé∞Ë±°ÂèäÂÖ∂Èò≤Ê≠¢'
                    ],
                    advancedFeatures: {
                        voiceInput: false,
                        mathMode: false,
                        expertMode: false,
                        multiLanguage: false,
                        darkMode: false,
                        autoSave: true,
                        realTimeLatex: true,
                        codeExecution: false,
                        imageAnalysis: false,
                        documentUpload: false
                    },
                    chatHistory: [],
                    bookmarks: [],
                    currentTopic: null,
                    learningPath: [],
                    userPreferences: {
                        responseLength: 'detailed', // brief, normal, detailed
                        explanationLevel: 'intermediate', // beginner, intermediate, advanced
                        includeExamples: true,
                        includeFormulas: true,
                        includeApplications: true,
                        preferredLanguage: 'zh-CN'
                    },
                    aiPersonality: 'professional', // friendly, professional, academic, casual
                    contextMemory: new Map(),
                    sessionStats: {
                        questionsAsked: 0,
                        topicsDiscussed: new Set(),
                        timeSpent: 0,
                        startTime: new Date()
                    },
                    notification: {
                        show: false,
                        message: '',
                        type: 'info'
                    },
                    networkStatus: null,
                    loadingTimeout: null,
                    // È´òÁ∫ßÂäüËÉΩÁä∂ÊÄÅ
                    advancedFeatures: {
                        voiceInput: false,
                        mathMode: true,
                        expertMode: false,
                        autoSave: true,
                        realTimeLatex: true,
                        contextMemory: true,
                        smartSuggestions: true,
                        multiModal: false
                    },
                    // ÂØπËØùÂéÜÂè≤ÁÆ°ÁêÜ
                    chatSessions: [],
                    currentSessionId: null,
                    maxHistoryLength: 50,
                    // Â≠¶‰π†Ë∑ØÂæÑË∑üË∏™
                    learningPath: [],
                    currentTopic: null,
                    topicProgress: new Map(),
                    // Áî®Êà∑ÂÅèÂ•ΩËÆæÁΩÆ
                    userPreferences: {
                        responseLength: 'detailed', // brief, normal, detailed
                        explanationLevel: 'intermediate', // beginner, intermediate, advanced
                        includeExamples: true,
                        includeFormulas: true,
                        includeApplications: true,
                        preferredLanguage: 'zh-CN',
                        theme: 'auto', // light, dark, auto
                        fontSize: 'medium' // small, medium, large
                    },
                    // AI‰∏™ÊÄßÂåñËÆæÁΩÆ
                    aiPersonality: 'professional', // friendly, professional, academic, casual
                    contextMemory: new Map(),
                    // ‰ºöËØùÁªüËÆ°
                    sessionStats: {
                        questionsAsked: 0,
                        topicsDiscussed: new Set(),
                        timeSpent: 0,
                        startTime: new Date(),
                        lastActivity: new Date()
                    },
                    // ‰π¶Á≠æÂíåÊî∂Ëóè
                    bookmarks: [],
                    favoriteTopics: [],
                    // ÂÆûÊó∂ÂäüËÉΩÁä∂ÊÄÅ
                    isRecording: false,
                    speechRecognition: null,
                    mathInputMode: false,
                    showAdvancedPanel: false,
                    // Êï∞Â≠¶Á¨¶Âè∑ÂíåÊ®°Êùø
                    mathSymbols: [
                        { name: 'ÂàÜÊï∞', latex: '\\frac{}{}', display: '¬Ω' },
                        { name: 'Âπ≥ÊñπÊ†π', latex: '\\sqrt{}', display: '‚àö' },
                        { name: 'ÁßØÂàÜ', latex: '\\int_{}^{}', display: '‚à´' },
                        { name: 'Ê±ÇÂíå', latex: '\\sum_{}^{}', display: '‚àë' },
                        { name: 'ÊûÅÈôê', latex: '\\lim_{}', display: 'lim' },
                        { name: 'ÂÅèÂØºÊï∞', latex: '\\frac{\\partial}{\\partial}', display: '‚àÇ' },
                        { name: 'Ê¢ØÂ∫¶', latex: '\\nabla', display: '‚àá' },
                        { name: 'Êó†Á©∑Â§ß', latex: '\\infty', display: '‚àû' },
                        { name: 'Á∫¶Á≠â‰∫é', latex: '\\approx', display: '‚âà' },
                        { name: '‰∏çÁ≠â‰∫é', latex: '\\neq', display: '‚â†' },
                        { name: 'Â∞è‰∫éÁ≠â‰∫é', latex: '\\leq', display: '‚â§' },
                        { name: 'Â§ß‰∫éÁ≠â‰∫é', latex: '\\geq', display: '‚â•' },
                        { name: 'Alpha', latex: '\\alpha', display: 'Œ±' },
                        { name: 'Beta', latex: '\\beta', display: 'Œ≤' },
                        { name: 'Gamma', latex: '\\gamma', display: 'Œ≥' },
                        { name: 'Delta', latex: '\\delta', display: 'Œ¥' },
                        { name: 'Epsilon', latex: '\\epsilon', display: 'Œµ' },
                        { name: 'Theta', latex: '\\theta', display: 'Œ∏' },
                        { name: 'Lambda', latex: '\\lambda', display: 'Œª' },
                        { name: 'Mu', latex: '\\mu', display: 'Œº' },
                        { name: 'Pi', latex: '\\pi', display: 'œÄ' },
                        { name: 'Rho', latex: '\\rho', display: 'œÅ' },
                        { name: 'Sigma', latex: '\\sigma', display: 'œÉ' },
                        { name: 'Tau', latex: '\\tau', display: 'œÑ' },
                        { name: 'Phi', latex: '\\phi', display: 'œÜ' },
                        { name: 'Omega', latex: '\\omega', display: 'œâ' }
                    ],
                    mathTemplates: [
                        { name: '‰ºØÂä™Âà©ÊñπÁ®ã', latex: '\\frac{v^2}{2} + \\frac{p}{\\rho} + gz = \\text{Â∏∏Êï∞}' },
                        { name: 'ËøûÁª≠ÊÄßÊñπÁ®ã', latex: '\\frac{\\partial \\rho}{\\partial t} + \\nabla \\cdot (\\rho \\vec{v}) = 0' },
                        { name: 'NSÊñπÁ®ã', latex: '\\rho \\frac{D\\vec{v}}{Dt} = -\\nabla p + \\rho \\vec{g} + \\mu \\nabla^2 \\vec{v}' },
                        { name: 'Èõ∑ËØ∫Êï∞', latex: 'Re = \\frac{\\rho V L}{\\mu}' },
                        { name: 'Ê¨ßÊãâÊñπÁ®ã', latex: '\\frac{\\partial \\vec{v}}{\\partial t} + (\\vec{v} \\cdot \\nabla)\\vec{v} = -\\frac{1}{\\rho}\\nabla p + \\vec{g}' },
                        { name: 'Ê∂°ÈáèÊñπÁ®ã', latex: '\\frac{D\\vec{\\omega}}{Dt} = (\\vec{\\omega} \\cdot \\nabla)\\vec{v} + \\nu\\nabla^2\\vec{\\omega}' }
                    ]
                };
            },

            created() {
                console.log('üéØ VueÂ∫îÁî®ÂàõÂª∫ÂÆåÊàê');
                // ÁÆÄÂåñÂàõÂª∫ÈÄªËæëÔºå‰∏çËÆæÁΩÆÂ§çÊùÇÁöÑË∂ÖÊó∂
            },

            methods: {
                async sendMessage() {
                    if (!this.currentMessage.trim() || this.isTyping) return;

                    const userMessage = {
                        id: Date.now(),
                        sender: 'user',
                        content: this.currentMessage,
                        timestamp: new Date()
                    };

                    this.messages.push(userMessage);

                    // Êõ¥Êñ∞ÁªüËÆ°
                    this.sessionStats.questionsAsked++;
                    this.sessionStats.lastActivity = new Date();

                    // ÂàÜÊûêËØùÈ¢òÂíåÊõ¥Êñ∞Â≠¶‰π†ËøõÂ∫¶
                    this.analyzeUserQuestion(this.currentMessage);
                    this.updateLearningProgress(this.currentMessage);
                    const messageText = this.currentMessage;
                    this.currentMessage = '';
                    this.scrollToBottom();

                    // AIÊÄùËÄÉ‰∏≠
                    this.isTyping = true;
                    
                    setTimeout(async () => {
                        try {
                            const aiResponse = await this.generateAIResponse(messageText);
                            this.messages.push({
                                id: Date.now() + 1,
                                sender: 'ai',
                                content: aiResponse,
                                timestamp: new Date()
                            });

                            // Â§ÑÁêÜAIÂõûÂ§ç‰∏≠ÁöÑÊï∞Â≠¶ÂÖ¨Âºè
                            this.$nextTick(() => {
                                this.processMathFormulas();
                            });
                        } catch (error) {
                            console.error('AIÂõûÂ§çÂ§±Ë¥•:', error);
                            this.messages.push({
                                id: Date.now() + 1,
                                sender: 'ai',
                                content: 'Êä±Ê≠âÔºåAIÊúçÂä°ÊöÇÊó∂‰∏çÂèØÁî®„ÄÇËØ∑Á®çÂêéÈáçËØï„ÄÇü§ñ',
                                timestamp: new Date()
                            });

                            // Âç≥‰ΩøÊòØÈîôËØØÊ∂àÊÅØ‰πüË¶ÅÂ§ÑÁêÜÂèØËÉΩÁöÑÂÖ¨Âºè
                            this.$nextTick(() => {
                                this.processMathFormulas();
                            });
                        } finally {
                            this.isTyping = false;
                            this.scrollToBottom();

                            // Â§ÑÁêÜÊñ∞Ê∑ªÂä†ÁöÑÊï∞Â≠¶ÂÖ¨Âºè
                            this.$nextTick(() => {
                                this.processMathFormulas();
                            });
                        }
                    }, 1500 + Math.random() * 2000);
                },

                async generateAIResponse(question) {
                    console.log('ü§ñ Âä®ÊÄÅAIÂä©ÊâãÁîüÊàêÂõûÂ§ç:', question);
                    
                    // È¶ñÂÖàÂ∞ùËØïÊú¨Âú∞Áü•ËØÜÂ∫ì
                    const localResponse = this.getLocalResponse(question);
                    
                    // Â¶ÇÊûúÊú¨Âú∞Áü•ËØÜÂ∫ìÊúâÂáÜÁ°ÆÁ≠îÊ°àÔºåÁõ¥Êé•ËøîÂõû
                    if (localResponse && !localResponse.includes('üí° <strong>ÊèêÁ§∫Ôºö</strong>')) {
                        console.log('üìö ‰ΩøÁî®Êú¨Âú∞Áü•ËØÜÂ∫ìÂõûÂ§ç');
                        return localResponse;
                    }
                    
                    // Â¶ÇÊûúÊú¨Âú∞Áü•ËØÜÂ∫ìÊ≤°ÊúâÂáÜÁ°ÆÁ≠îÊ°àÔºå‰∏îAIÁ≥ªÁªüÂèØÁî®ÔºåÊâçË∞ÉÁî®AI
                    try {
                        // Ê£ÄÊü•Êô∫ËÉΩÊ®°ÂûãÈÄâÊã©Âô®ÊòØÂê¶ÂèØÁî®
                        if (window.SmartModelSelector && window.AppConfig) {
                            console.log('üß† Êú¨Âú∞Áü•ËØÜÂ∫ìÊó†ÂáÜÁ°ÆÁ≠îÊ°àÔºåË∞ÉÁî®Êô∫ËÉΩAIÁ≥ªÁªü');
                            
                            // ‰ΩøÁî®ÈÖçÁΩÆÊñá‰ª∂Âø´ÈÄüÂàùÂßãÂåñ
                            if (!window.smartModelSelectorInstance) {
                                console.log('üîß Âø´ÈÄüÂàùÂßãÂåñÊô∫ËÉΩÊ®°ÂûãÈÄâÊã©Âô®...');
                                const smartConfig = window.AppConfig.api.smartAI;
                                
                                window.smartModelSelectorInstance = await window.SmartModelSelector.init({
                                    apiKey: smartConfig.apiKey,
                                    apiUrl: smartConfig.endpoint,
                                    defaultStrategy: smartConfig.defaultStrategy,
                                    maxRetries: smartConfig.maxRetries,
                                    requestTimeout: smartConfig.requestTimeout,
                                    skipAvailabilityCheck: smartConfig.skipAvailabilityCheck
                                });
                            }
                            
                            // Êô∫ËÉΩÊ®°ÂûãÈÄâÊã©
                            const modelConfig = this.selectOptimalModel(question);

                            // Ë∞ÉÁî®Êô∫ËÉΩAI
                            const result = await window.smartModelSelectorInstance.callAI(question, {
                                strategy: modelConfig.strategy,
                                features: modelConfig.features,
                                maxTokens: modelConfig.maxTokens,
                                temperature: modelConfig.temperature,
                                preferredModel: modelConfig.preferredModel,
                                systemPrompt: modelConfig.systemPrompt
                            });
                            
                            console.log('‚úÖ AIÂõûÂ§çÊàêÂäü:', result.model);
                            return result.content + '<br><br><small style="color: #888;">ü§ñ Áî±Êô∫ËÉΩAIÊèê‰æõ</small>';
                            
                        } else {
                            console.warn('‚ö†Ô∏è Êô∫ËÉΩÊ®°ÂûãÈÄâÊã©Âô®‰∏çÂèØÁî®ÔºåËøîÂõûÊú¨Âú∞Áü•ËØÜÂ∫ìÂõûÂ§ç');
                            return localResponse || this.getFallbackResponse(question);
                        }
                        
                    } catch (error) {
                        console.error('‚ùå AIË∞ÉÁî®Â§±Ë¥•:', error);
                        return localResponse || this.getFallbackResponse(question);
                    }
                },
                
                getLocalResponse(question) {
                    console.log('üìö ÊêúÁ¥¢Êú¨Âú∞Áü•ËØÜÂ∫ì:', question);

                    const knowledgeBase = {
                        // Á¨¨‰∏ÄÁ´†ÔºöÊµÅ‰ΩìÂäõÂ≠¶Âü∫Á°Ä
                        'ÊµÅ‰ΩìÂÆö‰πâ': {
                            keywords: ['ÊµÅ‰Ωì', 'ÊµÅ‰ΩìÂÆö‰πâ', '‰ªÄ‰πàÊòØÊµÅ‰Ωì', 'fluid'],
                            content: `üåä <strong>ÊµÅ‰ΩìÁöÑÂÆö‰πâ‰∏éÁâπÊÄß</strong><br><br>
                            <strong>ÂÆö‰πâÔºö</strong>ÊµÅ‰ΩìÊòØÂú®‰ªª‰ΩïÂæÆÂ∞èÂâ™ÂàáÂäõ‰ΩúÁî®‰∏ãÈÉΩËÉΩËøûÁª≠ÂèòÂΩ¢ÁöÑÁâ©Ë¥®<br><br>
                            <strong>Âü∫Êú¨ÁâπÊÄßÔºö</strong><br>
                            ‚Ä¢ <strong>ÊµÅÂä®ÊÄßÔºö</strong>Âú®Ââ™ÂàáÂäõ‰ΩúÁî®‰∏ãËøûÁª≠ÂèòÂΩ¢<br>
                            ‚Ä¢ <strong>Á≤òÊÄßÔºö</strong>ÊµÅ‰ΩìÂÜÖÈÉ®Â≠òÂú®ÂÜÖÊë©Êì¶<br>
                            ‚Ä¢ <strong>ÂéãÁº©ÊÄßÔºö</strong>ÂØÜÂ∫¶ÈöèÂéãÂäõÂèòÂåñ<br>
                            ‚Ä¢ <strong>Ë°®Èù¢Âº†ÂäõÔºö</strong>Ê∂≤‰ΩìË°®Èù¢ÁöÑÊî∂Áº©Ë∂ãÂäø<br><br>
                            <strong>ÂàÜÁ±ªÔºö</strong><br>
                            ‚Ä¢ Ê∂≤‰ΩìÔºöÂá†‰πé‰∏çÂèØÂéãÁº©ÔºåÊúâËá™Áî±Ë°®Èù¢<br>
                            ‚Ä¢ Ê∞î‰ΩìÔºöÂèØÂéãÁº©ÊÄßÂº∫ÔºåÂÖÖÊª°ÂÆπÂô®<br><br>
                            <small style="color: #888;">üìö Á¨¨‰∏ÄÁ´†ÔºöÊµÅ‰ΩìÂäõÂ≠¶Âü∫Á°Ä</small>`
                        },

                        'ÊµÅ‰ΩìÊÄßË¥®': {
                            keywords: ['ÂØÜÂ∫¶', 'Á≤òÊÄß', 'ÂéãÁº©ÊÄß', 'Ë°®Èù¢Âº†Âäõ', 'ÊµÅ‰ΩìÊÄßË¥®'],
                            content: `üìä <strong>ÊµÅ‰ΩìÁöÑ‰∏ªË¶ÅÁâ©ÁêÜÊÄßË¥®</strong><br><br>
                            <strong>1. ÂØÜÂ∫¶ (œÅ)Ôºö</strong><br>
                            ‚Ä¢ ÂÆö‰πâÔºöÂçï‰Ωç‰ΩìÁßØÁöÑË¥®Èáè œÅ = m/V<br>
                            ‚Ä¢ Âçï‰ΩçÔºökg/m¬≥<br>
                            ‚Ä¢ Ê∞¥ÁöÑÂØÜÂ∫¶Ôºö1000 kg/m¬≥ (4‚ÑÉ)<br><br>

                            <strong>2. Âä®ÂäõÁ≤òÂ∫¶ (Œº)Ôºö</strong><br>
                            ‚Ä¢ ÁâõÈ°øÁ≤òÊÄßÂÆöÂæãÔºöœÑ = Œº(du/dy)<br>
                            ‚Ä¢ Âçï‰ΩçÔºöPa¬∑s Êàñ N¬∑s/m¬≤<br>
                            ‚Ä¢ ËøêÂä®Á≤òÂ∫¶ÔºöŒΩ = Œº/œÅ (m¬≤/s)<br><br>

                            <strong>3. ÂéãÁº©ÊÄßÔºö</strong><br>
                            ‚Ä¢ ‰ΩìÁßØÂºπÊÄßÊ®°ÈáèÔºöK = -V(dp/dV)<br>
                            ‚Ä¢ ÂéãÁº©Á≥ªÊï∞ÔºöŒ≤ = 1/K<br><br>

                            <strong>4. Ë°®Èù¢Âº†Âäõ (œÉ)Ôºö</strong><br>
                            ‚Ä¢ Âçï‰ΩçÔºöN/m<br>
                            ‚Ä¢ ÊØõÁªÜÁé∞Ë±°Ôºöh = 2œÉcosŒ∏/(œÅgr)<br><br>
                            <small style="color: #888;">üìö Á¨¨‰∏ÄÁ´†ÔºöÊµÅ‰ΩìÂäõÂ≠¶Âü∫Á°Ä</small>`
                        },

                        // Á¨¨‰∫åÁ´†ÔºöÊµÅ‰ΩìÈùôÂäõÂ≠¶
                        'ÊµÅ‰ΩìÈùôÂäõÂ≠¶': {
                            keywords: ['ÈùôÂäõÂ≠¶', 'ÈùôÂéãÂäõ', 'ÂéãÂäõÂàÜÂ∏É', 'Â∏ïÊñØÂç°ÂÆöÂæã'],
                            content: `‚öñÔ∏è <strong>ÊµÅ‰ΩìÈùôÂäõÂ≠¶Âü∫Êú¨ÂéüÁêÜ</strong><br><br>
                            <strong>ÈùôÂéãÂäõÁâπÊÄßÔºö</strong><br>
                            ‚Ä¢ ÂûÇÁõ¥‰ΩúÁî®‰∫é‰ΩúÁî®Èù¢<br>
                            ‚Ä¢ Â§ßÂ∞è‰∏éÊñπÂêëÊó†ÂÖ≥<br>
                            ‚Ä¢ ÂêÑÂêëÁõ∏Á≠â<br><br>

                            <strong>ÊµÅ‰ΩìÈùôÂäõÂ≠¶Âü∫Êú¨ÊñπÁ®ãÔºö</strong><br>
                            <div class="math-formula">$$\\frac{dp}{dz} = -\\rho g$$</div><br>

                            <strong>ÈáçÂäõÂú∫‰∏≠ÁöÑÂéãÂäõÂàÜÂ∏ÉÔºö</strong><br>
                            ‚Ä¢ ‰∏çÂèØÂéãÁº©ÊµÅ‰ΩìÔºöp = p‚ÇÄ + œÅgh<br>
                            ‚Ä¢ ÂèØÂéãÁº©ÊµÅ‰ΩìÔºöÈúÄËÄÉËôëÂØÜÂ∫¶ÂèòÂåñ<br><br>

                            <strong>Â∏ïÊñØÂç°ÂÆöÂæãÔºö</strong><br>
                            ÂØÜÈó≠ÂÆπÂô®‰∏≠ÔºåÂéãÂäõÂèòÂåñ‰º†ÈÄíÂà∞ÂêÑÁÇπ<br>
                            Â∫îÁî®ÔºöÊ∂≤ÂéãÊú∫„ÄÅÊ∂≤Âéã‰º†Âä®<br><br>
                            <small style="color: #888;">üìö Á¨¨‰∫åÁ´†ÔºöÊµÅ‰ΩìÈùôÂäõÂ≠¶</small>`
                        },

                        'ÂéãÂäõÊµãÈáè': {
                            keywords: ['ÂéãÂäõËÆ°', 'ÊµãÂéãÁÆ°', 'ÂéãÂäõÊµãÈáè', 'manometer'],
                            content: `üìè <strong>ÂéãÂäõÊµãÈáèÊñπÊ≥ï</strong><br><br>
                            <strong>1. UÂûãÁÆ°ÂéãÂäõËÆ°Ôºö</strong><br>
                            ‚Ä¢ ÂéüÁêÜÔºöp = œÅgh<br>
                            ‚Ä¢ ÈÄÇÁî®ÔºöÂ∞èÂéãÂäõÊµãÈáè<br><br>

                            <strong>2. ÂÄæÊñúÁÆ°ÂéãÂäõËÆ°Ôºö</strong><br>
                            ‚Ä¢ ÊèêÈ´òËØªÊï∞Á≤æÂ∫¶<br>
                            ‚Ä¢ h = L¬∑sinŒ∏<br><br>

                            <strong>3. ÂæÆÂéãËÆ°Ôºö</strong><br>
                            ‚Ä¢ ÊµãÈáèÂæÆÂ∞èÂéãÂäõÂ∑Æ<br>
                            ‚Ä¢ È´òÁ≤æÂ∫¶Ë¶ÅÊ±Ç<br><br>

                            <strong>ÂéãÂäõË°®Á§∫ÊñπÊ≥ïÔºö</strong><br>
                            ‚Ä¢ ÁªùÂØπÂéãÂäõÔºöp_abs = p_atm + p_gauge<br>
                            ‚Ä¢ Ë°®ÂéãÂäõÔºöp_gauge = p_abs - p_atm<br>
                            ‚Ä¢ ÁúüÁ©∫Â∫¶Ôºöp_vac = p_atm - p_abs<br><br>
                            <small style="color: #888;">üìö Á¨¨‰∫åÁ´†ÔºöÊµÅ‰ΩìÈùôÂäõÂ≠¶</small>`
                        },

                        // Á¨¨‰∏âÁ´†ÔºöÊµÅ‰ΩìËøêÂä®Â≠¶
                        'ÊµÅ‰ΩìËøêÂä®Â≠¶': {
                            keywords: ['ËøêÂä®Â≠¶', 'ÊµÅÁ∫ø', 'ËøπÁ∫ø', 'ÊµÅÁÆ°', 'ÊµÅÈáè'],
                            content: `üåÄ <strong>ÊµÅ‰ΩìËøêÂä®Â≠¶Âü∫Êú¨Ê¶ÇÂøµ</strong><br><br>
                            <strong>ÊèèËø∞ÊñπÊ≥ïÔºö</strong><br>
                            ‚Ä¢ <strong>ÊãâÊ†ºÊúóÊó•Ê≥ïÔºö</strong>Ë∑üË∏™ÊµÅ‰ΩìË¥®ÁÇπ<br>
                            ‚Ä¢ <strong>Ê¨ßÊãâÊ≥ïÔºö</strong>ËßÇÂØüÁ©∫Èó¥Âõ∫ÂÆöÁÇπ<br><br>

                            <strong>Âü∫Êú¨Ê¶ÇÂøµÔºö</strong><br>
                            ‚Ä¢ <strong>ÊµÅÁ∫øÔºö</strong>ÊüêÁû¨Êó∂ÈÄüÂ∫¶Áü¢ÈáèÁöÑÂåÖÁªúÁ∫ø<br>
                            ‚Ä¢ <strong>ËøπÁ∫øÔºö</strong>ÊµÅ‰ΩìË¥®ÁÇπÁöÑËøêÂä®ËΩ®Ëøπ<br>
                            ‚Ä¢ <strong>ÊµÅÁÆ°Ôºö</strong>ÊµÅÁ∫øÊùüÂõ¥ÊàêÁöÑÁÆ°Áä∂Âå∫Âüü<br><br>

                            <strong>ÊµÅÈáè‰∏éÊµÅÈÄüÔºö</strong><br>
                            ‚Ä¢ ‰ΩìÁßØÊµÅÈáèÔºöQ = ‚à´v¬∑dA<br>
                            ‚Ä¢ Ë¥®ÈáèÊµÅÈáèÔºö·πÅ = ‚à´œÅv¬∑dA<br>
                            ‚Ä¢ Âπ≥ÂùáÊµÅÈÄüÔºövÃÑ = Q/A<br><br>

                            <strong>ËøûÁª≠ÊÄßÊñπÁ®ãÔºö</strong><br>
                            <div class="math-formula">$$\\frac{\\partial \\rho}{\\partial t} + \\nabla \\cdot (\\rho \\vec{v}) = 0$$</div><br>
                            <small style="color: #888;">üìö Á¨¨‰∏âÁ´†ÔºöÊµÅ‰ΩìËøêÂä®Â≠¶</small>`
                        },

                        // Á¨¨ÂõõÁ´†ÔºöÊµÅ‰ΩìÂä®ÂäõÂ≠¶
                        '‰ºØÂä™Âà©ÊñπÁ®ã': {
                            keywords: ['‰ºØÂä™Âà©', '‰ºØÂä™Âà©ÊñπÁ®ã', 'bernoulli', 'ËÉΩÈáèÂÆàÊÅí'],
                            content: `üåä <strong>‰ºØÂä™Âà©ÊñπÁ®ãËØ¶Ëß£</strong><br><br>
                            <strong>ÁêÜÊÉ≥ÊµÅ‰Ωì‰ºØÂä™Âà©ÊñπÁ®ãÔºö</strong><br>
                            <div class="math-formula">$$\\frac{v^2}{2} + \\frac{p}{\\rho} + gz = C$$</div><br>

                            <strong>Áâ©ÁêÜÊÑè‰πâÔºö</strong><br>
                            ‚Ä¢ Âä®ËÉΩÈ°πÔºöv¬≤/2 (Âçï‰ΩçË¥®ÈáèÂä®ËÉΩ)<br>
                            ‚Ä¢ ÂéãÂäõÈ°πÔºöp/œÅ (Âçï‰ΩçË¥®ÈáèÂéãÂäõËÉΩ)<br>
                            ‚Ä¢ ‰ΩçËÉΩÈ°πÔºögz (Âçï‰ΩçË¥®ÈáèÈáçÂäõÂäøËÉΩ)<br><br>

                            <strong>ÈÄÇÁî®Êù°‰ª∂Ôºö</strong><br>
                            ‚Ä¢ ÁêÜÊÉ≥ÊµÅ‰Ωì (Êó†Á≤òÊÄß)<br>
                            ‚Ä¢ ÂÆöÂ∏∏ÊµÅÂä®<br>
                            ‚Ä¢ ‰∏çÂèØÂéãÁº©<br>
                            ‚Ä¢ Ê≤øÊµÅÁ∫øÁßØÂàÜ<br><br>

                            <strong>ÂÆûÈôÖÊµÅ‰Ωì‰øÆÊ≠£Ôºö</strong><br>
                            $$\\frac{v_1^2}{2g} + \\frac{p_1}{\\rho g} + z_1 = \\frac{v_2^2}{2g} + \\frac{p_2}{\\rho g} + z_2 + h_f$$<br>
                            ÂÖ∂‰∏≠ h_f ‰∏∫Ê∞¥Â§¥ÊçüÂ§±<br><br>

                            <strong>Â∫îÁî®ÂÆû‰æãÔºö</strong><br>
                            ‚Ä¢ Êñá‰∏òÈáåÊµÅÈáèËÆ°<br>
                            ‚Ä¢ ÁöÆÊâòÁÆ°ÊµãÈÄü<br>
                            ‚Ä¢ ËôπÂê∏Áé∞Ë±°<br><br>
                            <small style="color: #888;">üìö Á¨¨ÂõõÁ´†ÔºöÊµÅ‰ΩìÂä®ÂäõÂ≠¶</small>`
                        },

                        'Âä®ÈáèÊñπÁ®ã': {
                            keywords: ['Âä®ÈáèÊñπÁ®ã', 'Âä®ÈáèÂÆöÁêÜ', 'momentum', 'ÂÜ≤Âáª'],
                            content: `‚ö° <strong>Âä®ÈáèÊñπÁ®ã‰∏éÂ∫îÁî®</strong><br><br>
                            <strong>Âä®ÈáèÂÆöÁêÜÔºö</strong><br>
                            $$\\sum \\vec{F} = \\frac{d}{dt}\\int_{CV} \\rho \\vec{v} dV + \\int_{CS} \\rho \\vec{v}(\\vec{v} \\cdot \\vec{n}) dA$$<br><br>

                            <strong>ÂÆöÂ∏∏ÊµÅÂä®ÁÆÄÂåñÔºö</strong><br>
                            $$\\sum \\vec{F} = \\sum \\dot{m}_{out}\\vec{v}_{out} - \\sum \\dot{m}_{in}\\vec{v}_{in}$$<br><br>

                            <strong>Â∫îÁî®Ôºö</strong><br>
                            ‚Ä¢ <strong>Â∞ÑÊµÅÂÜ≤ÂáªÔºö</strong><br>
                            &nbsp;&nbsp;F = œÅQv(1 - cosŒ∏) (Âπ≥Êùø)<br>
                            &nbsp;&nbsp;F = œÅQv (ÂûÇÁõ¥Âπ≥Êùø)<br><br>

                            ‚Ä¢ <strong>ÂºØÁÆ°ÂèóÂäõÔºö</strong><br>
                            &nbsp;&nbsp;ËÄÉËôëÂéãÂäõÂíåÂä®ÈáèÂèòÂåñ<br><br>

                            ‚Ä¢ <strong>Ëû∫ÊóãÊ°®Êé®ÂäõÔºö</strong><br>
                            &nbsp;&nbsp;T = ·πÅ(v‚ÇÇ - v‚ÇÅ)<br><br>
                            <small style="color: #888;">üìö Á¨¨ÂõõÁ´†ÔºöÊµÅ‰ΩìÂä®ÂäõÂ≠¶</small>`
                        },

                        // Á¨¨‰∫îÁ´†ÔºöÁ≤òÊÄßÊµÅ‰ΩìÂäõÂ≠¶
                        'Á≤òÊÄßÊµÅÂä®': {
                            keywords: ['Á≤òÊÄß', 'Á≤òÂ∫¶', 'ÁâõÈ°øÊµÅ‰Ωì', 'Ââ™ÂàáÂ∫îÂäõ'],
                            content: `üåÄ <strong>Á≤òÊÄßÊµÅ‰ΩìÂü∫Êú¨ÁêÜËÆ∫</strong><br><br>
                            <strong>ÁâõÈ°øÁ≤òÊÄßÂÆöÂæãÔºö</strong><br>
                            $$\\tau = \\mu \\frac{du}{dy}$$<br><br>

                            <strong>ÊµÅ‰ΩìÂàÜÁ±ªÔºö</strong><br>
                            ‚Ä¢ <strong>ÁâõÈ°øÊµÅ‰ΩìÔºö</strong>œÑ ‚àù du/dy (Ê∞¥„ÄÅÁ©∫Ê∞î)<br>
                            ‚Ä¢ <strong>ÈùûÁâõÈ°øÊµÅ‰ΩìÔºö</strong><br>
                            &nbsp;&nbsp;- ÂÅáÂ°ëÊÄßÔºöŒºÈöèÂâ™ÂàáÁéáÂáèÂ∞è<br>
                            &nbsp;&nbsp;- ËÉÄÂ°ëÊÄßÔºöŒºÈöèÂâ™ÂàáÁéáÂ¢ûÂ§ß<br>
                            &nbsp;&nbsp;- ÂÆæÊ±âÊµÅ‰ΩìÔºöÂ≠òÂú®Â±àÊúçÂ∫îÂäõ<br><br>

                            <strong>Navier-StokesÊñπÁ®ãÔºö</strong><br>
                            <div class="math-formula">$$\\rho \\frac{D\\vec{v}}{Dt} = -\\nabla p + \\rho \\vec{g} + \\mu \\nabla^2 \\vec{v}$$</div><br>

                            <strong>ÁÆÄÂåñÂΩ¢ÂºèÔºö</strong><br>
                            ‚Ä¢ ‰∏çÂèØÂéãÁº©Ôºö‚àá¬∑v = 0<br>
                            ‚Ä¢ ÂÆöÂ∏∏ÊµÅÂä®Ôºö‚àÇv/‚àÇt = 0<br><br>
                            <small style="color: #888;">üìö Á¨¨‰∫îÁ´†ÔºöÁ≤òÊÄßÊµÅ‰ΩìÂäõÂ≠¶</small>`
                        },

                        'Â±ÇÊµÅÊπçÊµÅ': {
                            keywords: ['Â±ÇÊµÅ', 'ÊπçÊµÅ', 'laminar', 'turbulent', 'Èõ∑ËØ∫Êï∞'],
                            content: `üåä <strong>Â±ÇÊµÅ‰∏éÊπçÊµÅËØ¶Ëß£</strong><br><br>
                            <strong>Èõ∑ËØ∫Êï∞Ôºö</strong><br>
                            $$Re = \\frac{\\rho V L}{\\mu} = \\frac{V L}{\\nu}$$<br><br>

                            <strong>‰∏¥ÁïåÈõ∑ËØ∫Êï∞Ôºö</strong><br>
                            ‚Ä¢ ÂúÜÁÆ°ÔºöRe_c = 2300<br>
                            ‚Ä¢ Âπ≥ÊùøÔºöRe_c = 5√ó10‚Åµ<br>
                            ‚Ä¢ ÂúÜÁêÉÔºöRe_c = 2√ó10‚Åµ<br><br>

                            <strong>Â±ÇÊµÅÁâπÂæÅÔºö</strong><br>
                            ‚Ä¢ ÊµÅ‰ΩìÂàÜÂ±ÇÊµÅÂä®<br>
                            ‚Ä¢ ÊµÅÁ∫øÂπ≥Ë°å‰∏î‰∏çÁõ∏‰∫§<br>
                            ‚Ä¢ Á≤òÊÄßÂäõÂç†‰∏ªÂØº<br>
                            ‚Ä¢ ËÉΩÈáèÊçüÂ§±Â∞è<br><br>

                            <strong>ÊπçÊµÅÁâπÂæÅÔºö</strong><br>
                            ‚Ä¢ ÊµÅ‰ΩìË¥®ÁÇπÊó†ËßÑÂàôËøêÂä®<br>
                            ‚Ä¢ Âº∫ÁÉàÊ∑∑Âêà<br>
                            ‚Ä¢ ÊÉØÊÄßÂäõÂç†‰∏ªÂØº<br>
                            ‚Ä¢ ËÉΩÈáèÊçüÂ§±Â§ß<br><br>

                            <strong>ÊπçÊµÅÁªüËÆ°ÁêÜËÆ∫Ôºö</strong><br>
                            ‚Ä¢ Êó∂ÂùáÂåñÔºö≈´ = (1/T)‚à´u dt<br>
                            ‚Ä¢ ËÑâÂä®Ôºöu' = u - ≈´<br>
                            ‚Ä¢ Èõ∑ËØ∫Â∫îÂäõÔºöœÑ = -œÅu'v'<br><br>
                            <small style="color: #888;">üìö Á¨¨‰∫îÁ´†ÔºöÁ≤òÊÄßÊµÅ‰ΩìÂäõÂ≠¶</small>`
                        },

                        // Á¨¨ÂÖ≠Á´†ÔºöËæπÁïåÂ±ÇÁêÜËÆ∫
                        'ËæπÁïåÂ±Ç': {
                            keywords: ['ËæπÁïåÂ±Ç', 'boundary layer', 'Â£ÅÈù¢', 'ÂàÜÁ¶ª'],
                            content: `üéØ <strong>ËæπÁïåÂ±ÇÁêÜËÆ∫ËØ¶Ëß£</strong><br><br>
                            <strong>ËæπÁïåÂ±ÇÊ¶ÇÂøµÔºö</strong><br>
                            ‚Ä¢ ÂÆö‰πâÔºöÁ¥ßË¥¥Â£ÅÈù¢ÁöÑËñÑÂ±ÇÂå∫Âüü<br>
                            ‚Ä¢ ÂéöÂ∫¶Œ¥Ôºöu = 0.99u‚àûÂ§Ñ<br>
                            ‚Ä¢ Êó†ÈáèÁ∫≤ÂéöÂ∫¶ÔºöŒ¥/x = 5/‚àöRe_x<br><br>

                            <strong>ËæπÁïåÂ±ÇÊñπÁ®ãÔºö</strong><br>
                            $$u\\frac{\\partial u}{\\partial x} + v\\frac{\\partial u}{\\partial y} = -\\frac{1}{\\rho}\\frac{dp}{dx} + \\nu\\frac{\\partial^2 u}{\\partial y^2}$$<br><br>

                            <strong>BlasiusËß£ (Âπ≥ÊùøÂ±ÇÊµÅ)Ôºö</strong><br>
                            ‚Ä¢ ËæπÁïåÂ±ÇÂéöÂ∫¶ÔºöŒ¥ = 5x/‚àöRe_x<br>
                            ‚Ä¢ Â£ÅÈù¢Êë©Êì¶Á≥ªÊï∞ÔºöC_f = 0.664/‚àöRe_x<br>
                            ‚Ä¢ ÈòªÂäõÁ≥ªÊï∞ÔºöC_D = 1.328/‚àöRe_L<br><br>

                            <strong>ËæπÁïåÂ±ÇÂàÜÁ¶ªÔºö</strong><br>
                            ‚Ä¢ Êù°‰ª∂Ôºö(‚àÇu/‚àÇy)_wall = 0<br>
                            ‚Ä¢ ÂéüÂõ†ÔºöÈÄÜÂéãÊ¢ØÂ∫¶ dp/dx > 0<br>
                            ‚Ä¢ ÂêéÊûúÔºöÂΩ¢ÊàêÂ∞æÊµÅÔºåÂ¢ûÂä†ÈòªÂäõ<br><br>

                            <strong>ÊéßÂà∂ÊñπÊ≥ïÔºö</strong><br>
                            ‚Ä¢ ÂêπÊ∞î/Âê∏Ê∞î<br>
                            ‚Ä¢ Ë°®Èù¢Á≤óÁ≥ôÂ∫¶ÊéßÂà∂<br>
                            ‚Ä¢ ÂΩ¢Áä∂‰ºòÂåñ<br><br>
                            <small style="color: #888;">üìö Á¨¨ÂÖ≠Á´†ÔºöËæπÁïåÂ±ÇÁêÜËÆ∫</small>`
                        },

                        // Á¨¨‰∏ÉÁ´†ÔºöÁÆ°ÈÅìÊµÅÂä®
                        'ÁÆ°ÈÅìÊµÅÂä®': {
                            keywords: ['ÁÆ°ÈÅì', 'ÁÆ°ÊµÅ', 'Êë©Êì¶', 'ÂéãÂäõÊçüÂ§±', 'pipe flow'],
                            content: `üîß <strong>ÁÆ°ÈÅìÊµÅÂä®ÂàÜÊûê</strong><br><br>
                            <strong>ÂúÜÁÆ°Â±ÇÊµÅ (Re < 2300)Ôºö</strong><br>
                            ‚Ä¢ ÈÄüÂ∫¶ÂàÜÂ∏ÉÔºöu = (1/4Œº)(dp/dx)(R¬≤ - r¬≤)<br>
                            ‚Ä¢ ÊúÄÂ§ßÈÄüÂ∫¶Ôºöu_max = (1/4Œº)(dp/dx)R¬≤<br>
                            ‚Ä¢ Âπ≥ÂùáÈÄüÂ∫¶Ôºö≈´ = u_max/2<br>
                            ‚Ä¢ Êë©Êì¶Á≥ªÊï∞Ôºöf = 64/Re<br><br>

                            <strong>ÂúÜÁÆ°ÊπçÊµÅ (Re > 4000)Ôºö</strong><br>
                            ‚Ä¢ ÂÖâÊªëÁÆ°Ôºöf = 0.316/Re^0.25 (Re < 10‚Åµ)<br>
                            ‚Ä¢ Á≤óÁ≥ôÁÆ°Ôºö1/‚àöf = 2log(3.7D/Œµ)<br>
                            ‚Ä¢ ColebrookÂÖ¨ÂºèÔºö<br>
                            &nbsp;&nbsp;1/‚àöf = -2log(Œµ/3.7D + 2.51/Re‚àöf)<br><br>

                            <strong>ÂéãÂäõÊçüÂ§±Ôºö</strong><br>
                            ‚Ä¢ Ê≤øÁ®ãÊçüÂ§±Ôºöh_f = f(L/D)(v¬≤/2g)<br>
                            ‚Ä¢ Â±ÄÈÉ®ÊçüÂ§±Ôºöh_l = Œ∂(v¬≤/2g)<br>
                            ‚Ä¢ ÊÄªÊçüÂ§±Ôºöh = h_f + Œ£h_l<br><br>

                            <strong>ÁÆ°ÁΩëËÆ°ÁÆóÔºö</strong><br>
                            ‚Ä¢ ‰∏≤ËÅîÔºöQÁõ∏ÂêåÔºåhÁ¥ØÂä†<br>
                            ‚Ä¢ Âπ∂ËÅîÔºöhÁõ∏ÂêåÔºåQÁ¥ØÂä†<br>
                            ‚Ä¢ ÂàÜÊîØÔºöËäÇÁÇπËøûÁª≠ÊÄß<br><br>
                            <small style="color: #888;">üìö Á¨¨‰∏ÉÁ´†ÔºöÁÆ°ÈÅìÊµÅÂä®</small>`
                        },

                        // Á¨¨ÂÖ´Á´†ÔºöÁªïÊµÅ
                        'ÁªïÊµÅ': {
                            keywords: ['ÁªïÊµÅ', 'ÈòªÂäõ', 'ÂçáÂäõ', 'ÂúÜÊü±ÁªïÊµÅ', 'ÁøºÂûã'],
                            content: `‚úàÔ∏è <strong>ÁªïÊµÅÁêÜËÆ∫‰∏éÂ∫îÁî®</strong><br><br>
                            <strong>ÂúÜÊü±ÁªïÊµÅÔºö</strong><br>
                            ‚Ä¢ ÁêÜÊÉ≥ÊµÅ‰ΩìÔºöd'AlembertÊÇñËÆ∫ (ÈòªÂäõ=0)<br>
                            ‚Ä¢ ÂÆûÈôÖÊµÅ‰ΩìÔºöËæπÁïåÂ±ÇÂàÜÁ¶ª‰∫ßÁîüÈòªÂäõ<br>
                            ‚Ä¢ ÈòªÂäõÁ≥ªÊï∞ÔºöC_D = F_D/(¬ΩœÅv¬≤A)<br><br>

                            <strong>Èõ∑ËØ∫Êï∞ÊïàÂ∫îÔºö</strong><br>
                            ‚Ä¢ Re < 1ÔºöStokesÊµÅÔºåC_D = 24/Re<br>
                            ‚Ä¢ 1 < Re < 10¬≥ÔºöËøáÊ∏°Âå∫<br>
                            ‚Ä¢ 10¬≥ < Re < 2√ó10‚ÅµÔºö‰∫ö‰∏¥ÁïåÂå∫<br>
                            ‚Ä¢ Re > 2√ó10‚ÅµÔºöË∂Ö‰∏¥ÁïåÂå∫<br><br>

                            <strong>ÁøºÂûãÁªïÊµÅÔºö</strong><br>
                            ‚Ä¢ ÂçáÂäõ‰∫ßÁîüÊú∫ÁêÜÔºö<br>
                            &nbsp;&nbsp;- ‰ºØÂä™Âà©ÊïàÂ∫î<br>
                            &nbsp;&nbsp;- ÁéØÈáèÁêÜËÆ∫<br>
                            &nbsp;&nbsp;- ÁâõÈ°øÁ¨¨‰∏âÂÆöÂæã<br><br>

                            <strong>Kutta-JoukowskiÂÆöÁêÜÔºö</strong><br>
                            $$L = \\rho v \\Gamma$$<br>
                            ÂÖ∂‰∏≠Œì‰∏∫ÁéØÈáè<br><br>

                            <strong>ÂçáÈòªÊØîÔºö</strong><br>
                            ‚Ä¢ L/D = C_L/C_D<br>
                            ‚Ä¢ ÁøºÂûãËÆæËÆ°ÁõÆÊ†áÔºöÊúÄÂ§ßÂçáÈòªÊØî<br><br>
                            <small style="color: #888;">üìö Á¨¨ÂÖ´Á´†ÔºöÁªïÊµÅ</small>`
                        },

                        // Á¨¨‰πùÁ´†ÔºöÂèØÂéãÁº©ÊµÅÂä®
                        'ÂèØÂéãÁº©ÊµÅ': {
                            keywords: ['ÂèØÂéãÁº©', 'Èü≥ÈÄü', 'È©¨Ëµ´Êï∞', 'ÊøÄÊ≥¢', 'Á≠âÁÜµÊµÅ'],
                            content: `üöÄ <strong>ÂèØÂéãÁº©ÊµÅÂä®Âü∫Á°Ä</strong><br><br>
                            <strong>Èü≥ÈÄü‰∏éÈ©¨Ëµ´Êï∞Ôºö</strong><br>
                            ‚Ä¢ Èü≥ÈÄüÔºöa = ‚àö(Œ≥RT) = ‚àö(Œ≥p/œÅ)<br>
                            ‚Ä¢ È©¨Ëµ´Êï∞ÔºöMa = v/a<br>
                            ‚Ä¢ ÂàÜÁ±ªÔºöMa < 1(‰∫öÈü≥ÈÄü), Ma > 1(Ë∂ÖÈü≥ÈÄü)<br><br>

                            <strong>Á≠âÁÜµÊµÅÂä®ÊñπÁ®ãÔºö</strong><br>
                            ‚Ä¢ ËøûÁª≠ÊÄßÔºöœÅ‚ÇÅv‚ÇÅA‚ÇÅ = œÅ‚ÇÇv‚ÇÇA‚ÇÇ<br>
                            ‚Ä¢ Âä®ÈáèÔºöp‚ÇÅ + œÅ‚ÇÅv‚ÇÅ¬≤ = p‚ÇÇ + œÅ‚ÇÇv‚ÇÇ¬≤<br>
                            ‚Ä¢ ËÉΩÈáèÔºöh‚ÇÅ + v‚ÇÅ¬≤/2 = h‚ÇÇ + v‚ÇÇ¬≤/2<br><br>

                            <strong>ÊãâÁì¶Â∞îÂñ∑ÁÆ°Ôºö</strong><br>
                            ‚Ä¢ Êî∂Áº©ÊÆµÔºö‰∫öÈü≥ÈÄüÂä†ÈÄü<br>
                            ‚Ä¢ ÂñâÈÉ®ÔºöMa = 1<br>
                            ‚Ä¢ Êâ©Âº†ÊÆµÔºöË∂ÖÈü≥ÈÄüÁªßÁª≠Âä†ÈÄü<br><br>

                            <strong>ÊøÄÊ≥¢ÁêÜËÆ∫Ôºö</strong><br>
                            ‚Ä¢ Ê≠£ÊøÄÊ≥¢ÔºöMa‚ÇÅ > 1 ‚Üí Ma‚ÇÇ < 1<br>
                            ‚Ä¢ ÊñúÊøÄÊ≥¢ÔºöÊµÅÂä®ÊñπÂêëÊîπÂèò<br>
                            ‚Ä¢ Rankine-HugoniotÂÖ≥Á≥ª<br><br>
                            <small style="color: #888;">üìö Á¨¨‰πùÁ´†ÔºöÂèØÂéãÁº©ÊµÅÂä®</small>`
                        },

                        // Á¨¨ÂçÅÁ´†ÔºöÊ∂°ÈáèÁêÜËÆ∫
                        'Ê∂°Èáè': {
                            keywords: ['Ê∂°Èáè', 'Ê∂°Â∫¶', 'ÁéØÈáè', 'vorticity', 'Ê∂°Á∫ø'],
                            content: `üå™Ô∏è <strong>Ê∂°ÈáèÁêÜËÆ∫ËØ¶Ëß£</strong><br><br>
                            <strong>Ê∂°ÈáèÂÆö‰πâÔºö</strong><br>
                            $$\\vec{\\omega} = \\nabla \\times \\vec{v} = \\begin{vmatrix}
                            \\vec{i} & \\vec{j} & \\vec{k} \\\\
                            \\frac{\\partial}{\\partial x} & \\frac{\\partial}{\\partial y} & \\frac{\\partial}{\\partial z} \\\\
                            u & v & w
                            \\end{vmatrix}$$<br><br>

                            <strong>ÁéØÈáèÔºö</strong><br>
                            $$\\Gamma = \\oint \\vec{v} \\cdot d\\vec{l} = \\int \\vec{\\omega} \\cdot d\\vec{A}$$<br><br>

                            <strong>Ê∂°ÈáèËæìËøêÊñπÁ®ãÔºö</strong><br>
                            $$\\frac{D\\vec{\\omega}}{Dt} = (\\vec{\\omega} \\cdot \\nabla)\\vec{v} + \\nu\\nabla^2\\vec{\\omega}$$<br><br>

                            <strong>KelvinÂÆöÁêÜÔºö</strong><br>
                            ÁêÜÊÉ≥ÊµÅ‰Ωì‰∏≠ÔºåÁéØÈáèÂÆàÊÅíÔºöDŒì/Dt = 0<br><br>

                            <strong>HelmholtzÊ∂°ÈáèÂÆöÁêÜÔºö</strong><br>
                            ‚Ä¢ Ê∂°Á∫ø‰∏çËÉΩÂú®ÊµÅ‰ΩìÂÜÖÈÉ®ÁªàÊ≠¢<br>
                            ‚Ä¢ Ê∂°ÁÆ°Âº∫Â∫¶Ê≤øÈïøÂ∫¶‰∏çÂèò<br>
                            ‚Ä¢ Ê∂°Á∫øÈöèÊµÅ‰ΩìËøêÂä®<br><br>

                            <strong>Â∫îÁî®Ôºö</strong><br>
                            ‚Ä¢ ÁøºÂ∞ñÊ∂°<br>
                            ‚Ä¢ ÈæôÂç∑È£é<br>
                            ‚Ä¢ ÊπçÊµÅÁªìÊûÑ<br><br>
                            <small style="color: #888;">üìö Á¨¨ÂçÅÁ´†ÔºöÊ∂°ÈáèÁêÜËÆ∫</small>`
                        },

                        // Á¨¨ÂçÅ‰∏ÄÁ´†ÔºöÊµÅ‰ΩìÊµãÈáè
                        'ÊµÅ‰ΩìÊµãÈáè': {
                            keywords: ['ÊµÅÈáèËÆ°', 'ÊµãÈÄü', 'ÂéãÂäõÊµãÈáè', 'ÁöÆÊâòÁÆ°', 'Êñá‰∏òÈáå'],
                            content: `üìè <strong>ÊµÅ‰ΩìÊµãÈáèÊäÄÊúØ</strong><br><br>
                            <strong>1. ÁöÆÊâòÁÆ°ÊµãÈÄüÔºö</strong><br>
                            ‚Ä¢ ÂéüÁêÜÔºö‰ºØÂä™Âà©ÊñπÁ®ã<br>
                            ‚Ä¢ ÂÖ¨ÂºèÔºöv = ‚àö(2Œîp/œÅ)<br>
                            ‚Ä¢ ‰øÆÊ≠£Ôºöv = C‚àö(2Œîp/œÅ)<br><br>

                            <strong>2. Êñá‰∏òÈáåÊµÅÈáèËÆ°Ôºö</strong><br>
                            ‚Ä¢ ÂéüÁêÜÔºöËøûÁª≠ÊÄß+‰ºØÂä™Âà©<br>
                            ‚Ä¢ ÊµÅÈáèÔºöQ = CdA‚ÇÇ‚àö(2Œîp/œÅ(1-(A‚ÇÇ/A‚ÇÅ)¬≤))<br>
                            ‚Ä¢ ‰ºòÁÇπÔºöÂéãÂäõÊçüÂ§±Â∞è<br><br>

                            <strong>3. Â≠îÊùøÊµÅÈáèËÆ°Ôºö</strong><br>
                            ‚Ä¢ ÁªìÊûÑÁÆÄÂçïÔºåÊàêÊú¨‰Ωé<br>
                            ‚Ä¢ ÂéãÂäõÊçüÂ§±Â§ß<br>
                            ‚Ä¢ ÈúÄË¶ÅÊ†áÂÆöÁ≥ªÊï∞<br><br>

                            <strong>4. ËΩ¨Â≠êÊµÅÈáèËÆ°Ôºö</strong><br>
                            ‚Ä¢ ÂèòÈù¢ÁßØÂéüÁêÜ<br>
                            ‚Ä¢ Áõ¥ËØªÂºè<br>
                            ‚Ä¢ ÈÄÇÁî®ËåÉÂõ¥Âπø<br><br>

                            <strong>5. Áé∞‰ª£ÊµãÈáèÊäÄÊúØÔºö</strong><br>
                            ‚Ä¢ ÊøÄÂÖâÂ§öÊôÆÂãíÊµãÈÄü(LDV)<br>
                            ‚Ä¢ Á≤íÂ≠êÂõæÂÉèÊµãÈÄü(PIV)<br>
                            ‚Ä¢ Ë∂ÖÂ£∞Ê≥¢ÊµÅÈáèËÆ°<br>
                            ‚Ä¢ ÁîµÁ£ÅÊµÅÈáèËÆ°<br><br>
                            <small style="color: #888;">üìö Á¨¨ÂçÅ‰∏ÄÁ´†ÔºöÊµÅ‰ΩìÊµãÈáè</small>`
                        },

                        // Á¨¨ÂçÅ‰∫åÁ´†ÔºöÁõ∏‰ººÁêÜËÆ∫‰∏éÈáèÁ∫≤ÂàÜÊûê
                        'Áõ∏‰ººÁêÜËÆ∫': {
                            keywords: ['Áõ∏‰ºº', 'ÈáèÁ∫≤ÂàÜÊûê', 'Êó†ÈáèÁ∫≤Êï∞', 'Ê®°ÂûãËØïÈ™å'],
                            content: `üî¨ <strong>Áõ∏‰ººÁêÜËÆ∫‰∏éÈáèÁ∫≤ÂàÜÊûê</strong><br><br>
                            <strong>Áõ∏‰ººÂáÜÂàôÔºö</strong><br>
                            ‚Ä¢ Âá†‰ΩïÁõ∏‰ººÔºöLr = L‚ÇÅ/L‚ÇÇ = Â∏∏Êï∞<br>
                            ‚Ä¢ ËøêÂä®Áõ∏‰ººÔºövr = v‚ÇÅ/v‚ÇÇ = Â∏∏Êï∞<br>
                            ‚Ä¢ Âä®ÂäõÁõ∏‰ººÔºöFr = F‚ÇÅ/F‚ÇÇ = Â∏∏Êï∞<br><br>

                            <strong>ÈáçË¶ÅÊó†ÈáèÁ∫≤Êï∞Ôºö</strong><br>
                            ‚Ä¢ Èõ∑ËØ∫Êï∞ÔºöRe = œÅvL/Œº (ÊÉØÊÄßÂäõ/Á≤òÊÄßÂäõ)<br>
                            ‚Ä¢ ÂºóÂä≥Âæ∑Êï∞ÔºöFr = v/‚àö(gL) (ÊÉØÊÄßÂäõ/ÈáçÂäõ)<br>
                            ‚Ä¢ È©¨Ëµ´Êï∞ÔºöMa = v/a (ÊÉØÊÄßÂäõ/ÂºπÊÄßÂäõ)<br>
                            ‚Ä¢ Èü¶‰ºØÊï∞ÔºöWe = œÅv¬≤L/œÉ (ÊÉØÊÄßÂäõ/Ë°®Èù¢Âº†Âäõ)<br><br>

                            <strong>Buckingham œÄÂÆöÁêÜÔºö</strong><br>
                            n‰∏™Áâ©ÁêÜÈáèÔºåk‰∏™Âü∫Êú¨ÈáèÁ∫≤<br>
                            ‚Üí (n-k)‰∏™Êó†ÈáèÁ∫≤œÄÁæ§<br><br>

                            <strong>Ê®°ÂûãËØïÈ™åÔºö</strong><br>
                            ‚Ä¢ Á°ÆÂÆö‰∏ªÂØºÊó†ÈáèÁ∫≤Êï∞<br>
                            ‚Ä¢ ‰øùÊåÅÁõ∏‰ººÂáÜÂàô<br>
                            ‚Ä¢ ÁªìÊûúÂ§ñÊé®Âà∞ÂéüÂûã<br><br>

                            <strong>Â∫îÁî®ÂÆû‰æãÔºö</strong><br>
                            ‚Ä¢ ËàπËà∂ÈòªÂäõËØïÈ™å (FrÁõ∏‰ºº)<br>
                            ‚Ä¢ È£ûÊú∫È£éÊ¥ûËØïÈ™å (Re, MaÁõ∏‰ºº)<br>
                            ‚Ä¢ Ê∞¥Â∑•Ê®°Âûã (FrÁõ∏‰ºº)<br><br>
                            <small style="color: #888;">üìö Á¨¨ÂçÅ‰∫åÁ´†ÔºöÁõ∏‰ººÁêÜËÆ∫</small>`
                        },

                        // Â∑•Á®ãÂ∫îÁî®
                        'Ê≥µ‰∏éÈ£éÊú∫': {
                            keywords: ['Ê≥µ', 'È£éÊú∫', 'Âè∂ËΩÆ', 'ÊÄßËÉΩÊõ≤Á∫ø', 'Ê±ΩËöÄ'],
                            content: `‚öôÔ∏è <strong>Ê≥µ‰∏éÈ£éÊú∫Â∑•Á®ãÂ∫îÁî®</strong><br><br>
                            <strong>Á¶ªÂøÉÊ≥µÂü∫Êú¨ÊñπÁ®ãÔºö</strong><br>
                            ‚Ä¢ ÁêÜËÆ∫Êâ¨Á®ãÔºöH_th = (u‚ÇÇ¬≤-u‚ÇÅ¬≤)/2g + (w‚ÇÅ¬≤-w‚ÇÇ¬≤)/2g<br>
                            ‚Ä¢ ÂÆûÈôÖÊâ¨Á®ãÔºöH = H_th - ÊçüÂ§±<br><br>

                            <strong>ÊÄßËÉΩÂèÇÊï∞Ôºö</strong><br>
                            ‚Ä¢ ÊµÅÈáè Q (m¬≥/s)<br>
                            ‚Ä¢ Êâ¨Á®ã H (m)<br>
                            ‚Ä¢ ÂäüÁéá P (kW)<br>
                            ‚Ä¢ ÊïàÁéá Œ∑ = œÅgQH/P<br><br>

                            <strong>Áõ∏‰ººÂÆöÂæãÔºö</strong><br>
                            ‚Ä¢ Q‚ÇÅ/Q‚ÇÇ = (n‚ÇÅ/n‚ÇÇ)(D‚ÇÅ/D‚ÇÇ)¬≥<br>
                            ‚Ä¢ H‚ÇÅ/H‚ÇÇ = (n‚ÇÅ/n‚ÇÇ)¬≤(D‚ÇÅ/D‚ÇÇ)¬≤<br>
                            ‚Ä¢ P‚ÇÅ/P‚ÇÇ = (n‚ÇÅ/n‚ÇÇ)¬≥(D‚ÇÅ/D‚ÇÇ)‚Åµ<br><br>

                            <strong>Ê±ΩËöÄÁé∞Ë±°Ôºö</strong><br>
                            ‚Ä¢ Êù°‰ª∂Ôºöp < p_v (È•±ÂíåËí∏Ê±ΩÂéã)<br>
                            ‚Ä¢ Ê±ΩËöÄ‰ΩôÈáèÔºöNPSH = (p‚ÇÄ-p_v)/œÅg + v‚ÇÄ¬≤/2g<br>
                            ‚Ä¢ Èò≤Ê≠¢Êé™ÊñΩÔºöÈôç‰ΩéÂê∏Á®ãÔºåÂ¢ûÂ§ßÁÆ°ÂæÑ<br><br>

                            <strong>Á≥ªÁªüÁâπÊÄßÔºö</strong><br>
                            ‚Ä¢ ÁÆ°Ë∑ØÁâπÊÄßÔºöH = H‚ÇÄ + KQ¬≤<br>
                            ‚Ä¢ Â∑•‰ΩúÁÇπÔºöÊ≥µÁâπÊÄß‰∏éÁÆ°Ë∑ØÁâπÊÄß‰∫§ÁÇπ<br><br>
                            <small style="color: #888;">üìö Â∑•Á®ãÂ∫îÁî®ÔºöÊ≥µ‰∏éÈ£éÊú∫</small>`
                        }
                    };
                    
                    const questionLower = question.toLowerCase();
                    
                    // Á≤æÁ°ÆÂåπÈÖçÂÖ≥ÈîÆËØç
                    for (const [topicKey, topic] of Object.entries(knowledgeBase)) {
                        for (const keyword of topic.keywords) {
                            if (questionLower.includes(keyword.toLowerCase())) {
                                console.log(`‚úÖ Êú¨Âú∞Áü•ËØÜÂ∫ìÂåπÈÖç: ${topicKey}`);
                                return topic.content;
                            }
                        }
                    }
                    
                    console.log('‚ùå Êú¨Âú∞Áü•ËØÜÂ∫ìÊó†ÂåπÈÖçÁªìÊûú');
                    return null;
                },

                getFallbackResponse(question) {
                    const fallbackResponses = [
                        'üí° <strong>ÊèêÁ§∫Ôºö</strong>ËøôÊòØ‰∏Ä‰∏™ÂæàÂ•ΩÁöÑÈóÆÈ¢òÔºÅÂª∫ËÆÆÊü•ÈòÖÁõ∏ÂÖ≥ÊïôÊùêÊàñÂí®ËØ¢ËÄÅÂ∏àËé∑ÂæóÊõ¥ËØ¶ÁªÜÁöÑËß£Á≠î„ÄÇ',
                        'ü§î <strong>ÊÄùËÄÉÔºö</strong>Ëøô‰∏™ÈóÆÈ¢òÊ∂âÂèäËæÉÊ∑±ÁöÑÁêÜËÆ∫ÔºåÂª∫ËÆÆÂÖàÂ§ç‰π†Âü∫Á°ÄÊ¶ÇÂøµÔºåÁÑ∂ÂêéÈÄêÊ≠•Ê∑±ÂÖ•„ÄÇ',
                        'üìñ <strong>Âª∫ËÆÆÔºö</strong>ÂèØ‰ª•‰ªéÂü∫Êú¨ÂéüÁêÜÂá∫ÂèëÔºåÁªìÂêàÂÖ∑‰Ωì‰æãÂ≠êÊù•ÁêÜËß£Ëøô‰∏™Ê¶ÇÂøµ„ÄÇ'
                    ];
                    return fallbackResponses[Math.floor(Math.random() * fallbackResponses.length)];
                },

                selectSuggestion(suggestion) {
                    this.currentMessage = suggestion;

                    // Â¶ÇÊûúÂêØÁî®Êô∫ËÉΩÂª∫ËÆÆÔºåÊõ¥Êñ∞Âª∫ËÆÆÂàóË°®
                    if (this.advancedFeatures.smartSuggestions) {
                        this.updateSmartSuggestions(suggestion);
                    }

                    // Ëá™Âä®ÂèëÈÄÅÊ∂àÊÅØ
                    this.sendMessage();
                },

                // Êõ¥Êñ∞Êô∫ËÉΩÂª∫ËÆÆ
                updateSmartSuggestions(selectedSuggestion) {
                    const relatedSuggestions = {
                        // Âü∫Á°ÄÊ¶ÇÂøµÁõ∏ÂÖ≥
                        '‰ªÄ‰πàÊòØÊµÅ‰ΩìÔºüÊµÅ‰ΩìÊúâÂì™‰∫õÂü∫Êú¨ÁâπÊÄßÔºü': [
                            'ÊµÅ‰ΩìÁöÑ‰∏ªË¶ÅÁâ©ÁêÜÊÄßË¥®ÊúâÂì™‰∫õÔºü',
                            'ÁâõÈ°øÊµÅ‰Ωì‰∏éÈùûÁâõÈ°øÊµÅ‰ΩìÁöÑÂå∫Âà´',
                            'ÊµÅ‰ΩìÈùôÂäõÂ≠¶Âü∫Êú¨ÂéüÁêÜ'
                        ],
                        'ÊµÅ‰ΩìÁöÑ‰∏ªË¶ÅÁâ©ÁêÜÊÄßË¥®ÊúâÂì™‰∫õÔºü': [
                            'ÂØÜÂ∫¶ÂíåÊØîÈáçÁöÑÊ¶ÇÂøµ',
                            'Á≤òÊÄßÁ≥ªÊï∞ÁöÑÊµãÈáèÊñπÊ≥ï',
                            'Ë°®Èù¢Âº†ÂäõÁöÑÂ∫îÁî®'
                        ],

                        // ÈùôÂäõÂ≠¶Áõ∏ÂÖ≥
                        'ÊµÅ‰ΩìÈùôÂäõÂ≠¶Âü∫Êú¨ÂéüÁêÜ': [
                            'Â¶Ç‰ΩïÊµãÈáèÊµÅ‰ΩìÂéãÂäõÔºü',
                            'Â∏ïÊñØÂç°ÂÆöÂæãÁöÑÂ∫îÁî®',
                            'ÊµÆÂäõÂíåÈòøÂü∫Á±≥Âæ∑ÂéüÁêÜ'
                        ],

                        // ËøêÂä®Â≠¶Áõ∏ÂÖ≥
                        'ÊµÅ‰ΩìËøêÂä®Â≠¶Âü∫Êú¨Ê¶ÇÂøµ': [
                            'ÊµÅÁ∫ø„ÄÅËøπÁ∫øÂíåÊµÅÁ∫øÁöÑÂå∫Âà´',
                            'ËøûÁª≠ÊÄßÊñπÁ®ãÁöÑÊé®ÂØºËøáÁ®ã',
                            'ÊµÅÈáèÂíåÊµÅÈÄüÁöÑÂÖ≥Á≥ª'
                        ],

                        // Âä®ÂäõÂ≠¶Áõ∏ÂÖ≥
                        '‰ªÄ‰πàÊòØ‰ºØÂä™Âà©ÊñπÁ®ãÔºü': [
                            '‰ºØÂä™Âà©ÊñπÁ®ãÁöÑÂ∫îÁî®ÂÆû‰æã',
                            'Â¶Ç‰ΩïÊé®ÂØº‰ºØÂä™Âà©ÊñπÁ®ãÔºü',
                            '‰ºØÂä™Âà©ÊñπÁ®ãÁöÑÈÄÇÁî®Êù°‰ª∂',
                            'ËÆæËÆ°Êñá‰∏òÈáåÊµÅÈáèËÆ°'
                        ],
                        'Âä®ÈáèÊñπÁ®ãÁöÑÂ∫îÁî®': [
                            'Â∞ÑÊµÅÂÜ≤ÂáªÂäõËÆ°ÁÆó',
                            'ÂºØÁÆ°ÂèóÂäõÂàÜÊûê',
                            'Ëû∫ÊóãÊ°®Êé®ÂäõÁêÜËÆ∫'
                        ],

                        // Á≤òÊÄßÊµÅÂä®Áõ∏ÂÖ≥
                        '‰ªÄ‰πàÊòØÁ≤òÊÄßÔºüÁâõÈ°øÁ≤òÊÄßÂÆöÂæã': [
                            'Â±ÇÊµÅÂíåÊπçÊµÅÁöÑÂå∫Âà´ÊòØ‰ªÄ‰πàÔºü',
                            'Êé®ÂØºNavier-StokesÊñπÁ®ã',
                            'ÈùûÁâõÈ°øÊµÅ‰ΩìÁöÑÁâπÊÄß'
                        ],
                        'Â±ÇÊµÅÂíåÊπçÊµÅÁöÑÂå∫Âà´ÊòØ‰ªÄ‰πàÔºü': [
                            'Â¶Ç‰ΩïËÆ°ÁÆóÈõ∑ËØ∫Êï∞Ôºü',
                            '‰∏¥ÁïåÈõ∑ËØ∫Êï∞ÁöÑÁ°ÆÂÆö',
                            'ÊπçÊµÅÁöÑÁªüËÆ°ÁêÜËÆ∫'
                        ],
                        'Â¶Ç‰ΩïËÆ°ÁÆóÈõ∑ËØ∫Êï∞Ôºü': [
                            'Èõ∑ËØ∫Êï∞ÁöÑÁâ©ÁêÜÊÑè‰πâ',
                            '‰∏çÂêåÂá†‰ΩïÂΩ¢Áä∂ÁöÑÈõ∑ËØ∫Êï∞',
                            'Èõ∑ËØ∫Êï∞ÂØπÊµÅÂä®ÁöÑÂΩ±Âìç'
                        ],

                        // ËæπÁïåÂ±ÇÁõ∏ÂÖ≥
                        'ËæπÁïåÂ±ÇÁêÜËÆ∫ÁöÑÂü∫Êú¨Ê¶ÇÂøµ': [
                            'ËæπÁïåÂ±ÇÂéöÂ∫¶ÁöÑËÆ°ÁÆó',
                            'ËæπÁïåÂ±ÇÂàÜÁ¶ªÁé∞Ë±°',
                            'BlasiusËß£ÁöÑÁâ©ÁêÜÊÑè‰πâ'
                        ],
                        'ËæπÁïåÂ±ÇÂàÜÁ¶ªÁé∞Ë±°': [
                            'ÂàÜÁ¶ªÁöÑÊù°‰ª∂ÂíåÂéüÂõ†',
                            'Â¶Ç‰ΩïÊéßÂà∂ËæπÁïåÂ±ÇÂàÜÁ¶ª',
                            'ÂàÜÁ¶ªÂØπÈòªÂäõÁöÑÂΩ±Âìç'
                        ],

                        // ÁÆ°ÈÅìÊµÅÂä®Áõ∏ÂÖ≥
                        'ÁÆ°ÈÅìÊµÅÂä®ÁöÑÁâπÁÇπ': [
                            'Â¶Ç‰ΩïËÆ°ÁÆóÁÆ°ÈÅìÂéãÂäõÊçüÂ§±Ôºü',
                            'ÁÆ°ÁΩëÁ≥ªÁªüÁöÑËÆ°ÁÆóÊñπÊ≥ï',
                            'ÁÆ°ÈÅìÊë©Êì¶Á≥ªÊï∞ÁöÑÁ°ÆÂÆö'
                        ],

                        // ÁªïÊµÅÁõ∏ÂÖ≥
                        'ÂúÜÊü±ÁªïÊµÅÁé∞Ë±°ÂàÜÊûê': [
                            '‰ªÄ‰πàÊòØÈòªÂäõÁ≥ªÊï∞Ôºü',
                            'Âç°Èó®Ê∂°Ë°óÁé∞Ë±°',
                            'ÁªïÊµÅÁöÑÈõ∑ËØ∫Êï∞ÊïàÂ∫î'
                        ],
                        'ÂàÜÊûêÊú∫ÁøºÂçáÂäõ‰∫ßÁîüÊú∫ÁêÜ': [
                            'Kutta-JoukowskiÂÆöÁêÜ',
                            'ÁøºÂûãÁöÑÂá†‰ΩïÂèÇÊï∞',
                            'ÂçáÈòªÊØîÁöÑ‰ºòÂåñ'
                        ],

                        // È´òÁ∫ßÁêÜËÆ∫Áõ∏ÂÖ≥
                        'ÂèØÂéãÁº©ÊµÅÂä®Âü∫Á°Ä': [
                            'Èü≥ÈÄüÂíåÈ©¨Ëµ´Êï∞',
                            'ÊøÄÊ≥¢ÁêÜËÆ∫',
                            'ÊãâÁì¶Â∞îÂñ∑ÁÆ°ËÆæËÆ°'
                        ],
                        'Ëß£ÈáäÊ∂°ÈáèËæìËøêÊñπÁ®ã': [
                            'Ê∂°ÈáèÁöÑÂÆö‰πâÂíåËÆ°ÁÆó',
                            'KelvinÁéØÈáèÂÆöÁêÜ',
                            'HelmholtzÊ∂°ÈáèÂÆöÁêÜ'
                        ],
                        'Áõ∏‰ººÁêÜËÆ∫‰∏éÈáèÁ∫≤ÂàÜÊûê': [
                            'Buckingham œÄÂÆöÁêÜ',
                            'ÈáçË¶ÅÁöÑÊó†ÈáèÁ∫≤Êï∞',
                            'Ê®°ÂûãËØïÈ™åËÆæËÆ°'
                        ],

                        // Â∑•Á®ãÂ∫îÁî®Áõ∏ÂÖ≥
                        'ËÆæËÆ°Êñá‰∏òÈáåÊµÅÈáèËÆ°': [
                            'ÊµÅÈáèËÆ°ÁöÑÂ∑•‰ΩúÂéüÁêÜ',
                            'Â≠îÊùøÊµÅÈáèËÆ°ÁöÑÁâπÁÇπ',
                            'Áé∞‰ª£ÊµÅÈáèÊµãÈáèÊäÄÊúØ'
                        ],
                        'Ê≥µÁöÑÊÄßËÉΩÊõ≤Á∫øÂàÜÊûê': [
                            'Ê≥µÁöÑÁõ∏‰ººÂÆöÂæã',
                            'Ê±ΩËöÄÁé∞Ë±°ÂèäÂÖ∂Èò≤Ê≠¢',
                            'Ê≥µÁ´ôÁ≥ªÁªüËÆæËÆ°'
                        ]
                    };

                    const related = relatedSuggestions[selectedSuggestion];
                    if (related) {
                        // Â∞ÜÁõ∏ÂÖ≥Âª∫ËÆÆÊ∑ªÂä†Âà∞ÂΩìÂâçÂª∫ËÆÆÂàóË°®ÁöÑÂâçÈù¢
                        this.suggestions = [...related, ...this.suggestions.filter(s => !related.includes(s))].slice(0, 12);
                        console.log('üí° Êô∫ËÉΩÂª∫ËÆÆÂ∑≤Êõ¥Êñ∞:', related);
                    }
                },

                // Âà∑Êñ∞Âª∫ËÆÆ
                refreshSuggestions() {
                    const allSuggestions = [
                        '‰ªÄ‰πàÊòØ‰ºØÂä™Âà©ÊñπÁ®ãÔºü',
                        'Â±ÇÊµÅÂíåÊπçÊµÅÁöÑÂå∫Âà´ÊòØ‰ªÄ‰πàÔºü',
                        'Â¶Ç‰ΩïËÆ°ÁÆóÈõ∑ËØ∫Êï∞Ôºü',
                        'ËæπÁïåÂ±ÇÁêÜËÆ∫ÁöÑÂü∫Êú¨Ê¶ÇÂøµ',
                        'ÊµÅ‰ΩìÁ≤òÊÄßÁöÑÁâ©ÁêÜÊÑè‰πâ',
                        'ËøûÁª≠ÊÄßÊñπÁ®ãÁöÑÊé®ÂØºËøáÁ®ã',
                        'Êé®ÂØºNavier-StokesÊñπÁ®ã',
                        'Ëß£ÈáäÊ∂°ÈáèËæìËøêÊñπÁ®ã',
                        'ÂàÜÊûêÁÆ°ÈÅìÊµÅÂä®ÁöÑÈÄüÂ∫¶ÂàÜÂ∏É',
                        'ËÆ°ÁÆóÁªïÂúÜÊü±ÊµÅÂä®ÁöÑÈòªÂäõÁ≥ªÊï∞',
                        'ËÆæËÆ°Êñá‰∏òÈáåÊµÅÈáèËÆ°',
                        'ÂàÜÊûêÊú∫ÁøºÂçáÂäõ‰∫ßÁîüÊú∫ÁêÜ',
                        '‰ªÄ‰πàÊòØÂéãÂäõÊçüÂ§±Ôºü',
                        'Â¶Ç‰ΩïÊµãÈáèÊµÅ‰ΩìÊµÅÈáèÔºü',
                        'ÊµÅ‰ΩìÈùôÂäõÂ≠¶Âü∫Êú¨ÂéüÁêÜ',
                        'ÁêÜÊÉ≥ÊµÅ‰Ωì‰∏éÂÆûÈôÖÊµÅ‰ΩìÁöÑÂå∫Âà´',
                        'ÊµÅÁ∫ø„ÄÅËøπÁ∫øÂíåÊµÅÁ∫øÁöÑÂå∫Âà´',
                        '‰ªÄ‰πàÊòØÊµÅÂáΩÊï∞ÂíåÂäøÂáΩÊï∞Ôºü',
                        'ÁÆ°ÈÅìÊë©Êì¶ÊçüÂ§±ËÆ°ÁÆó',
                        'Ê≥µÁöÑÊÄßËÉΩÊõ≤Á∫øÂàÜÊûê'
                    ];

                    // ÈöèÊú∫ÈÄâÊã©12‰∏™Âª∫ËÆÆ
                    const shuffled = allSuggestions.sort(() => 0.5 - Math.random());
                    this.suggestions = shuffled.slice(0, 12);

                    this.showNotification('üîÑ Âª∫ËÆÆÂ∑≤Âà∑Êñ∞', 'success');
                },

                // Â≠¶‰π†ËøõÂ∫¶Ë∑üË∏™
                updateLearningProgress(question) {
                    const topics = {
                        '‰ºØÂä™Âà©': { name: '‰ºØÂä™Âà©ÊñπÁ®ã', difficulty: 'basic' },
                        'Èõ∑ËØ∫': { name: 'Èõ∑ËØ∫Êï∞', difficulty: 'basic' },
                        'Â±ÇÊµÅ': { name: 'ÊµÅÂä®Áä∂ÊÄÅ', difficulty: 'basic' },
                        'ÊπçÊµÅ': { name: 'ÊµÅÂä®Áä∂ÊÄÅ', difficulty: 'intermediate' },
                        'ËæπÁïåÂ±Ç': { name: 'ËæπÁïåÂ±ÇÁêÜËÆ∫', difficulty: 'intermediate' },
                        'NSÊñπÁ®ã': { name: 'Navier-StokesÊñπÁ®ã', difficulty: 'advanced' },
                        'Ê∂°Èáè': { name: 'Ê∂°ÈáèÁêÜËÆ∫', difficulty: 'advanced' },
                        'ËøûÁª≠ÊÄß': { name: 'ËøûÁª≠ÊÄßÊñπÁ®ã', difficulty: 'basic' }
                    };

                    for (const [keyword, topicInfo] of Object.entries(topics)) {
                        if (question.toLowerCase().includes(keyword.toLowerCase())) {
                            // Êõ¥Êñ∞Â≠¶‰π†Ë∑ØÂæÑ
                            if (!this.learningPath.some(item => item.name === topicInfo.name)) {
                                this.learningPath.push({
                                    name: topicInfo.name,
                                    difficulty: topicInfo.difficulty,
                                    timestamp: new Date(),
                                    questions: 1
                                });
                            } else {
                                // Â¢ûÂä†ÈóÆÈ¢òËÆ°Êï∞
                                const existingTopic = this.learningPath.find(item => item.name === topicInfo.name);
                                if (existingTopic) {
                                    existingTopic.questions++;
                                    existingTopic.timestamp = new Date();
                                }
                            }

                            // ËÆ°ÁÆóÂ≠¶‰π†ËøõÂ∫¶
                            this.calculateLearningProgress();
                            break;
                        }
                    }
                },

                // ËÆ°ÁÆóÂ≠¶‰π†ËøõÂ∫¶
                calculateLearningProgress() {
                    const totalTopics = 8; // ÊÄªÂÖ±8‰∏™‰∏ªË¶ÅËØùÈ¢ò
                    const completedTopics = this.learningPath.length;
                    const progressPercentage = Math.round((completedTopics / totalTopics) * 100);

                    // Êõ¥Êñ∞‰ºöËØùÁªüËÆ°
                    this.sessionStats.learningProgress = progressPercentage;
                    this.sessionStats.topicsExplored = completedTopics;

                    // ÊòæÁ§∫ËøõÂ∫¶ÊèêÁ§∫
                    if (completedTopics > 0 && completedTopics % 3 === 0) {
                        this.showNotification(`üéâ Â≠¶‰π†ËøõÂ∫¶: ${progressPercentage}% (Â∑≤Êé¢Á¥¢${completedTopics}‰∏™ËØùÈ¢ò)`, 'success');
                    }
                },

                // Ëé∑ÂèñÂ≠¶‰π†Âª∫ËÆÆ
                getLearningRecommendations() {
                    const basicTopics = ['‰ºØÂä™Âà©ÊñπÁ®ã', 'ËøûÁª≠ÊÄßÊñπÁ®ã', 'Èõ∑ËØ∫Êï∞'];
                    const intermediateTopics = ['ËæπÁïåÂ±ÇÁêÜËÆ∫', 'ÊµÅÂä®Áä∂ÊÄÅ', 'ÂéãÂäõÂàÜÊûê'];
                    const advancedTopics = ['Navier-StokesÊñπÁ®ã', 'Ê∂°ÈáèÁêÜËÆ∫'];

                    const exploredTopics = this.learningPath.map(item => item.name);
                    const unexploredBasic = basicTopics.filter(topic => !exploredTopics.includes(topic));
                    const unexploredIntermediate = intermediateTopics.filter(topic => !exploredTopics.includes(topic));
                    const unexploredAdvanced = advancedTopics.filter(topic => !exploredTopics.includes(topic));

                    let recommendations = [];

                    if (unexploredBasic.length > 0) {
                        recommendations.push(`Âª∫ËÆÆÂÖàÂ≠¶‰π†Âü∫Á°ÄÊ¶ÇÂøµ: ${unexploredBasic.join(', ')}`);
                    } else if (unexploredIntermediate.length > 0) {
                        recommendations.push(`ÂèØ‰ª•Â≠¶‰π†‰∏≠Á∫ßÊ¶ÇÂøµ: ${unexploredIntermediate.join(', ')}`);
                    } else if (unexploredAdvanced.length > 0) {
                        recommendations.push(`ÊåëÊàòÈ´òÁ∫ßÊ¶ÇÂøµ: ${unexploredAdvanced.join(', ')}`);
                    } else {
                        recommendations.push('ÊÅ≠ÂñúÔºÅÊÇ®Â∑≤ÁªèÊé¢Á¥¢‰∫ÜÊâÄÊúâ‰∏ªË¶ÅËØùÈ¢òÔºåÂèØ‰ª•Ê∑±ÂÖ•Á†îÁ©∂ÂÖ∑‰ΩìÂ∫îÁî®„ÄÇ');
                    }

                    return recommendations;
                },

                formatTime(date) {
                    return date.toLocaleTimeString('zh-CN', {
                        hour: '2-digit',
                        minute: '2-digit'
                    });
                },

                scrollToBottom() {
                    this.$nextTick(() => {
                        const messagesContainer = this.$refs.chatMessages;
                        if (messagesContainer) {
                            messagesContainer.scrollTop = messagesContainer.scrollHeight;
                        }
                    });
                },

                handleEnter(event) {
                    if (event.key === 'Enter' && !event.shiftKey) {
                        event.preventDefault();
                        this.sendMessage();
                    }
                },

                toggleFullscreen() {
                    this.isFullscreen = !this.isFullscreen;

                    if (this.isFullscreen) {
                        document.body.style.overflow = 'hidden';
                        this.showNotification('Â∑≤ËøõÂÖ•ÂÖ®Â±èÊ®°Âºè', 'info');
                    } else {
                        document.body.style.overflow = '';
                        this.showNotification('Â∑≤ÈÄÄÂá∫ÂÖ®Â±èÊ®°Âºè', 'info');
                    }
                },

                showNotification(message, type = 'info') {
                    this.notification = {
                        show: true,
                        message,
                        type
                    };

                    setTimeout(() => {
                        this.notification.show = false;
                    }, 3000);
                },

                // ÈîÆÁõòÂø´Êç∑ÈîÆÂ§ÑÁêÜ
                handleKeyboard(event) {
                    if (event.key === 'F11') {
                        event.preventDefault();
                        this.toggleFullscreen();
                    } else if (event.key === 'Escape') {
                        if (this.isFullscreen) {
                            this.toggleFullscreen();
                        } else {
                            window.location.href = '../index.html';
                        }
                    } else if (event.ctrlKey && event.key === 'l') {
                        event.preventDefault();
                        this.clearChat();
                    }
                },

                clearChat() {
                    this.messages = [{
                        id: 1,
                        sender: 'ai',
                        content: 'üëã ÊÇ®Â•ΩÔºÅÊàëÊòØAIÂ≠¶‰π†Âä©ÊâãÔºå‰∏ìÈó®Â∏ÆÂä©ÊÇ®Â≠¶‰π†ÊµÅ‰ΩìÂäõÂ≠¶„ÄÇËØ∑ÈöèÊó∂ÂêëÊàëÊèêÈóÆÔºÅ',
                        timestamp: new Date()
                    }];
                    this.showNotification('ÂØπËØùÂ∑≤Ê∏ÖÁ©∫', 'success');
                },

                // ËØ≠Èü≥ËæìÂÖ•ÂäüËÉΩ
                toggleVoiceInput() {
                    if (!this.isRecording) {
                        this.startVoiceRecognition();
                    } else {
                        this.stopVoiceRecognition();
                    }
                },

                startVoiceRecognition() {
                    // Ê£ÄÊü•ÊµèËßàÂô®ÊîØÊåÅ
                    if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
                        this.showNotification('ÊÇ®ÁöÑÊµèËßàÂô®‰∏çÊîØÊåÅËØ≠Èü≥ËØÜÂà´ÂäüËÉΩ„ÄÇËØ∑‰ΩøÁî®Chrome„ÄÅEdgeÊàñSafariÊµèËßàÂô®„ÄÇ', 'error');
                        return;
                    }

                    // Ê£ÄÊü•È∫¶ÂÖãÈ£éÊùÉÈôê
                    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
                        navigator.mediaDevices.getUserMedia({ audio: true })
                            .then(() => {
                                this.initSpeechRecognition();
                            })
                            .catch((error) => {
                                console.error('È∫¶ÂÖãÈ£éÊùÉÈôêË¢´ÊãíÁªù:', error);
                                this.showNotification('ËØ∑ÂÖÅËÆ∏ËÆøÈóÆÈ∫¶ÂÖãÈ£é‰ª•‰ΩøÁî®ËØ≠Èü≥ËæìÂÖ•ÂäüËÉΩ', 'error');
                            });
                    } else {
                        this.initSpeechRecognition();
                    }
                },

                initSpeechRecognition() {
                    try {
                        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                        this.speechRecognition = new SpeechRecognition();

                        // ÈÖçÁΩÆËØ≠Èü≥ËØÜÂà´
                        this.speechRecognition.lang = 'zh-CN';
                        this.speechRecognition.continuous = false;
                        this.speechRecognition.interimResults = true; // ÂêØÁî®‰∏≠Èó¥ÁªìÊûú
                        this.speechRecognition.maxAlternatives = 1;

                        // Â∞ùËØï‰ΩøÁî®Êú¨Âú∞ËØ≠Èü≥ËØÜÂà´ÔºàÂ¶ÇÊûúÊîØÊåÅÔºâ
                        if ('webkitSpeechGrammarList' in window) {
                            const grammar = '#JSGF V1.0; grammar commands; public <command> = ÂèëÈÄÅ | Ê∏ÖÁ©∫ | ÂÖ®Â±è | ËÆæÁΩÆ;';
                            const speechRecognitionList = new webkitSpeechGrammarList();
                            speechRecognitionList.addFromString(grammar, 1);
                            this.speechRecognition.grammars = speechRecognitionList;
                        }

                        // ÂºÄÂßãËØÜÂà´‰∫ã‰ª∂
                        this.speechRecognition.onstart = () => {
                            this.isRecording = true;
                            this.showNotification('üé§ ÂºÄÂßãËØ≠Èü≥ËØÜÂà´ÔºåËØ∑ËØ¥ËØù...', 'info');
                            console.log('üé§ ËØ≠Èü≥ËØÜÂà´Â∑≤ÂêØÂä®');
                        };

                        // ËØÜÂà´ÁªìÊûú‰∫ã‰ª∂
                        this.speechRecognition.onresult = (event) => {
                            let transcript = '';
                            let isFinal = false;

                            // Â§ÑÁêÜËØÜÂà´ÁªìÊûú
                            for (let i = event.resultIndex; i < event.results.length; i++) {
                                const result = event.results[i];
                                transcript += result[0].transcript;
                                if (result.isFinal) {
                                    isFinal = true;
                                }
                            }

                            if (isFinal) {
                                // ÊúÄÁªàÁªìÊûú
                                if (transcript.trim()) {
                                    this.currentMessage += transcript;
                                    this.showNotification(`‚úÖ ËØÜÂà´ÂÆåÊàê: "${transcript}"`, 'success');
                                    console.log('‚úÖ ËØ≠Èü≥ËØÜÂà´ÁªìÊûú:', transcript);
                                } else {
                                    this.showNotification('‚ö†Ô∏è Êú™ËØÜÂà´Âà∞ÊúâÊïàËØ≠Èü≥ÔºåËØ∑ÈáçËØï', 'warning');
                                }
                            } else {
                                // ‰∏≠Èó¥ÁªìÊûúÔºàÂÆûÊó∂ÊòæÁ§∫Ôºâ
                                console.log('üîÑ ÂÆûÊó∂ËØÜÂà´:', transcript);
                            }
                        };

                        // ÈîôËØØÂ§ÑÁêÜ
                        this.speechRecognition.onerror = (event) => {
                            console.error('ËØ≠Èü≥ËØÜÂà´ÈîôËØØ:', event.error);
                            this.isRecording = false;

                            let errorMessage = 'ËØ≠Èü≥ËØÜÂà´Â§±Ë¥•';
                            switch (event.error) {
                                case 'no-speech':
                                    errorMessage = 'Êú™Ê£ÄÊµãÂà∞ËØ≠Èü≥ÔºåËØ∑ÈáçËØï';
                                    break;
                                case 'audio-capture':
                                    errorMessage = 'Êó†Ê≥ïËÆøÈóÆÈ∫¶ÂÖãÈ£éÔºåËØ∑Ê£ÄÊü•ËÆæÂ§á';
                                    break;
                                case 'not-allowed':
                                    errorMessage = 'È∫¶ÂÖãÈ£éÊùÉÈôêË¢´ÊãíÁªùÔºåËØ∑ÂÖÅËÆ∏ËÆøÈóÆ';
                                    break;
                                case 'network':
                                    errorMessage = 'ÁΩëÁªúÈîôËØØÔºåÂ∞ùËØï‰ΩøÁî®Á¶ªÁ∫øÊ®°Âºè';
                                    // Â∞ùËØïÁ¶ªÁ∫øËØ≠Èü≥ËØÜÂà´
                                    this.tryOfflineVoiceRecognition();
                                    return; // ‰∏çÊòæÁ§∫ÈîôËØØÔºåÂ∞ùËØïÁ¶ªÁ∫øÊ®°Âºè
                                    break;
                                case 'service-not-allowed':
                                    errorMessage = 'ËØ≠Èü≥ËØÜÂà´ÊúçÂä°‰∏çÂèØÁî®';
                                    break;
                                default:
                                    errorMessage = `ËØ≠Èü≥ËØÜÂà´ÈîôËØØ: ${event.error}`;
                            }

                            this.showNotification(errorMessage, 'error');
                        };

                        // ËØÜÂà´ÁªìÊùü‰∫ã‰ª∂
                        this.speechRecognition.onend = () => {
                            this.isRecording = false;
                            console.log('üîö ËØ≠Èü≥ËØÜÂà´Â∑≤ÁªìÊùü');
                        };

                        // ÂêØÂä®ËØÜÂà´
                        this.speechRecognition.start();

                    } catch (error) {
                        console.error('ÂàùÂßãÂåñËØ≠Èü≥ËØÜÂà´Â§±Ë¥•:', error);
                        this.showNotification('ËØ≠Èü≥ËØÜÂà´ÂàùÂßãÂåñÂ§±Ë¥•: ' + error.message, 'error');
                        this.isRecording = false;
                    }
                },

                stopVoiceRecognition() {
                    if (this.speechRecognition) {
                        this.speechRecognition.stop();
                        this.isRecording = false;
                        this.showNotification('üõë ËØ≠Èü≥ËØÜÂà´Â∑≤ÂÅúÊ≠¢', 'info');
                        console.log('üõë ÊâãÂä®ÂÅúÊ≠¢ËØ≠Èü≥ËØÜÂà´');
                    }
                },

                // ËØ≠Èü≥ÂëΩ‰ª§Â§ÑÁêÜ
                processVoiceCommand(transcript) {
                    const command = transcript.toLowerCase().trim();

                    // ËØ≠Èü≥ÂëΩ‰ª§Êò†Â∞Ñ
                    const voiceCommands = {
                        'ÂèëÈÄÅ': () => this.sendMessage(),
                        'Ê∏ÖÁ©∫': () => this.clearChat(),
                        'ÂÖ®Â±è': () => this.toggleFullscreen(),
                        'ËÆæÁΩÆ': () => this.toggleAdvancedPanel(),
                        'Êï∞Â≠¶Ê®°Âºè': () => this.toggleMathInput(),
                        '‰øùÂ≠ò‰ºöËØù': () => this.saveCurrentSession(),
                        'ÂØºÂá∫ÂØπËØù': () => this.exportChat()
                    };

                    // Ê£ÄÊü•ÊòØÂê¶‰∏∫ËØ≠Èü≥ÂëΩ‰ª§
                    for (const [cmd, action] of Object.entries(voiceCommands)) {
                        if (command.includes(cmd)) {
                            action();
                            this.showNotification(`‚ú® ÊâßË°åËØ≠Èü≥ÂëΩ‰ª§: ${cmd}`, 'success');
                            return true;
                        }
                    }

                    return false;
                },

                // Á¶ªÁ∫øËØ≠Èü≥ËØÜÂà´Â∞ùËØï
                tryOfflineVoiceRecognition() {
                    console.log('üîÑ Â∞ùËØïÁ¶ªÁ∫øËØ≠Èü≥ËØÜÂà´Ê®°Âºè');
                    this.showNotification('üîÑ ÂàáÊç¢Âà∞Á¶ªÁ∫øÊ®°ÂºèÔºåÂäüËÉΩÂèØËÉΩÂèóÈôê', 'warning');

                    // ÁÆÄÂåñÁöÑÁ¶ªÁ∫øÊ®°Âºè - ‰ΩøÁî®ÈîÆÁõòËæìÂÖ•Ê®°Êãü
                    const offlineInput = prompt('Á¶ªÁ∫øÊ®°ÂºèÔºöËØ∑ËæìÂÖ•ÊÇ®ÁöÑÈóÆÈ¢ò');
                    if (offlineInput && offlineInput.trim()) {
                        this.currentMessage += offlineInput;
                        this.showNotification('‚úÖ Á¶ªÁ∫øËæìÂÖ•ÂÆåÊàê', 'success');
                    }

                    this.isRecording = false;
                },

                // ËØ≠Èü≥ËæìÂÖ•Â¢ûÂº∫ÂäüËÉΩ
                enhanceVoiceInput() {
                    // Ê∑ªÂä†ËØ≠Èü≥ËæìÂÖ•Âø´Êç∑ÈîÆ
                    document.addEventListener('keydown', (event) => {
                        // Ctrl + Shift + V ÂêØÂä®ËØ≠Èü≥ËæìÂÖ•
                        if (event.ctrlKey && event.shiftKey && event.key === 'V') {
                            event.preventDefault();
                            this.toggleVoiceInput();
                        }

                        // Á©∫Ê†ºÈîÆÂÅúÊ≠¢ÂΩïÈü≥ÔºàÂΩìÊ≠£Âú®ÂΩïÈü≥Êó∂Ôºâ
                        if (event.code === 'Space' && this.isRecording) {
                            event.preventDefault();
                            this.stopVoiceRecognition();
                        }
                    });

                    // Ê∑ªÂä†ËØ≠Èü≥ËæìÂÖ•ÊèêÁ§∫
                    this.showNotification('üí° ËØ≠Èü≥ËæìÂÖ•ÊèêÁ§∫: Ctrl+Shift+V Âø´ÈÄüÂêØÂä®ÔºåÁ©∫Ê†ºÈîÆÂÅúÊ≠¢ÂΩïÈü≥', 'info');
                },

                // Êô∫ËÉΩËØùÈ¢òÂàÜÊûê
                analyzeUserQuestion(question) {
                    const topics = {
                        '‰ºØÂä™Âà©': '‰ºØÂä™Âà©ÊñπÁ®ã',
                        'Èõ∑ËØ∫': 'Èõ∑ËØ∫Êï∞',
                        'Â±ÇÊµÅ': 'ÊµÅÂä®Áä∂ÊÄÅ',
                        'ÊπçÊµÅ': 'ÊµÅÂä®Áä∂ÊÄÅ',
                        'Á≤òÊÄß': 'ÊµÅ‰ΩìÊÄßË¥®',
                        'ËæπÁïåÂ±Ç': 'ËæπÁïåÂ±ÇÁêÜËÆ∫',
                        'Ê∂°Èáè': 'Ê∂°ÈáèÁêÜËÆ∫',
                        'ËøûÁª≠ÊÄß': 'ËøûÁª≠ÊÄßÊñπÁ®ã',
                        'NSÊñπÁ®ã': 'Navier-StokesÊñπÁ®ã',
                        'ÂéãÂäõ': 'ÂéãÂäõÂàÜÊûê',
                        'ÈÄüÂ∫¶': 'ÈÄüÂ∫¶ÂàÜÂ∏É',
                        'ÈòªÂäõ': 'ÈòªÂäõÂàÜÊûê',
                        'ÂçáÂäõ': 'ÂçáÂäõÁêÜËÆ∫'
                    };

                    for (const [keyword, topic] of Object.entries(topics)) {
                        if (question.includes(keyword)) {
                            this.currentTopic = topic;
                            this.updateLearningPath(topic);
                            break;
                        }
                    }
                },

                // Êõ¥Êñ∞Â≠¶‰π†Ë∑ØÂæÑ
                updateLearningPath(topic) {
                    if (!this.learningPath.includes(topic)) {
                        this.learningPath.push(topic);

                        // Êé®ËçêÁõ∏ÂÖ≥ËØùÈ¢ò
                        const recommendations = this.getTopicRecommendations(topic);
                        if (recommendations.length > 0) {
                            this.showNotification(`üí° Áõ∏ÂÖ≥ËØùÈ¢òÊé®Ëçê: ${recommendations.join(', ')}`, 'info');
                        }
                    }
                },

                // Ëé∑ÂèñËØùÈ¢òÊé®Ëçê
                getTopicRecommendations(currentTopic) {
                    const topicMap = {
                        '‰ºØÂä™Âà©ÊñπÁ®ã': ['ËøûÁª≠ÊÄßÊñπÁ®ã', 'ÂéãÂäõÂàÜÊûê'],
                        'Èõ∑ËØ∫Êï∞': ['Â±ÇÊµÅÊπçÊµÅ', 'ËæπÁïåÂ±ÇÁêÜËÆ∫'],
                        'ÊµÅÂä®Áä∂ÊÄÅ': ['Èõ∑ËØ∫Êï∞', 'ËæπÁïåÂ±ÇÁêÜËÆ∫'],
                        'Navier-StokesÊñπÁ®ã': ['Ê∂°ÈáèÁêÜËÆ∫', 'ËæπÁïåÂ±ÇÁêÜËÆ∫'],
                        'ËæπÁïåÂ±ÇÁêÜËÆ∫': ['ÈòªÂäõÂàÜÊûê', 'ÂçáÂäõÁêÜËÆ∫']
                    };

                    return topicMap[currentTopic] || [];
                },

                // Êô∫ËÉΩÊ®°ÂûãÈÄâÊã©Âô®
                selectOptimalModel(question) {
                    const lowerQuestion = question.toLowerCase();
                    console.log('üß† Êô∫ËÉΩÊ®°ÂûãÈÄâÊã© - ÂàÜÊûêÈóÆÈ¢ò:', question);

                    // Ê£ÄÊµãÊòØÂê¶Ê∂âÂèäÊï∞Â≠¶Êé®ÂØº
                    const derivationKeywords = [
                        'Êé®ÂØº', 'ËØÅÊòé', 'Ê±ÇËß£', 'ËÆ°ÁÆó', 'Ëß£Êûê', 'ÂàÜÊûê',
                        'Â¶Ç‰ΩïÂæóÂà∞', 'ÊÄé‰πàÊé®Âá∫', '‰∏∫‰ªÄ‰πàÁ≠â‰∫é', 'Ê≠•È™§',
                        'ÂÖ¨ÂºèÊé®ÂØº', 'Êï∞Â≠¶Êé®ÂØº', 'ÁêÜËÆ∫Êé®ÂØº',
                        'derive', 'proof', 'calculate', 'solve',
                        '‚àÇ', '‚àá', '‚à´', 'ÁßØÂàÜ', 'ÂæÆÂàÜ', 'ÂÅèÂØºÊï∞',
                        'Ê¨ßÊãâÊñπÁ®ã', 'Á∫≥Áª¥-ÊñØÊâòÂÖãÊñØ', '‰ºØÂä™Âà©',
                        'ËøûÁª≠ÊÄßÊñπÁ®ã', 'Âä®ÈáèÊñπÁ®ã', 'ËÉΩÈáèÊñπÁ®ã'
                    ];

                    // Ê£ÄÊµãÊòØÂê¶Ê∂âÂèäÂ§çÊùÇÊï∞Â≠¶
                    const complexMathKeywords = [
                        'ÂêëÈáè', 'Ê¢ØÂ∫¶', 'Êï£Â∫¶', 'ÊóãÂ∫¶', 'ÊãâÊôÆÊãâÊñØ',
                        'Èõ∑ËØ∫Êï∞', 'È©¨Ëµ´Êï∞', 'ÊôÆÊúóÁâπÊï∞',
                        'ÊπçÊµÅ', 'Â±ÇÊµÅ', 'ËæπÁïåÂ±Ç',
                        'ÊúâÈôêÂÖÉ', 'Êï∞ÂÄºÊ®°Êãü', 'CFD'
                    ];

                    const hasDerivation = derivationKeywords.some(keyword =>
                        lowerQuestion.includes(keyword)
                    );

                    const hasComplexMath = complexMathKeywords.some(keyword =>
                        lowerQuestion.includes(keyword)
                    );

                    console.log('üîç ÂÖ≥ÈîÆËØçÊ£ÄÊµãÁªìÊûú:', {
                        hasDerivation,
                        hasComplexMath,
                        matchedDerivation: derivationKeywords.filter(k => lowerQuestion.includes(k)),
                        matchedComplexMath: complexMathKeywords.filter(k => lowerQuestion.includes(k))
                    });

                    if (hasDerivation || hasComplexMath) {
                        console.log('üéØ ÈÄâÊã©deepseek-r1Ê®°ÂûãËøõË°åÊï∞Â≠¶Êé®ÂØº');
                        // ‰ΩøÁî®deepseek-r1ËøõË°åÊï∞Â≠¶Êé®ÂØº
                        const config = {
                            strategy: 'reasoning',
                            features: ['reasoning', 'math', 'derivation'],
                            maxTokens: 2000,
                            temperature: 0.3,
                            preferredModel: 'deepseek-r1',
                            systemPrompt: `‰Ω†ÊòØ‰∏Ä‰ΩçËµÑÊ∑±ÁöÑÊµÅ‰ΩìÂäõÂ≠¶ÊïôÊéàÔºåÊìÖÈïøÊï∞Â≠¶Êé®ÂØºÂíåÁêÜËÆ∫ÂàÜÊûê„ÄÇËØ∑ËØ¶ÁªÜÂõûÁ≠îÂ≠¶ÁîüÁöÑÈóÆÈ¢òÔºåÂåÖÊã¨Ôºö

1. **ÁêÜËÆ∫Âü∫Á°Ä**ÔºöÁõ∏ÂÖ≥ÁöÑÂü∫Êú¨ÂéüÁêÜÂíåÂÅáËÆæ
2. **Êï∞Â≠¶Êé®ÂØº**ÔºöÂÆåÊï¥ÁöÑÊé®ÂØºËøáÁ®ãÔºåÊØè‰∏ÄÊ≠•ÈÉΩË¶ÅÊ∏ÖÊô∞
3. **ÂÖ¨ÂºèËß£Èáä**ÔºöÊØè‰∏™Á¨¶Âè∑ÂíåÈ°πÁöÑÁâ©ÁêÜÊÑè‰πâ
4. **ÁªìÊûúÂàÜÊûê**ÔºöÊé®ÂØºÁªìÊûúÁöÑÁâ©ÁêÜÊÑè‰πâÂíåÂ∫îÁî®

ËØ∑‰ΩøÁî®LaTeXËØ≠Ê≥ïË°®Á§∫Êï∞Â≠¶ÂÖ¨ÂºèÔºåÁî®$$ÂåÖÂõ¥ÊòæÁ§∫ÂÖ¨ÂºèÔºåÁî®$ÂåÖÂõ¥ÂÜÖËÅîÂÖ¨Âºè„ÄÇ
‰æãÂ¶ÇÔºö$$\\frac{\\partial \\vec{v}}{\\partial t} + (\\vec{v} \\cdot \\nabla)\\vec{v} = -\\frac{1}{\\rho}\\nabla p + \\vec{g}$$

Á°Æ‰øùÊé®ÂØºËøáÁ®ã‰∏•Ë∞®„ÄÅÈÄªËæëÊ∏ÖÊô∞Ôºå‰æø‰∫éÂ≠¶ÁîüÁêÜËß£„ÄÇ`
                        };
                        console.log('üìã deepseek-r1ÈÖçÁΩÆ:', config);
                        return config;
                    } else {
                        console.log('üéØ ÈÄâÊã©ÈÄöÁî®Ê®°ÂûãËøõË°åÊ¶ÇÂøµËß£Èáä');
                        // ‰ΩøÁî®ÈÄöÁî®Ê®°ÂûãËøõË°åÊ¶ÇÂøµËß£Èáä
                        const config = {
                            strategy: 'balanced',
                            features: ['chat', 'explanation'],
                            maxTokens: 1000,
                            temperature: 0.7,
                            preferredModel: 'auto',
                            systemPrompt: `‰Ω†ÊòØ‰∏Ä‰∏™‰∏ì‰∏öÁöÑÊµÅ‰ΩìÂäõÂ≠¶ÊïôÂ∏àÔºåËØ∑Áî®ÁÆÄÊ¥ÅÊòé‰∫ÜÁöÑÊñπÂºèÂõûÁ≠îÂ≠¶ÁîüÈóÆÈ¢ò„ÄÇÂõûÁ≠îË¶ÅÂåÖÂê´Ôºö

1. **Ê†∏ÂøÉÊ¶ÇÂøµËß£Èáä**ÔºöÁî®ÈÄö‰øóÊòìÊáÇÁöÑËØ≠Ë®ÄËß£Èáä
2. **ÂøÖË¶ÅÁöÑÂÖ¨Âºè**ÔºöÂ¶ÇÊûúÈÄÇÁî®ÔºåÁî®LaTeXËØ≠Ê≥ïË°®Á§∫
3. **ÂÆûÈôÖÂ∫îÁî®‰∏æ‰æã**ÔºöËÅîÁ≥ªÂÆûÈôÖÁîüÊ¥ªÊàñÂ∑•Á®ãÂ∫îÁî®
4. **Â≠¶‰π†Âª∫ËÆÆ**ÔºöÁªôÂá∫Ëøõ‰∏ÄÊ≠•Â≠¶‰π†ÁöÑÊñπÂêë

ËØ∑‰ΩøÁî®LaTeXËØ≠Ê≥ïË°®Á§∫Êï∞Â≠¶ÂÖ¨ÂºèÔºåÁî®$$ÂåÖÂõ¥ÊòæÁ§∫ÂÖ¨ÂºèÔºåÁî®$ÂåÖÂõ¥ÂÜÖËÅîÂÖ¨Âºè„ÄÇ
ËØ∑Áî®HTMLÊ†ºÂºèÂõûÂ§çÔºå‰ΩøÁî®<strong>„ÄÅ<br>Á≠âÊ†áÁ≠æÔºåËÆ©ÂÜÖÂÆπÊòìËØªÊòìÊáÇ„ÄÇ`
                        };
                        console.log('üìã ÈÄöÁî®Ê®°ÂûãÈÖçÁΩÆ:', config);
                        return config;
                    }
                },

                // Êô∫ËÉΩÂõûÂ§çÁîüÊàêÔºàÂ∑≤Âà†Èô§ÈáçÂ§çÊñπÊ≥ïÔºå‰ΩøÁî®‰∏äÈù¢ÁöÑ‰∏ªË¶ÅÊñπÊ≥ïÔºâ

                // Â§áÁî®ÂõûÂ§çÁ≥ªÁªü
                generateFallbackResponse(userMessage) {
                    const responses = [
                        'ËøôÊòØ‰∏Ä‰∏™ÂæàÂ•ΩÁöÑÊµÅ‰ΩìÂäõÂ≠¶ÈóÆÈ¢òÔºÅËÆ©ÊàëÊù•‰∏∫ÊÇ®ËØ¶ÁªÜËß£Á≠î...',
                        'Ê†πÊçÆÊµÅ‰ΩìÂäõÂ≠¶ÂéüÁêÜÔºåÊàë‰ª¨ÂèØ‰ª•‰ªé‰ª•‰∏ãÂá†‰∏™ÊñπÈù¢Êù•ÂàÜÊûê...',
                        'Ëøô‰∏™ÈóÆÈ¢òÊ∂âÂèäÂà∞ÊµÅ‰ΩìÂäõÂ≠¶ÁöÑÊ†∏ÂøÉÊ¶ÇÂøµÔºåËÆ©Êàë‰∏∫ÊÇ®ÈÄêÊ≠•Ëß£Èáä...',
                        'Âú®ÊµÅ‰ΩìÂäõÂ≠¶‰∏≠ÔºåËøôÊòØ‰∏Ä‰∏™ÁªèÂÖ∏ÈóÆÈ¢ò„ÄÇÊàë‰ª¨ÂèØ‰ª•ËøôÊ†∑ÁêÜËß£...'
                    ];

                    const randomResponse = responses[Math.floor(Math.random() * responses.length)];

                    // Ê†πÊçÆËØùÈ¢òÊ∑ªÂä†ÂÖ∑‰ΩìÂÜÖÂÆπ
                    if (this.currentTopic) {
                        return `${randomResponse}\n\nÂÖ≥‰∫é${this.currentTopic}ÔºåËøôÈáåÊúâ‰∏Ä‰∫õÂÖ≥ÈîÆË¶ÅÁÇπÈúÄË¶ÅÊ≥®ÊÑè...`;
                    }

                    return randomResponse;
                },

                // Êï∞Â≠¶ËæìÂÖ•ÂäüËÉΩ
                toggleMathInput() {
                    this.mathInputMode = !this.mathInputMode;
                    if (this.mathInputMode) {
                        this.showNotification('Êï∞Â≠¶ÂÖ¨ÂºèËæìÂÖ•Ê®°ÂºèÂ∑≤ÂºÄÂêØ', 'info');
                    }
                },

                insertMathSymbol(latex) {
                    const textarea = document.querySelector('.message-input');
                    const start = textarea.selectionStart;
                    const end = textarea.selectionEnd;

                    const before = this.currentMessage.substring(0, start);
                    const after = this.currentMessage.substring(end);

                    this.currentMessage = before + '$' + latex + '$' + after;

                    // ËÆæÁΩÆÂÖâÊ†á‰ΩçÁΩÆ
                    this.$nextTick(() => {
                        const newPos = start + latex.length + 2;
                        textarea.setSelectionRange(newPos, newPos);
                        textarea.focus();
                    });
                },

                insertMathTemplate(latex) {
                    const textarea = document.querySelector('.message-input');
                    const start = textarea.selectionStart;
                    const end = textarea.selectionEnd;

                    const before = this.currentMessage.substring(0, start);
                    const after = this.currentMessage.substring(end);

                    this.currentMessage = before + '$$' + latex + '$$' + after;

                    this.$nextTick(() => {
                        const newPos = start + latex.length + 4;
                        textarea.setSelectionRange(newPos, newPos);
                        textarea.focus();
                    });
                },

                insertTemplate() {
                    const templates = [
                        'ËØ∑Ëß£Èáä‰∏Ä‰∏ã',
                        'ËØ∑Êé®ÂØº',
                        'ËØ∑ËÆ°ÁÆó',
                        'ËØ∑ÂàÜÊûê',
                        'ËØ∑ÊØîËæÉ',
                        'ËØ∑‰∏æ‰æãËØ¥Êòé'
                    ];

                    // ÁÆÄÂçïÁöÑÊ®°ÊùøÈÄâÊã©ÔºàÂèØ‰ª•ÂêéÁª≠Êîπ‰∏∫‰∏ãÊãâËèúÂçïÔºâ
                    const template = templates[Math.floor(Math.random() * templates.length)];
                    this.currentMessage = template + this.currentMessage;
                },

                // È´òÁ∫ßÂäüËÉΩÈù¢Êùø
                toggleAdvancedPanel() {
                    this.showAdvancedPanel = !this.showAdvancedPanel;
                },

                // ‰ºöËØùÁÆ°ÁêÜÂäüËÉΩ
                saveCurrentSession() {
                    const session = {
                        id: Date.now(),
                        name: `‰ºöËØù ${new Date().toLocaleString()}`,
                        messages: [...this.messages],
                        timestamp: new Date(),
                        stats: { ...this.sessionStats }
                    };

                    this.chatSessions.push(session);
                    this.currentSessionId = session.id;

                    // ‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÇ®
                    localStorage.setItem('aiChatSessions', JSON.stringify(this.chatSessions));
                    this.showNotification('‰ºöËØùÂ∑≤‰øùÂ≠ò', 'success');
                },

                loadSessionHistory() {
                    try {
                        const saved = localStorage.getItem('aiChatSessions');
                        if (saved) {
                            this.chatSessions = JSON.parse(saved);
                            this.showNotification(`Â∑≤Âä†ËΩΩ ${this.chatSessions.length} ‰∏™ÂéÜÂè≤‰ºöËØù`, 'info');
                        }
                    } catch (error) {
                        console.error('Âä†ËΩΩ‰ºöËØùÂéÜÂè≤Â§±Ë¥•:', error);
                        this.showNotification('Âä†ËΩΩ‰ºöËØùÂéÜÂè≤Â§±Ë¥•', 'error');
                    }
                },

                exportChat() {
                    const chatData = {
                        messages: this.messages,
                        timestamp: new Date(),
                        stats: this.sessionStats
                    };

                    const blob = new Blob([JSON.stringify(chatData, null, 2)], { type: 'application/json' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `AIÂØπËØùËÆ∞ÂΩï_${new Date().toISOString().slice(0, 10)}.json`;
                    a.click();
                    URL.revokeObjectURL(url);

                    this.showNotification('ÂØπËØùËÆ∞ÂΩïÂ∑≤ÂØºÂá∫', 'success');
                },

                clearAllHistory() {
                    if (confirm('Á°ÆÂÆöË¶ÅÊ∏ÖÁ©∫ÊâÄÊúâÂéÜÂè≤ËÆ∞ÂΩïÂêóÔºüÊ≠§Êìç‰Ωú‰∏çÂèØÊí§ÈîÄ„ÄÇ')) {
                        this.chatSessions = [];
                        localStorage.removeItem('aiChatSessions');
                        this.showNotification('ÊâÄÊúâÂéÜÂè≤ËÆ∞ÂΩïÂ∑≤Ê∏ÖÁ©∫', 'success');
                    }
                },

                formatDuration(ms) {
                    const seconds = Math.floor(ms / 1000);
                    const minutes = Math.floor(seconds / 60);
                    const hours = Math.floor(minutes / 60);

                    if (hours > 0) {
                        return `${hours}Â∞èÊó∂${minutes % 60}ÂàÜÈíü`;
                    } else if (minutes > 0) {
                        return `${minutes}ÂàÜÈíü${seconds % 60}Áßí`;
                    } else {
                        return `${seconds}Áßí`;
                    }
                },

                // È´òÁ∫ßÂäüËÉΩÈù¢Êùø
                toggleAdvancedPanel() {
                    this.showAdvancedPanel = !this.showAdvancedPanel;
                    if (this.showAdvancedPanel) {
                        this.showNotification('È´òÁ∫ßÂäüËÉΩÈù¢ÊùøÂ∑≤ÊâìÂºÄ', 'info');
                    }
                },

                // ÂàùÂßãÂåñÊô∫ËÉΩAIÁ≥ªÁªü
                async initSmartAI() {
                    try {
                        if (window.SmartModelSelector && window.AppConfig) {
                            console.log('üîß ÂàùÂßãÂåñÊô∫ËÉΩAIÁ≥ªÁªü...');
                            const smartConfig = window.AppConfig.api.smartAI;

                            window.smartModelSelectorInstance = await window.SmartModelSelector.init({
                                apiKey: smartConfig.apiKey,
                                apiUrl: smartConfig.endpoint,
                                defaultStrategy: smartConfig.defaultStrategy,
                                maxRetries: smartConfig.maxRetries,
                                requestTimeout: smartConfig.requestTimeout,
                                skipAvailabilityCheck: smartConfig.skipAvailabilityCheck
                            });

                            console.log('‚úÖ Êô∫ËÉΩAIÁ≥ªÁªüÂàùÂßãÂåñÂÆåÊàê');
                        }
                    } catch (error) {
                        console.warn('‚ö†Ô∏è Êô∫ËÉΩAIÁ≥ªÁªüÂàùÂßãÂåñÂ§±Ë¥•:', error);
                    }
                },

                // Â§ÑÁêÜÊï∞Â≠¶ÂÖ¨Âºè - Á∫ØCSSÊñπÊ°à
                processMathFormulas() {
                    console.log('üî¢ Â§ÑÁêÜÊï∞Â≠¶ÂÖ¨Âºè - ‰ΩøÁî®Á∫ØCSSÊñπÊ°à');

                    // Â§ÑÁêÜÁü•ËØÜÂ∫ì‰∏≠ÁöÑÂÖ¨ÂºèÂÆπÂô®
                    document.querySelectorAll('.math-formula').forEach(el => {
                        this.processFormulaElement(el);
                    });

                    // Â§ÑÁêÜÊ∂àÊÅØÂÜÖÂÆπ‰∏≠ÁöÑÂÖ¨Âºè
                    document.querySelectorAll('.message-content').forEach(el => {
                        this.processFormulaElement(el);
                    });

                    console.log('‚úÖ Êï∞Â≠¶ÂÖ¨ÂºèÂ§ÑÁêÜÂÆåÊàê');
                },

                // Â§ÑÁêÜÂçï‰∏™ÂÖÉÁ¥†‰∏≠ÁöÑÂÖ¨Âºè
                processFormulaElement(el) {
                    if (!el) return;
                    let content = el.innerHTML;

                    // Ê£ÄÊü•ÊòØÂê¶ÂåÖÂê´LaTeXÂÖ¨Âºè
                    const hasLatex = content.includes('\\') || content.includes('$$') || content.includes('$');
                    if (!hasLatex) {
                        return;
                    }

                    console.log('üî¢ Â§ÑÁêÜLaTeXÂÖ¨Âºè:', content.substring(0, 100) + '...');

                    // È¶ñÂÖàÂ§ÑÁêÜ$$ÂåÖÂõ¥ÁöÑÊòæÁ§∫ÂÖ¨Âºè
                    content = content.replace(/\$\$([\s\S]*?)\$\$/g, (match, formula) => {
                        console.log('üìê Â§ÑÁêÜÊòæÁ§∫ÂÖ¨Âºè:', formula);
                        return `<div class="math-display">${formula}</div>`;
                    });

                    // Â§ÑÁêÜ$ÂåÖÂõ¥ÁöÑÂÜÖËÅîÂÖ¨Âºè
                    content = content.replace(/\$([^$\n]+)\$/g, (match, formula) => {
                        console.log('üìè Â§ÑÁêÜÂÜÖËÅîÂÖ¨Âºè:', formula);
                        return `<span class="math-inline">${formula}</span>`;
                    });

                    // Â§ÑÁêÜÂ∏∏ËßÅÁöÑLaTeXÁ¨¶Âè∑ÂíåÁâπÊÆäÂ≠óÁ¨¶
                    content = content
                            // ÂàÜÊï∞
                            .replace(/\\frac\{([^}]+)\}\{([^}]+)\}/g, '<span class="fraction"><span class="numerator">$1</span><span class="denominator">$2</span></span>')
                            // Âπ≥ÊñπÊ†π
                            .replace(/\\sqrt\{([^}]+)\}/g, '<span class="sqrt">‚àö<span class="sqrt-content">$1</span></span>')
                            // ÁßØÂàÜÁ¨¶Âè∑
                            .replace(/\\int/g, '<span class="integral math-symbol">‚à´</span>')
                            .replace(/\\oint/g, '<span class="integral math-symbol">‚àÆ</span>')
                            .replace(/\\iint/g, '<span class="integral math-symbol">‚à¨</span>')
                            .replace(/\\iiint/g, '<span class="integral math-symbol">‚à≠</span>')
                            // Ê±ÇÂíåÁ¨¶Âè∑
                            .replace(/\\sum/g, '<span class="summation math-symbol">‚àë</span>')
                            .replace(/\\prod/g, '<span class="summation math-symbol">‚àè</span>')
                            // Â∏åËÖäÂ≠óÊØç
                            .replace(/\\rho/g, '<span class="greek">œÅ</span>')
                            .replace(/\\mu/g, '<span class="greek">Œº</span>')
                            .replace(/\\nu/g, '<span class="greek">ŒΩ</span>')
                            .replace(/\\alpha/g, '<span class="greek">Œ±</span>')
                            .replace(/\\beta/g, '<span class="greek">Œ≤</span>')
                            .replace(/\\gamma/g, '<span class="greek">Œ≥</span>')
                            .replace(/\\delta/g, '<span class="greek">Œ¥</span>')
                            .replace(/\\epsilon/g, '<span class="greek">Œµ</span>')
                            .replace(/\\theta/g, '<span class="greek">Œ∏</span>')
                            .replace(/\\lambda/g, '<span class="greek">Œª</span>')
                            .replace(/\\pi/g, '<span class="greek">œÄ</span>')
                            .replace(/\\sigma/g, '<span class="greek">œÉ</span>')
                            .replace(/\\tau/g, '<span class="greek">œÑ</span>')
                            .replace(/\\phi/g, '<span class="greek">œÜ</span>')
                            .replace(/\\omega/g, '<span class="greek">œâ</span>')
                            .replace(/\\Gamma/g, '<span class="greek">Œì</span>')
                            .replace(/\\Delta/g, '<span class="greek">Œî</span>')
                            .replace(/\\Theta/g, '<span class="greek">Œò</span>')
                            .replace(/\\Lambda/g, '<span class="greek">Œõ</span>')
                            .replace(/\\Pi/g, '<span class="greek">Œ†</span>')
                            .replace(/\\Sigma/g, '<span class="greek">Œ£</span>')
                            .replace(/\\Phi/g, '<span class="greek">Œ¶</span>')
                            .replace(/\\Omega/g, '<span class="greek">Œ©</span>')
                            // Êï∞Â≠¶Á¨¶Âè∑
                            .replace(/\\nabla/g, '‚àá')
                            .replace(/\\partial/g, '‚àÇ')
                            .replace(/\\infty/g, '‚àû')
                            .replace(/\\approx/g, '‚âà')
                            .replace(/\\neq/g, '‚â†')
                            .replace(/\\leq/g, '‚â§')
                            .replace(/\\geq/g, '‚â•')
                            .replace(/\\cdot/g, '¬∑')
                            .replace(/\\times/g, '√ó')
                            .replace(/\\div/g, '√∑')
                            .replace(/\\pm/g, '¬±')
                            .replace(/\\mp/g, '‚àì')
                            .replace(/\\in/g, '‚àà')
                            .replace(/\\notin/g, '‚àâ')
                            .replace(/\\subset/g, '‚äÇ')
                            .replace(/\\supset/g, '‚äÉ')
                            .replace(/\\cap/g, '‚à©')
                            .replace(/\\cup/g, '‚à™')
                            .replace(/\\forall/g, '‚àÄ')
                            .replace(/\\exists/g, '‚àÉ')
                            .replace(/\\rightarrow/g, '‚Üí')
                            .replace(/\\leftarrow/g, '‚Üê')
                            .replace(/\\leftrightarrow/g, '‚Üî')
                            .replace(/\\Rightarrow/g, '‚áí')
                            .replace(/\\Leftarrow/g, '‚áê')
                            .replace(/\\Leftrightarrow/g, '‚áî')
                            // ÂêëÈáè - Êô∫ËÉΩÊ†∑ÂºèÈÄâÊã©
                            .replace(/\\vec\{([^}]+)\}/g, (match, content) => {
                                const className = content.length === 1 ? 'vector single-letter' : 'vector multi-letter';
                                return `<span class="${className}">${content}</span>`;
                            })
                            // Â§ÑÁêÜÂ∑≤ÊúâÁöÑÂêëÈáèÁ¨¶Âè∑
                            .replace(/([a-zA-Z]+)‚Éó/g, (match, content) => {
                                const className = content.length === 1 ? 'vector single-letter' : 'vector multi-letter';
                                return `<span class="${className}">${content}</span>`;
                            })
                            // Â§ÑÁêÜÂçïÁã¨ÁöÑÂêëÈáèÁ¨¶Âè∑
                            .replace(/([a-zA-Z])\s*‚Üí/g, '<span class="vector single-letter">$1</span>')
                            // ‰∏ä‰∏ãÊ†á
                            .replace(/\^(\d+)/g, '<sup>$1</sup>')
                            .replace(/_(\d+)/g, '<sub>$1</sub>')
                            .replace(/\^{([^}]+)}/g, '<sup>$1</sup>')
                            .replace(/_{([^}]+)}/g, '<sub>$1</sub>')
                            // Ê∏ÖÁêÜÊñπÊ°ÜÁ¨¶Âè∑ÔºàÂèØËÉΩÊòØÁºñÁ†ÅÈóÆÈ¢òÔºâ
                            .replace(/‚ñ°/g, '')
                            .replace(/\uFFFD/g, '') // ÊõøÊç¢Â≠óÁ¨¶
                            // ÁßªÈô§$$Á¨¶Âè∑
                            .replace(/\$\$/g, '');

                    el.innerHTML = content;

                    // Âè™ÂØπÂÖ¨ÂºèÂÆπÂô®ËÆæÁΩÆÊòæÁ§∫Ê†∑Âºè
                    if (el.classList.contains('math-formula')) {
                        el.style.display = 'block';
                        el.style.visibility = 'visible';
                    }
                }
            },

            mounted() {
                console.log('üöÄ VueÂ∫îÁî®Â∑≤ÊåÇËΩΩ');

                // Á´ãÂç≥ÊòæÁ§∫Ê¨¢ËøéÊ∂àÊÅØ
                this.showNotification('AIÂ≠¶‰π†Âä©ÊâãÂ∑≤Â∞±Áª™ÔºÅ', 'success');

                // Ê∑ªÂä†ÈîÆÁõò‰∫ã‰ª∂ÁõëÂê¨
                document.addEventListener('keydown', this.handleKeyboard);

                // ÂºÇÊ≠•ÂàùÂßãÂåñÂÖ∂‰ªñÂäüËÉΩÔºà‰∏çÈòªÂ°ûÁïåÈù¢Ôºâ
                setTimeout(() => {
                    this.initSmartAI().catch(error => {
                        console.warn('AIÁ≥ªÁªüÂàùÂßãÂåñÂ§±Ë¥•:', error);
                    });
                    this.processMathFormulas(); // Â§ÑÁêÜÊï∞Â≠¶ÂÖ¨Âºè
                    this.enhanceVoiceInput(); // ÂàùÂßãÂåñËØ≠Èü≥ËæìÂÖ•Â¢ûÂº∫ÂäüËÉΩ
                }, 100);

                console.log('ü§ñ AIÂ≠¶‰π†Âä©ÊâãÂ∑≤ÂêØÂä®');
            },

            beforeUnmount() {
                // Ê∏ÖÁêÜ‰∫ã‰ª∂ÁõëÂê¨Âô®
                document.removeEventListener('keydown', this.handleKeyboard);
                document.body.style.overflow = '';
            }
        });

        // Á´ãÂç≥ÈöêËóèÂä†ËΩΩÁïåÈù¢ÁöÑÁ¥ßÊÄ•Êé™ÊñΩ
        setTimeout(() => {
            const loadingOverlay = document.querySelector('.loading-overlay');
            if (loadingOverlay) {
                console.log('üö® Á¥ßÊÄ•ÈöêËóèÂä†ËΩΩÁïåÈù¢');
                loadingOverlay.style.display = 'none';
            }
        }, 2000); // 2ÁßíÂêéÂº∫Âà∂ÈöêËóè

        // ÊåÇËΩΩVueÂ∫îÁî®
        try {
            app.mount('#app');
            console.log('‚úÖ VueÂ∫îÁî®ÊåÇËΩΩÊàêÂäü');

            // ÊåÇËΩΩÊàêÂäüÂêéÁ´ãÂç≥ÈöêËóèÂä†ËΩΩÁïåÈù¢
            setTimeout(() => {
                const loadingOverlay = document.querySelector('.loading-overlay');
                if (loadingOverlay) {
                    loadingOverlay.style.display = 'none';
                }
            }, 500);

        } catch (error) {
            console.error('‚ùå VueÂ∫îÁî®ÊåÇËΩΩÂ§±Ë¥•:', error);
            // Â¶ÇÊûúVueÊåÇËΩΩÂ§±Ë¥•ÔºåËá≥Â∞ëÈöêËóèÂä†ËΩΩÁïåÈù¢
            setTimeout(() => {
                const loadingOverlay = document.querySelector('.loading-overlay');
                if (loadingOverlay) {
                    loadingOverlay.style.display = 'none';
                }
            }, 1000);
        }

        // È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÁöÑÈ¢ùÂ§ñÊ£ÄÊü•
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üìÑ DOMÂÜÖÂÆπÂä†ËΩΩÂÆåÊàê');
        });

        window.addEventListener('load', function() {
            console.log('üåê È°µÈù¢ÂÆåÂÖ®Âä†ËΩΩÂÆåÊàê');
            // Â¶ÇÊûúÊ≠§Êó∂ËøòÂú®Âä†ËΩΩÁä∂ÊÄÅÔºåÂº∫Âà∂ÂÆåÊàê
            setTimeout(() => {
                const loadingOverlay = document.querySelector('.loading-overlay');
                if (loadingOverlay && getComputedStyle(loadingOverlay).display !== 'none') {
                    console.warn('‚ö†Ô∏è È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÂº∫Âà∂ÈöêËóèÂä†ËΩΩÁïåÈù¢');
                    loadingOverlay.style.display = 'none';
                }
            }, 1000);
        });

        // È¢ùÂ§ñÁöÑÂÆâÂÖ®Êé™ÊñΩÔºöÂ¶ÇÊûú5ÁßíÂêéËøòÂú®Âä†ËΩΩÔºåÂº∫Âà∂ÈöêËóèÂä†ËΩΩÁïåÈù¢
        setTimeout(() => {
            const loadingOverlay = document.querySelector('.loading-overlay');
            if (loadingOverlay && getComputedStyle(loadingOverlay).display !== 'none') {
                console.warn('‚ö†Ô∏è Ë∂ÖÊó∂Âº∫Âà∂ÈöêËóèÂä†ËΩΩÁïåÈù¢');
                loadingOverlay.style.display = 'none';
                // ÊòæÁ§∫ÈîôËØØÊèêÁ§∫
                const errorDiv = document.createElement('div');
                errorDiv.innerHTML = `
                    <div style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
                                background: rgba(255, 255, 255, 0.95); padding: 20px; border-radius: 10px;
                                box-shadow: 0 10px 30px rgba(0,0,0,0.3); z-index: 10001; text-align: center;
                                color: #333; max-width: 400px;">
                        <h3 style="color: #ff6b6b; margin-bottom: 10px;">‚ö†Ô∏è Âä†ËΩΩÊèêÁ§∫</h3>
                        <p>È°µÈù¢Âä†ËΩΩÂÆåÊàêÔºå‰ΩÜÊüê‰∫õËµÑÊ∫êÂèØËÉΩ‰ªçÂú®ÂêéÂè∞Âä†ËΩΩ‰∏≠„ÄÇ</p>
                        <p>ÊÇ®ÂèØ‰ª•Ê≠£Â∏∏‰ΩøÁî®AIÂä©ÊâãÂäüËÉΩ„ÄÇ</p>
                        <button onclick="this.parentElement.parentElement.remove()"
                                style="margin-top: 15px; padding: 8px 16px; background: #4facfe;
                                       color: white; border: none; border-radius: 5px; cursor: pointer;">
                            Áü•ÈÅì‰∫Ü
                        </button>
                    </div>
                `;
                document.body.appendChild(errorDiv);

                // 3ÁßíÂêéËá™Âä®ÁßªÈô§ÊèêÁ§∫
                setTimeout(() => {
                    if (errorDiv.parentElement) {
                        errorDiv.remove();
                    }
                }, 3000);
            }
        }, 5000);
    </script>

    <!-- Á¥ßÊÄ•Âä†ËΩΩÂÆåÊàêËÑöÊú¨ -->
    <script>
        // È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÁöÑÁ¥ßÊÄ•Â§ÑÁêÜ
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üìÑ DOMÂä†ËΩΩÂÆåÊàêÔºåÂºÄÂßãÁ¥ßÊÄ•Â§ÑÁêÜ');

            // 3ÁßíÂêéÂº∫Âà∂ÈöêËóèÂä†ËΩΩÁïåÈù¢
            setTimeout(function() {
                const loadingOverlay = document.querySelector('.loading-overlay');
                if (loadingOverlay && getComputedStyle(loadingOverlay).display !== 'none') {
                    console.log('üö® DOMÂä†ËΩΩÂÆåÊàêÂêéÂº∫Âà∂ÈöêËóèÂä†ËΩΩÁïåÈù¢');
                    loadingOverlay.style.display = 'none';

                    // ÊòæÁ§∫Á¥ßÊÄ•ÊèêÁ§∫
                    const emergencyNotice = document.createElement('div');
                    emergencyNotice.innerHTML = `
                        <div style="position: fixed; top: 20px; left: 50%; transform: translateX(-50%);
                                    background: linear-gradient(135deg, #4facfe, #00f2fe); color: white;
                                    padding: 15px 25px; border-radius: 25px; z-index: 10003;
                                    box-shadow: 0 10px 30px rgba(0,0,0,0.3); animation: slideDown 0.3s ease;">
                            <i class="fas fa-check-circle"></i> AIÂ≠¶‰π†Âä©ÊâãÂ∑≤Â∞±Áª™ÔºÅ
                        </div>
                    `;
                    document.body.appendChild(emergencyNotice);

                    // 3ÁßíÂêéÁßªÈô§ÊèêÁ§∫
                    setTimeout(() => {
                        if (emergencyNotice.parentElement) {
                            emergencyNotice.remove();
                        }
                    }, 3000);
                }
            }, 3000);
        });

        // Á™óÂè£Âä†ËΩΩÂÆåÊàêÁöÑÂ§ÑÁêÜ
        window.addEventListener('load', function() {
            console.log('üåê Á™óÂè£ÂÆåÂÖ®Âä†ËΩΩÂÆåÊàê');
            setTimeout(function() {
                const loadingOverlay = document.querySelector('.loading-overlay');
                if (loadingOverlay && getComputedStyle(loadingOverlay).display !== 'none') {
                    console.log('üö® Á™óÂè£Âä†ËΩΩÂÆåÊàêÂêéÂº∫Âà∂ÈöêËóèÂä†ËΩΩÁïåÈù¢');
                    loadingOverlay.style.display = 'none';
                }
            }, 1000);
        });

        // ÊúÄÁªàÁöÑÂÆâÂÖ®ÁΩë - 5ÁßíÂêéÊó†ËÆ∫Â¶Ç‰ΩïÈÉΩÈöêËóèÂä†ËΩΩÁïåÈù¢
        setTimeout(function() {
            const loadingOverlay = document.querySelector('.loading-overlay');
            if (loadingOverlay) {
                console.log('üõ°Ô∏è ÂÆâÂÖ®ÁΩëÊøÄÊ¥ª - Âº∫Âà∂ÈöêËóèÂä†ËΩΩÁïåÈù¢');
                loadingOverlay.style.display = 'none';
                loadingOverlay.style.opacity = '0';
                loadingOverlay.style.pointerEvents = 'none';
            }
        }, 5000);
    </script>
</body>
</html>