<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìä Â≠¶‰π†ÂàÜÊûê - ÊµÅ‰ΩìÂäõÂ≠¶Â≠¶‰π†Âπ≥Âè∞</title>
    
    <!-- Â§ñÈÉ®‰æùËµñ -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <!-- ÂÖ±‰∫´ÁªÑ‰ª∂Â∫ì -->
    <script src="../js/shared-components.js"></script>
    
    <style>
        body {
            background: linear-gradient(135deg, #8e44ad 0%, #3498db 100%);
            margin: 0;
            font-family: 'SF Pro Display', sans-serif;
            color: white;
        }

        .analytics-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .analytics-card {
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: 30px;
            color: #333;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
        }

        .metric-card {
            text-align: center;
            padding: 25px;
            background: linear-gradient(135deg, #8e44ad, #3498db);
            color: white;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .metric-number {
            font-size: 3em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .metric-label {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .metric-change {
            font-size: 0.9em;
            margin-top: 10px;
            padding: 5px 10px;
            border-radius: 10px;
            display: inline-block;
        }

        .metric-up {
            background: rgba(39, 174, 96, 0.2);
            color: #27ae60;
        }

        .metric-down {
            background: rgba(231, 76, 60, 0.2);
            color: #e74c3c;
        }

        .chart-container {
            position: relative;
            height: 400px;
            margin: 20px 0;
        }

        .tab-container {
            margin-bottom: 30px;
        }

        .tab-buttons {
            display: flex;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 5px;
            margin-bottom: 20px;
        }

        .tab-btn {
            flex: 1;
            padding: 15px;
            background: transparent;
            border: none;
            color: white;
            cursor: pointer;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .tab-btn.active {
            background: white;
            color: #333;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .progress-item {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 5px solid #8e44ad;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .progress-title {
            font-weight: bold;
            color: #2c3e50;
        }

        .progress-score {
            font-weight: bold;
            color: #8e44ad;
        }

        .progress-bar-container {
            background: #e9ecef;
            height: 10px;
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(135deg, #8e44ad, #3498db);
            border-radius: 5px;
            transition: width 0.3s ease;
        }

        .progress-details {
            display: flex;
            justify-content: space-between;
            font-size: 0.9em;
            color: #666;
        }

        .weakness-item {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
        }

        .weakness-title {
            font-weight: bold;
            color: #856404;
            margin-bottom: 8px;
        }

        .weakness-description {
            color: #856404;
            font-size: 0.9em;
        }

        .recommendation-item {
            background: #d4edda;
            border: 2px solid #28a745;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
        }

        .recommendation-title {
            font-weight: bold;
            color: #155724;
            margin-bottom: 8px;
        }

        .recommendation-description {
            color: #155724;
            font-size: 0.9em;
        }

        .time-range-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .time-btn {
            padding: 8px 16px;
            border: 2px solid rgba(255,255,255,0.3);
            background: transparent;
            color: white;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .time-btn.active {
            background: white;
            color: #333;
        }

        .achievement-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }

        .achievement-item {
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
            transition: all 0.3s ease;
        }

        .achievement-item.unlocked {
            background: linear-gradient(135deg, #f1c40f, #f39c12);
            color: white;
            transform: scale(1.05);
        }

        .achievement-icon {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .achievement-title {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .achievement-description {
            font-size: 0.8em;
            opacity: 0.8;
        }

        .study-streak {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, #ff7675, #fd79a8);
            color: white;
            border-radius: 20px;
            margin-bottom: 20px;
        }

        .streak-number {
            font-size: 4em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .streak-label {
            font-size: 1.2em;
            margin-bottom: 15px;
        }

        .streak-calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            margin-top: 20px;
        }

        .calendar-day {
            aspect-ratio: 1;
            background: rgba(255,255,255,0.2);
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8em;
        }

        .calendar-day.active {
            background: rgba(255,255,255,0.8);
            color: #333;
        }
    </style>
</head>
<body>
    <div id="analyticsApp">
        <!-- Êµ∑Ê¥ãËÉåÊôØ -->
        <ocean-background></ocean-background>

        <!-- ÈÄöÁü•ÁªÑ‰ª∂ -->
        <notification-component :notification="notification" @close="notification = ''"></notification-component>

        <!-- Âä†ËΩΩÂä®Áîª -->
        <loading-spinner :show="loading" text="Ê≠£Âú®ÂàÜÊûêÂ≠¶‰π†Êï∞ÊçÆ..."></loading-spinner>

        <div class="analytics-container" v-if="!loading">
            <!-- È°µÈù¢Â§¥ÈÉ® -->
            <header style="text-align: center; padding: 40px 0; margin-bottom: 30px;">
                <h1><i class="fas fa-chart-line"></i> Â≠¶‰π†ÂàÜÊûê</h1>
                <p>Ê∑±Â∫¶ÂàÜÊûêÊÇ®ÁöÑÂ≠¶‰π†Êï∞ÊçÆÔºåÊèê‰æõ‰∏™ÊÄßÂåñÊîπËøõÂª∫ËÆÆ</p>
            </header>

            <!-- Êó∂Èó¥ËåÉÂõ¥ÈÄâÊã©Âô® -->
            <div class="time-range-selector">
                <button 
                    v-for="range in timeRanges" 
                    :key="range.value"
                    class="time-btn"
                    :class="{ active: selectedTimeRange === range.value }"
                    @click="switchTimeRange(range.value)"
                >
                    {{ range.label }}
                </button>
            </div>

            <!-- Ê†∏ÂøÉÊåáÊ†á -->
            <div class="dashboard-grid">
                <div class="metric-card">
                    <div class="metric-number">{{ metrics.totalScore }}</div>
                    <div class="metric-label">ÁªºÂêàÂæóÂàÜ</div>
                    <div class="metric-change metric-up">
                        <i class="fas fa-arrow-up"></i> +{{ metrics.scoreChange }}
                    </div>
                </div>
                <div class="metric-card">
                    <div class="metric-number">{{ metrics.practiceCount }}</div>
                    <div class="metric-label">ÁªÉ‰π†Ê¨°Êï∞</div>
                    <div class="metric-change metric-up">
                        <i class="fas fa-arrow-up"></i> +{{ metrics.practiceChange }}
                    </div>
                </div>
                <div class="metric-card">
                    <div class="metric-number">{{ metrics.studyTime }}h</div>
                    <div class="metric-label">Â≠¶‰π†Êó∂Èïø</div>
                    <div class="metric-change metric-up">
                        <i class="fas fa-arrow-up"></i> +{{ metrics.timeChange }}h
                    </div>
                </div>
                <div class="metric-card">
                    <div class="metric-number">{{ metrics.accuracy }}%</div>
                    <div class="metric-label">Ê≠£Á°ÆÁéá</div>
                    <div class="metric-change" :class="metrics.accuracyChange >= 0 ? 'metric-up' : 'metric-down'">
                        <i :class="metrics.accuracyChange >= 0 ? 'fas fa-arrow-up' : 'fas fa-arrow-down'"></i>
                        {{ metrics.accuracyChange >= 0 ? '+' : '' }}{{ metrics.accuracyChange }}%
                    </div>
                </div>
            </div>

            <!-- ÂäüËÉΩÊ†áÁ≠æÈ°µ -->
            <div class="tab-container">
                <div class="tab-buttons">
                    <button 
                        v-for="tab in tabs" 
                        :key="tab.id"
                        class="tab-btn"
                        :class="{ active: activeTab === tab.id }"
                        @click="switchTab(tab.id)"
                    >
                        <i :class="tab.icon"></i> {{ tab.name }}
                    </button>
                </div>

                <!-- Â≠¶‰π†ËøõÂ∫¶ -->
                <div class="tab-content" :class="{ active: activeTab === 'progress' }">
                    <div class="analytics-card">
                        <h3><i class="fas fa-tasks"></i> Â≠¶‰π†ËøõÂ∫¶ÂàÜÊûê</h3>
                        
                        <div v-for="subject in progressData" :key="subject.id" class="progress-item">
                            <div class="progress-header">
                                <div class="progress-title">{{ subject.name }}</div>
                                <div class="progress-score">{{ subject.score }}ÂàÜ</div>
                            </div>
                            <div class="progress-bar-container">
                                <div class="progress-bar" :style="{ width: subject.progress + '%' }"></div>
                            </div>
                            <div class="progress-details">
                                <span>ÂÆåÊàêÂ∫¶: {{ subject.progress }}%</span>
                                <span>ÁªÉ‰π†: {{ subject.practiced }}/{{ subject.total }}È¢ò</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ÊàêÁª©Ë∂ãÂäø -->
                <div class="tab-content" :class="{ active: activeTab === 'trends' }">
                    <div class="analytics-card">
                        <h3><i class="fas fa-chart-line"></i> ÊàêÁª©Ë∂ãÂäøÂõæ</h3>
                        <div class="chart-container">
                            <canvas ref="trendsChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="analytics-card">
                        <h3><i class="fas fa-pie-chart"></i> Áü•ËØÜÁÇπÊéåÊè°Â∫¶</h3>
                        <div class="chart-container">
                            <canvas ref="masteryChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- ËñÑÂº±ÁéØËäÇ -->
                <div class="tab-content" :class="{ active: activeTab === 'weaknesses' }">
                    <div class="analytics-card">
                        <h3><i class="fas fa-exclamation-triangle"></i> ËñÑÂº±Áü•ËØÜÁÇπ</h3>
                        
                        <div v-for="weakness in weaknesses" :key="weakness.id" class="weakness-item">
                            <div class="weakness-title">
                                <i class="fas fa-exclamation-circle"></i> {{ weakness.topic }}
                            </div>
                            <div class="weakness-description">
                                Ê≠£Á°ÆÁéá: {{ weakness.accuracy }}% | 
                                ÈîôËØØÊ¨°Êï∞: {{ weakness.errorCount }} | 
                                Âª∫ËÆÆ: {{ weakness.suggestion }}
                            </div>
                        </div>
                    </div>

                    <div class="analytics-card">
                        <h3><i class="fas fa-lightbulb"></i> Â≠¶‰π†Âª∫ËÆÆ</h3>
                        
                        <div v-for="recommendation in recommendations" :key="recommendation.id" class="recommendation-item">
                            <div class="recommendation-title">
                                <i class="fas fa-star"></i> {{ recommendation.title }}
                            </div>
                            <div class="recommendation-description">
                                {{ recommendation.description }}
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Â≠¶‰π†ÊàêÂ∞± -->
                <div class="tab-content" :class="{ active: activeTab === 'achievements' }">
                    <div class="analytics-card">
                        <h3><i class="fas fa-trophy"></i> Â≠¶‰π†ÊàêÂ∞±</h3>
                        
                        <div class="study-streak">
                            <div class="streak-number">{{ studyStreak }}</div>
                            <div class="streak-label">ËøûÁª≠Â≠¶‰π†Â§©Êï∞</div>
                            <div>‰øùÊåÅÂ≠¶‰π†‰π†ÊÉØÔºåÁªßÁª≠Âä†Ê≤πÔºÅ</div>
                            
                            <div class="streak-calendar">
                                <div 
                                    v-for="day in recentDays" 
                                    :key="day.date"
                                    class="calendar-day"
                                    :class="{ active: day.studied }"
                                >
                                    {{ day.day }}
                                </div>
                            </div>
                        </div>
                        
                        <div class="achievement-grid">
                            <div 
                                v-for="achievement in achievements" 
                                :key="achievement.id"
                                class="achievement-item"
                                :class="{ unlocked: achievement.unlocked }"
                            >
                                <div class="achievement-icon">{{ achievement.icon }}</div>
                                <div class="achievement-title">{{ achievement.title }}</div>
                                <div class="achievement-description">{{ achievement.description }}</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue;

        createApp({
            mixins: [SharedMixin],
            components: {
                'ocean-background': OceanBackground,
                'notification-component': NotificationComponent,
                'loading-spinner': LoadingSpinner
            },
            data() {
                return {
                    activeTab: 'progress',
                    selectedTimeRange: '7d',
                    timeRanges: [
                        { value: '7d', label: 'Ëøë7Â§©' },
                        { value: '30d', label: 'Ëøë30Â§©' },
                        { value: '90d', label: 'Ëøë3‰∏™Êúà' },
                        { value: 'all', label: 'ÂÖ®ÈÉ®' }
                    ],
                    tabs: [
                        { id: 'progress', name: 'Â≠¶‰π†ËøõÂ∫¶', icon: 'fas fa-tasks' },
                        { id: 'trends', name: 'ÊàêÁª©Ë∂ãÂäø', icon: 'fas fa-chart-line' },
                        { id: 'weaknesses', name: 'ËñÑÂº±ÁéØËäÇ', icon: 'fas fa-exclamation-triangle' },
                        { id: 'achievements', name: 'Â≠¶‰π†ÊàêÂ∞±', icon: 'fas fa-trophy' }
                    ],
                    metrics: {
                        totalScore: 85,
                        scoreChange: 5,
                        practiceCount: 126,
                        practiceChange: 15,
                        studyTime: 24,
                        timeChange: 3,
                        accuracy: 78,
                        accuracyChange: 2
                    },
                    progressData: [
                        {
                            id: 1,
                            name: 'ÊµÅ‰ΩìÈùôÂäõÂ≠¶',
                            progress: 85,
                            score: 88,
                            practiced: 34,
                            total: 40
                        },
                        {
                            id: 2,
                            name: 'ÊµÅ‰ΩìËøêÂä®Â≠¶',
                            progress: 72,
                            score: 76,
                            practiced: 29,
                            total: 40
                        },
                        {
                            id: 3,
                            name: 'ÊµÅ‰ΩìÂä®ÂäõÂ≠¶',
                            progress: 65,
                            score: 71,
                            practiced: 26,
                            total: 40
                        },
                        {
                            id: 4,
                            name: 'Á≤òÊÄßÊµÅÂä®',
                            progress: 58,
                            score: 64,
                            practiced: 23,
                            total: 40
                        }
                    ],
                    weaknesses: [
                        {
                            id: 1,
                            topic: '‰ºØÂä™Âà©ÊñπÁ®ãÂ∫îÁî®',
                            accuracy: 45,
                            errorCount: 8,
                            suggestion: 'ÈáçÁÇπÂ§ç‰π†ËÉΩÈáèÂÆàÊÅíÂéüÁêÜÂíåÂ∫îÁî®Êù°‰ª∂'
                        },
                        {
                            id: 2,
                            topic: 'Èõ∑ËØ∫Êï∞ËÆ°ÁÆó',
                            accuracy: 52,
                            errorCount: 6,
                            suggestion: 'Âä†Âº∫ÈáèÁ∫≤ÂàÜÊûêÂíåÊï∞ÂÄºËÆ°ÁÆóÁªÉ‰π†'
                        },
                        {
                            id: 3,
                            topic: 'ÂéãÂº∫ÂàÜÂ∏ÉËßÑÂæã',
                            accuracy: 61,
                            errorCount: 5,
                            suggestion: 'ÁêÜËß£ÈùôÂäõÂ≠¶Âü∫Êú¨ÊñπÁ®ãÁöÑÁâ©ÁêÜÊÑè‰πâ'
                        }
                    ],
                    recommendations: [
                        {
                            id: 1,
                            title: 'ÈáçÁÇπÊîªÂÖãËÉΩÈáèÊñπÁ®ã',
                            description: 'Âª∫ËÆÆÊØèÂ§©ÁªÉ‰π†2-3ÈÅì‰ºØÂä™Âà©ÊñπÁ®ãÁõ∏ÂÖ≥È¢òÁõÆÔºåÂπ∂ËßÇÁúãÁõ∏ÂÖ≥ËßÜÈ¢ëËØæÁ®ã'
                        },
                        {
                            id: 2,
                            title: 'Âä†Âº∫Ê¶ÇÂøµÁêÜËß£',
                            description: 'Âª∫ËÆÆ‰ΩøÁî®AIÂä©ÊâãÂ§öÈóÆ‰∏Ä‰∫õÊ¶ÇÂøµÊÄßÈóÆÈ¢òÔºåÊ∑±ÂåñÁêÜËÆ∫ÁêÜËß£'
                        },
                        {
                            id: 3,
                            title: '‰øùÊåÅÁªÉ‰π†È¢ëÁéá',
                            description: 'ÂΩìÂâçÂ≠¶‰π†ËøõÂ∫¶ËâØÂ•ΩÔºåÂª∫ËÆÆ‰øùÊåÅÊØèÂ§©30ÂàÜÈíüÁöÑÁªÉ‰π†Êó∂Èó¥'
                        }
                    ],
                    studyStreak: 12,
                    recentDays: [
                        { date: '2024-01-09', day: '9', studied: true },
                        { date: '2024-01-10', day: '10', studied: true },
                        { date: '2024-01-11', day: '11', studied: false },
                        { date: '2024-01-12', day: '12', studied: true },
                        { date: '2024-01-13', day: '13', studied: true },
                        { date: '2024-01-14', day: '14', studied: true },
                        { date: '2024-01-15', day: '15', studied: true }
                    ],
                    achievements: [
                        {
                            id: 1,
                            title: 'ÂàùÂá∫ËåÖÂ∫ê',
                            description: 'ÂÆåÊàêÈ¶ñÊ¨°ÁªÉ‰π†',
                            icon: 'üéØ',
                            unlocked: true
                        },
                        {
                            id: 2,
                            title: 'Âã§Â•ãÂ≠¶ËÄÖ',
                            description: 'ËøûÁª≠Â≠¶‰π†7Â§©',
                            icon: 'üìö',
                            unlocked: true
                        },
                        {
                            id: 3,
                            title: 'ÁôæÈ¢òÊñ©',
                            description: 'ÂÆåÊàê100ÈÅìÈ¢òÁõÆ',
                            icon: 'üíØ',
                            unlocked: true
                        },
                        {
                            id: 4,
                            title: 'Á≤æÁõäÊ±ÇÁ≤æ',
                            description: 'ÂçïÊ¨°ÁªÉ‰π†90ÂàÜ‰ª•‰∏ä',
                            icon: '‚≠ê',
                            unlocked: false
                        },
                        {
                            id: 5,
                            title: 'Â≠¶Èú∏Ê®°Âºè',
                            description: 'ËøûÁª≠Â≠¶‰π†30Â§©',
                            icon: 'üèÜ',
                            unlocked: false
                        },
                        {
                            id: 6,
                            title: 'ÊµÅ‰ΩìÂ§ßÂ∏à',
                            description: 'ÊâÄÊúâÊ®°Âùó85ÂàÜ‰ª•‰∏ä',
                            icon: 'üëë',
                            unlocked: false
                        }
                    ],
                    analyticsData: {
                        overview: {
                            totalLearningTime: 1240, // ÂàÜÈíü
                            completedCourses: 6,
                            totalCourses: 8,
                            averageScore: 82.5,
                            currentStreak: 7, // ËøûÁª≠Â≠¶‰π†Â§©Êï∞
                            totalQuestions: 326,
                            correctAnswers: 268,
                            accuracy: 82.2
                        },
                        
                        weeklyProgress: {
                            labels: ['Âë®‰∏Ä', 'Âë®‰∫å', 'Âë®‰∏â', 'Âë®Âõõ', 'Âë®‰∫î', 'Âë®ÂÖ≠', 'Âë®Êó•'],
                            studyTime: [45, 60, 30, 75, 90, 40, 85], // ÂàÜÈíü
                            questionsCount: [15, 20, 12, 25, 30, 18, 28],
                            accuracy: [85, 78, 90, 82, 88, 75, 86]
                        },
                        
                        subjectPerformance: [
                            {
                                subject: 'ÊµÅ‰ΩìÈùôÂäõÂ≠¶',
                                progress: 95,
                                averageScore: 88.5,
                                timeSpent: 180,
                                questionsCompleted: 45,
                                accuracy: 91.1,
                                lastStudied: '2024-01-15',
                                difficulty: 'easy',
                                mastery: 'excellent'
                            },
                            {
                                subject: 'ÊµÅ‰ΩìÂä®ÂäõÂ≠¶',
                                progress: 78,
                                averageScore: 82.3,
                                timeSpent: 240,
                                questionsCompleted: 62,
                                accuracy: 79.0,
                                lastStudied: '2024-01-14',
                                difficulty: 'medium',
                                mastery: 'good'
                            },
                            {
                                subject: 'Á≤òÊÄßÊµÅÂä®',
                                progress: 65,
                                averageScore: 75.8,
                                timeSpent: 195,
                                questionsCompleted: 38,
                                accuracy: 73.7,
                                lastStudied: '2024-01-13',
                                difficulty: 'hard',
                                mastery: 'needs_improvement'
                            },
                            {
                                subject: '‰ºØÂä™Âà©ÊñπÁ®ã',
                                progress: 89,
                                averageScore: 86.2,
                                timeSpent: 165,
                                questionsCompleted: 52,
                                accuracy: 84.6,
                                lastStudied: '2024-01-15',
                                difficulty: 'medium',
                                mastery: 'good'
                            },
                            {
                                subject: 'Èõ∑ËØ∫Êï∞ÁêÜËÆ∫',
                                progress: 72,
                                averageScore: 78.9,
                                timeSpent: 120,
                                questionsCompleted: 28,
                                accuracy: 75.0,
                                lastStudied: '2024-01-12',
                                difficulty: 'medium',
                                mastery: 'fair'
                            },
                            {
                                subject: 'ËæπÁïåÂ±ÇÁêÜËÆ∫',
                                progress: 45,
                                averageScore: 68.5,
                                timeSpent: 90,
                                questionsCompleted: 18,
                                accuracy: 66.7,
                                lastStudied: '2024-01-10',
                                difficulty: 'hard',
                                mastery: 'needs_improvement'
                            }
                        ],
                        
                        learningStreaks: {
                            current: 7,
                            longest: 12,
                            thisMonth: 18,
                            thisWeek: 6
                        },
                        
                        errorAnalysis: [
                            {
                                concept: '‰ºØÂä™Âà©ÊñπÁ®ãÂ∫îÁî®Êù°‰ª∂',
                                errorCount: 8,
                                totalQuestions: 25,
                                errorRate: 32.0,
                                lastError: '2024-01-14',
                                category: 'ÁêÜËÆ∫ÁêÜËß£',
                                improvement: 'ÈúÄË¶ÅÂä†Âº∫ÁêÜÊÉ≥ÊµÅ‰ΩìÂÅáËÆæÁöÑÁêÜËß£'
                            },
                            {
                                concept: 'Èõ∑ËØ∫Êï∞ËÆ°ÁÆó',
                                errorCount: 6,
                                totalQuestions: 20,
                                errorRate: 30.0,
                                lastError: '2024-01-13',
                                category: 'ËÆ°ÁÆóÂ∫îÁî®',
                                improvement: 'Ê≥®ÊÑèÂçï‰ΩçÊç¢ÁÆóÂíåÁâ©ÁêÜÈáèÂê´‰πâ'
                            },
                            {
                                concept: 'ÊµÅ‰ΩìÈùôÂéãÂº∫ÂàÜÂ∏É',
                                errorCount: 4,
                                totalQuestions: 18,
                                errorRate: 22.2,
                                lastError: '2024-01-12',
                                category: 'Âü∫Á°ÄÊ¶ÇÂøµ',
                                improvement: 'ÁêÜËß£ÂéãÂº∫ÈöèÊ∑±Â∫¶ÂèòÂåñËßÑÂæã'
                            },
                            {
                                concept: 'ËøûÁª≠ÊÄßÊñπÁ®ã',
                                errorCount: 3,
                                totalQuestions: 15,
                                errorRate: 20.0,
                                lastError: '2024-01-11',
                                category: 'ÊñπÁ®ãÂ∫îÁî®',
                                improvement: 'ÊéåÊè°Ë¥®ÈáèÂÆàÊÅíÁöÑÁâ©ÁêÜÂê´‰πâ'
                            }
                        ],
                        
                        achievements: [
                            {
                                id: 'streak_7',
                                title: 'ÂùöÊåÅ‰∏çÊáà',
                                description: 'ËøûÁª≠Â≠¶‰π†7Â§©',
                                icon: 'üî•',
                                earnedDate: '2024-01-15',
                                rarity: 'common'
                            },
                            {
                                id: 'accuracy_90',
                                title: 'Á≤æÂáÜÂ∞ÑÊâã',
                                description: 'ÂçïÊ¨°ÁªÉ‰π†Ê≠£Á°ÆÁéáËææÂà∞90%',
                                icon: 'üéØ',
                                earnedDate: '2024-01-14',
                                rarity: 'rare'
                            },
                            {
                                id: 'subject_master',
                                title: 'ÈùôÂäõÂ≠¶Â§ßÂ∏à',
                                description: 'ÊµÅ‰ΩìÈùôÂäõÂ≠¶Ê®°ÂùóËé∑Âæó‰ºòÁßÄËØÑ‰ª∑',
                                icon: 'üèÜ',
                                earnedDate: '2024-01-13',
                                rarity: 'epic'
                            },
                            {
                                id: 'question_100',
                                title: 'ÁôæÈ¢òÊñ©',
                                description: 'Á¥ØËÆ°ÂÆåÊàê100ÈÅìÈ¢òÁõÆ',
                                icon: 'üíØ',
                                earnedDate: '2024-01-10',
                                rarity: 'uncommon'
                            }
                        ],
                        
                        recommendations: [
                            {
                                type: 'weakness',
                                title: 'Âä†Âº∫ËæπÁïåÂ±ÇÁêÜËÆ∫Â≠¶‰π†',
                                description: 'ÊÇ®Âú®ËæπÁïåÂ±ÇÁêÜËÆ∫ÊñπÈù¢ÁöÑÊéåÊè°Á®ãÂ∫¶ËæÉ‰ΩéÔºåÂª∫ËÆÆÈáçÁÇπÂ≠¶‰π†Áõ∏ÂÖ≥Ê¶ÇÂøµ',
                                priority: 'high',
                                estimatedTime: 45,
                                resources: ['Ê¶ÇÂøµËßÜÈ¢ë', '‰æãÈ¢òÁªÉ‰π†', 'ËÆ°ÁÆóÂ∑•ÂÖ∑']
                            },
                            {
                                type: 'practice',
                                title: 'Â¢ûÂä†Á≤òÊÄßÊµÅÂä®ÁªÉ‰π†',
                                description: 'ÈÄöËøáÊõ¥Â§öÁªÉ‰π†Â∑©Âõ∫Á≤òÊÄßÊµÅÂä®ÁöÑËÆ°ÁÆóÊñπÊ≥ï',
                                priority: 'medium',
                                estimatedTime: 30,
                                resources: ['‰∏ìÈ°πÁªÉ‰π†', 'ÈîôÈ¢òÂõûÈ°æ']
                            },
                            {
                                type: 'review',
                                title: 'Â§ç‰π†‰ºØÂä™Âà©ÊñπÁ®ã',
                                description: 'ËôΩÁÑ∂ÊÄª‰ΩìÊéåÊè°ËâØÂ•ΩÔºå‰ΩÜÂú®Â∫îÁî®Êù°‰ª∂ÊñπÈù¢ËøòÈúÄÂä†Âº∫',
                                priority: 'low',
                                estimatedTime: 20,
                                resources: ['ÁêÜËÆ∫ÂõûÈ°æ', 'Â∫îÁî®ÂÆû‰æã']
                            }
                        ]
                    }
                }
            },
            methods: {
                switchTab(tabId) {
                    this.activeTab = tabId;
                    if (tabId === 'trends') {
                        this.$nextTick(() => {
                            this.initCharts();
                        });
                    }
                },
                
                switchTimeRange(range) {
                    this.selectedTimeRange = range;
                    this.loadAnalyticsData(range);
                },
                
                loadAnalyticsData(range) {
                    // Ê†πÊçÆÊó∂Èó¥ËåÉÂõ¥Âä†ËΩΩ‰∏çÂêåÁöÑÊï∞ÊçÆ
                    this.showNotification(`Â∑≤ÂàáÊç¢Âà∞${range}ÁöÑÊï∞ÊçÆËßÜÂõæ`, 'info');
                },
                
                initCharts() {
                    this.initTrendsChart();
                    this.initMasteryChart();
                },
                
                initTrendsChart() {
                    const ctx = this.$refs.trendsChart?.getContext('2d');
                    if (!ctx) return;
                    
                    new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: ['Á¨¨1Âë®', 'Á¨¨2Âë®', 'Á¨¨3Âë®', 'Á¨¨4Âë®', 'Á¨¨5Âë®', 'Á¨¨6Âë®', 'Á¨¨7Âë®', 'Á¨¨8Âë®'],
                            datasets: [{
                                label: 'ÁªÉ‰π†ÊàêÁª©',
                                data: [65, 68, 72, 75, 78, 76, 82, 85],
                                borderColor: '#8e44ad',
                                backgroundColor: 'rgba(142, 68, 173, 0.1)',
                                tension: 0.4,
                                fill: true
                            }, {
                                label: 'Ê≠£Á°ÆÁéá',
                                data: [60, 65, 70, 72, 75, 73, 78, 78],
                                borderColor: '#3498db',
                                backgroundColor: 'rgba(52, 152, 219, 0.1)',
                                tension: 0.4,
                                fill: true
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                title: {
                                    display: true,
                                    text: 'Â≠¶‰π†ÊàêÁª©ÂèòÂåñË∂ãÂäø'
                                }
                            },
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    max: 100
                                }
                            }
                        }
                    });
                },
                
                initMasteryChart() {
                    const ctx = this.$refs.masteryChart?.getContext('2d');
                    if (!ctx) return;
                    
                    new Chart(ctx, {
                        type: 'doughnut',
                        data: {
                            labels: ['ÊµÅ‰ΩìÈùôÂäõÂ≠¶', 'ÊµÅ‰ΩìËøêÂä®Â≠¶', 'ÊµÅ‰ΩìÂä®ÂäõÂ≠¶', 'Á≤òÊÄßÊµÅÂä®'],
                            datasets: [{
                                data: [85, 72, 65, 58],
                                backgroundColor: [
                                    '#27ae60',
                                    '#3498db',
                                    '#f39c12',
                                    '#e74c3c'
                                ]
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                title: {
                                    display: true,
                                    text: 'ÂêÑÁü•ËØÜÁÇπÊéåÊè°Â∫¶ÂàÜÂ∏É'
                                },
                                legend: {
                                    position: 'bottom'
                                }
                            }
                        }
                    });
                },
                
                // Êï∞ÊçÆÂ§ÑÁêÜÊñπÊ≥ï
                formatLearningTime(minutes) {
                    const hours = Math.floor(minutes / 60);
                    const mins = minutes % 60;
                    return hours > 0 ? `${hours}Â∞èÊó∂${mins}ÂàÜÈíü` : `${mins}ÂàÜÈíü`;
                },
                
                getProgressColor(progress) {
                    if (progress >= 90) return '#28a745';
                    if (progress >= 80) return '#007bff';
                    if (progress >= 70) return '#ffc107';
                    if (progress >= 60) return '#fd7e14';
                    return '#dc3545';
                },
                
                getMasteryText(mastery) {
                    const masteryMap = {
                        'excellent': '‰ºòÁßÄ',
                        'good': 'ËâØÂ•Ω',
                        'fair': '‰∏ÄËà¨',
                        'needs_improvement': 'ÈúÄË¶ÅÊèêÈ´ò'
                    };
                    return masteryMap[mastery] || 'Êú™Áü•';
                },
                
                getMasteryColor(mastery) {
                    const colorMap = {
                        'excellent': '#28a745',
                        'good': '#007bff',
                        'fair': '#ffc107',
                        'needs_improvement': '#dc3545'
                    };
                    return colorMap[mastery] || '#6c757d';
                },
                
                getPriorityColor(priority) {
                    const colorMap = {
                        'high': '#dc3545',
                        'medium': '#ffc107',
                        'low': '#28a745'
                    };
                    return colorMap[priority] || '#6c757d';
                },
                
                getRarityColor(rarity) {
                    const colorMap = {
                        'common': '#6c757d',
                        'uncommon': '#28a745',
                        'rare': '#007bff',
                        'epic': '#6f42c1',
                        'legendary': '#fd7e14'
                    };
                    return colorMap[rarity] || '#6c757d';
                },
                
                // ÂõæË°®ÂàùÂßãÂåñÊñπÊ≥ï
                initProgressChart() {
                    const ctx = document.getElementById('progressChart');
                    if (!ctx) return;
                    
                    new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: this.analyticsData.weeklyProgress.labels,
                            datasets: [{
                                label: 'Â≠¶‰π†Êó∂Èó¥(ÂàÜÈíü)',
                                data: this.analyticsData.weeklyProgress.studyTime,
                                borderColor: '#007bff',
                                backgroundColor: 'rgba(0, 123, 255, 0.1)',
                                tension: 0.4,
                                yAxisID: 'y'
                            }, {
                                label: 'Ê≠£Á°ÆÁéá(%)',
                                data: this.analyticsData.weeklyProgress.accuracy,
                                borderColor: '#28a745',
                                backgroundColor: 'rgba(40, 167, 69, 0.1)',
                                tension: 0.4,
                                yAxisID: 'y1'
                            }]
                        },
                        options: {
                            responsive: true,
                            plugins: {
                                legend: {
                                    position: 'top',
                                }
                            },
                            scales: {
                                y: {
                                    type: 'linear',
                                    display: true,
                                    position: 'left',
                                    title: {
                                        display: true,
                                        text: 'Â≠¶‰π†Êó∂Èó¥(ÂàÜÈíü)'
                                    }
                                },
                                y1: {
                                    type: 'linear',
                                    display: true,
                                    position: 'right',
                                    title: {
                                        display: true,
                                        text: 'Ê≠£Á°ÆÁéá(%)'
                                    },
                                    grid: {
                                        drawOnChartArea: false,
                                    },
                                }
                            }
                        }
                    });
                },
                
                initSubjectChart() {
                    const ctx = document.getElementById('subjectChart');
                    if (!ctx) return;
                    
                    const subjects = this.analyticsData.subjectPerformance.map(s => s.subject);
                    const scores = this.analyticsData.subjectPerformance.map(s => s.averageScore);
                    
                    new Chart(ctx, {
                        type: 'radar',
                        data: {
                            labels: subjects,
                            datasets: [{
                                label: 'Âπ≥ÂùáÊàêÁª©',
                                data: scores,
                                borderColor: '#007bff',
                                backgroundColor: 'rgba(0, 123, 255, 0.2)',
                                pointBackgroundColor: '#007bff'
                            }]
                        },
                        options: {
                            responsive: true,
                            scales: {
                                r: {
                                    beginAtZero: true,
                                    max: 100,
                                    ticks: {
                                        stepSize: 20
                                    }
                                }
                            }
                        }
                    });
                },
                
                // ÂäüËÉΩÊñπÊ≥ï
                viewDetailedAnalysis(subject) {
                    this.showNotification(`Êü•Áúã${subject.subject}ÁöÑËØ¶ÁªÜÂàÜÊûê`, 'info');
                },
                
                startRecommendedStudy(recommendation) {
                    this.showNotification(`ÂºÄÂßãÂ≠¶‰π†Ôºö${recommendation.title}`, 'info');
                },
                
                exportAnalyticsReport() {
                    this.showNotification('Ê≠£Âú®ÁîüÊàêÂ≠¶‰π†ÂàÜÊûêÊä•Âëä...', 'info');
                    setTimeout(() => {
                        this.showNotification('Â≠¶‰π†ÂàÜÊûêÊä•ÂëäÂØºÂá∫ÂÆåÊàêÔºÅ', 'success');
                    }, 2000);
                },
                
                resetAnalytics() {
                    if (confirm('Á°ÆÂÆöË¶ÅÈáçÁΩÆÊâÄÊúâÂ≠¶‰π†Êï∞ÊçÆÂêóÔºüÊ≠§Êìç‰Ωú‰∏çÂèØÊí§ÈîÄ„ÄÇ')) {
                        this.showNotification('Â≠¶‰π†Êï∞ÊçÆÈáçÁΩÆÂäüËÉΩÊöÇÊú™ÂºÄÊîæ', 'warning');
                    }
                },
                
                shareAchievement(achievement) {
                    this.showNotification(`ÂàÜ‰∫´ÊàêÂ∞±Ôºö${achievement.title}`, 'info');
                },
                
                // Êï∞ÊçÆÊõ¥Êñ∞ÊñπÊ≥ï
                refreshData() {
                    this.setLoading(true);
                    this.showNotification('Ê≠£Âú®Âà∑Êñ∞Êï∞ÊçÆ...', 'info');
                    
                    setTimeout(() => {
                        this.setLoading(false);
                        this.showNotification('Êï∞ÊçÆÂà∑Êñ∞ÂÆåÊàêÔºÅ', 'success');
                        // ÈáçÊñ∞ÂàùÂßãÂåñÂõæË°®
                        this.$nextTick(() => {
                            this.initProgressChart();
                            this.initSubjectChart();
                        });
                    }, 1500);
                }
            },
            
            mounted() {
                console.log('üìä Â≠¶‰π†ÂàÜÊûêÊ®°ÂùóÂêØÂä®ÔºÅ');
                this.setLoading(true);
                
                setTimeout(() => {
                    this.setLoading(false);
                    this.showNotification('Â≠¶‰π†Êï∞ÊçÆÂàÜÊûêÂÆåÊàêÔºÅ', 'success');
                }, 1800);
            }
        }).mount('#analyticsApp');
    </script>
</body>
</html> 