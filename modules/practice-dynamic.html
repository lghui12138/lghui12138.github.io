<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ§  æ™ºèƒ½é¢˜åº“ç»ƒä¹  - å…¨å±æ¨¡å¼æ”¯æŒ</title>
    
    <!-- å¤–éƒ¨ä¾èµ– -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #667eea;
            --secondary-color: #764ba2;
            --accent-color: #4facfe;
            --success-color: #43e97b;
            --warning-color: #feca57;
            --error-color: #ff6b6b;
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.8);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            animation: gradientFlow 25s ease infinite;
            line-height: 1.6;
            transition: all 0.3s ease;
        }

        @keyframes gradientFlow {
            0%, 100% { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
            20% { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
            40% { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); }
            60% { background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); }
            80% { background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); }
        }

        /* å…¨å±æ¨¡å¼æ ·å¼ */
        .fullscreen-container {
            position: relative;
            min-height: 100vh;
            transition: all 0.3s ease;
        }

        .fullscreen-container.is-fullscreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 10000;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
        }

        /* æµ®åŠ¨ç²’å­æ•ˆæœ */
        .floating-elements {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .floating-particle {
            position: absolute;
            width: 5px;
            height: 5px;
            background: rgba(255,255,255,0.6);
            border-radius: 50%;
            animation: floatParticle 30s linear infinite;
            box-shadow: 0 0 10px rgba(255,255,255,0.3);
        }

        @keyframes floatParticle {
            0% {
                transform: translateY(100vh) rotate(0deg) scale(0);
                opacity: 0;
            }
            5% {
                opacity: 1;
                transform: translateY(95vh) rotate(18deg) scale(1);
            }
            95% {
                opacity: 1;
                transform: translateY(-5vh) rotate(342deg) scale(1);
            }
            100% {
                transform: translateY(-10vh) rotate(360deg) scale(0);
                opacity: 0;
            }
        }

        /* å…¨å±æ§åˆ¶æŒ‰é’® */
        .fullscreen-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 10001;
            display: flex;
            gap: 10px;
            opacity: 0.9;
            transition: all 0.3s ease;
        }

        .fullscreen-controls:hover {
            opacity: 1;
            transform: scale(1.05);
        }

        .fullscreen-btn, .exit-btn {
            background: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            backdrop-filter: blur(10px);
            font-weight: 500;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9em;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .fullscreen-btn:hover, .exit-btn:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(0,0,0,0.2);
        }

        .fullscreen-btn.active {
            background: linear-gradient(135deg, var(--accent-color), var(--primary-color));
            border-color: var(--accent-color);
        }

        /* ä¸»è¦å†…å®¹åŒºåŸŸ */
        .practice-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 80px 20px 40px;
            position: relative;
            z-index: 10;
            transition: all 0.3s ease;
        }

        .is-fullscreen .practice-container {
            max-width: 100%;
            padding: 80px 40px 40px;
            height: 100vh;
            overflow-y: auto;
        }

        /* é¡µé¢æ ‡é¢˜ */
        .page-title {
            text-align: center;
            font-size: clamp(2.5rem, 5vw, 3.5rem);
            font-weight: 700;
            margin-bottom: 30px;
            background: linear-gradient(45deg, #fff, #f0f8ff, #e6f3ff, #fff);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: titleShine 4s ease-in-out infinite;
            text-shadow: 0 0 50px rgba(255,255,255,0.3);
        }

        @keyframes titleShine {
            0%, 100% { background-position: 0% 50%; filter: brightness(1); }
            50% { background-position: 100% 50%; filter: brightness(1.3); }
        }

        /* é¢˜åº“é€‰æ‹©ç•Œé¢ */
        .question-bank-selector {
            background: rgba(255,255,255,0.95);
            border-radius: 25px;
            padding: 40px;
            margin-bottom: 30px;
            color: #333;
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
            animation: slideIn 0.8s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .selector-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .selector-title {
            font-size: 2em;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .selector-subtitle {
            font-size: 1.1em;
            color: #666;
        }

        /* ç»Ÿè®¡é¢æ¿ */
        .stats-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 1em;
            opacity: 0.9;
        }

        /* ç­›é€‰åŒºåŸŸ */
        .filter-section {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            border: 2px solid #e9ecef;
        }

        .filter-header {
            font-size: 1.4em;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .filter-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .filter-label {
            font-weight: 500;
            color: #495057;
            font-size: 0.95em;
        }

        .filter-select, .filter-input {
            padding: 12px 15px;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            background: white;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        .filter-select:focus, .filter-input:focus {
            border-color: var(--accent-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }

        /* æ“ä½œæŒ‰é’® */
        .action-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin-bottom: 30px;
        }

        .action-btn {
            background: linear-gradient(135deg, var(--accent-color), var(--primary-color));
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-weight: 600;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(79, 172, 254, 0.3);
        }

        .action-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.6s;
        }

        .action-btn:hover::before {
            left: 100%;
        }

        .action-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 15px 40px rgba(79, 172, 254, 0.5);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success-color), #38f9d7);
            box-shadow: 0 10px 30px rgba(67, 233, 123, 0.3);
        }

        .btn-success:hover {
            box-shadow: 0 15px 40px rgba(67, 233, 123, 0.5);
        }

        .btn-warning {
            background: linear-gradient(135deg, var(--warning-color), #ff9ff3);
            box-shadow: 0 10px 30px rgba(254, 202, 87, 0.3);
        }

        .btn-warning:hover {
            box-shadow: 0 15px 40px rgba(254, 202, 87, 0.5);
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--error-color), #ee5a52);
            box-shadow: 0 10px 30px rgba(255, 107, 107, 0.3);
        }

        .btn-danger:hover {
            box-shadow: 0 15px 40px rgba(255, 107, 107, 0.5);
        }

        /* é¢˜åº“åˆ—è¡¨ */
        .question-bank-list {
            background: #f8f9fa;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            max-height: 600px;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: var(--primary-color) #f0f0f0;
        }

        .question-bank-list::-webkit-scrollbar {
            width: 8px;
        }

        .question-bank-list::-webkit-scrollbar-track {
            background: #f0f0f0;
            border-radius: 4px;
        }

        .question-bank-list::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 4px;
        }

        .question-bank-list::-webkit-scrollbar-thumb:hover {
            background: var(--secondary-color);
        }

        .bank-item {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .bank-item:hover {
            border-color: var(--accent-color);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(79, 172, 254, 0.2);
        }

        .bank-item.selected {
            border-color: var(--accent-color);
            background: rgba(79, 172, 254, 0.1);
        }

        .bank-info {
            flex: 1;
        }

        .bank-name {
            font-size: 1.2em;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 5px;
        }

        .bank-meta {
            color: #666;
            font-size: 0.9em;
            display: flex;
            gap: 15px;
        }

        .bank-actions {
            display: flex;
            gap: 10px;
        }

        .bank-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .bank-btn.primary {
            background: var(--accent-color);
            color: white;
        }

        .bank-btn.secondary {
            background: #6c757d;
            color: white;
        }

        .bank-btn:hover {
            transform: translateY(-1px);
            opacity: 0.9;
        }

        /* ç»ƒä¹ ç•Œé¢ï¼ˆåŸæœ‰çš„é¢˜ç›®å¡ç‰‡æ ·å¼ä¿æŒä¸å˜ï¼‰ */
        .practice-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
            padding: 0 10px;
        }

        .stat-item {
            background: var(--glass-bg);
            border-radius: 20px;
            padding: 25px;
            text-align: center;
            backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            transition: all 0.4s ease;
            animation: statSlideUp 0.8s ease-out both;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .stat-item:nth-child(1) { animation-delay: 0.1s; }
        .stat-item:nth-child(2) { animation-delay: 0.2s; }
        .stat-item:nth-child(3) { animation-delay: 0.3s; }
        .stat-item:nth-child(4) { animation-delay: 0.4s; }

        @keyframes statSlideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .stat-item:hover {
            transform: translateY(-5px);
            background: rgba(255,255,255,0.15);
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }

        .stat-value {
            font-size: 2.5em;
            font-weight: 700;
            margin-bottom: 8px;
            background: linear-gradient(45deg, #fff, #f0f8ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: numberCount 2s ease-out;
        }

        @keyframes numberCount {
            from { 
                opacity: 0; 
                transform: scale(0.5) rotateY(180deg); 
            }
            to { 
                opacity: 1; 
                transform: scale(1) rotateY(0deg); 
            }
        }

        .stat-label {
            font-size: 1em;
            opacity: 0.9;
            font-weight: 500;
        }

        /* é¢˜ç›®å¡ç‰‡ */
        .question-card {
            background: rgba(255,255,255,0.95);
            border-radius: 25px;
            padding: 40px;
            margin-bottom: 30px;
            color: #333;
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
            animation: questionSlideIn 0.8s ease-out both;
            border: 2px solid transparent;
        }

        @keyframes questionSlideIn {
            from {
                opacity: 0;
                transform: translateY(50px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .question-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .question-card:hover::before {
            opacity: 1;
        }

        .question-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 30px 80px rgba(0,0,0,0.25);
            border-color: rgba(102, 126, 234, 0.3);
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            position: relative;
            z-index: 2;
        }

        .question-number {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9em;
            animation: numberPulse 2s ease-in-out infinite;
        }

        @keyframes numberPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .question-difficulty {
            padding: 6px 14px;
            border-radius: 15px;
            font-size: 0.85em;
            font-weight: 500;
        }

        .difficulty-easy { 
            background: linear-gradient(135deg, var(--success-color), #38f9d7); 
            color: white; 
        }
        .difficulty-medium { 
            background: linear-gradient(135deg, var(--warning-color), #ff9ff3); 
            color: white; 
        }
        .difficulty-hard { 
            background: linear-gradient(135deg, var(--error-color), #ee5a52); 
            color: white; 
        }

        .question-title {
            font-size: 1.4em;
            font-weight: 600;
            line-height: 1.6;
            margin-bottom: 20px;
            padding: 20px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-left: 5px solid var(--primary-color);
            border-radius: 15px;
            position: relative;
            z-index: 2;
        }

        .question-content {
            font-size: 1.1em;
            line-height: 1.8;
            margin-bottom: 25px;
            position: relative;
            z-index: 2;
        }

        /* é€‰é¡¹æ ·å¼ */
        .options-list {
            list-style: none;
            margin-bottom: 30px;
        }

        .option-item {
            margin-bottom: 15px;
            position: relative;
            z-index: 2;
        }

        .option-label {
            display: flex;
            align-items: center;
            padding: 18px 25px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border: 2px solid #dee2e6;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1em;
            line-height: 1.6;
        }

        .option-label:hover {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border-color: var(--accent-color);
            transform: translateX(5px);
            box-shadow: 0 5px 20px rgba(79, 172, 254, 0.3);
        }

        .option-label.selected {
            background: linear-gradient(135deg, var(--accent-color), #00f2fe);
            border-color: var(--accent-color);
            color: white;
            transform: translateX(10px);
            box-shadow: 0 10px 30px rgba(79, 172, 254, 0.4);
        }

        .option-label.correct {
            background: linear-gradient(135deg, var(--success-color), #38f9d7);
            border-color: var(--success-color);
            color: white;
        }

        .option-label.incorrect {
            background: linear-gradient(135deg, var(--error-color), #ee5a52);
            border-color: var(--error-color);
            color: white;
        }

        .option-radio {
            margin-right: 15px;
            transform: scale(1.2);
        }

        .option-letter {
            font-weight: bold;
            margin-right: 15px;
            min-width: 25px;
            font-size: 1.1em;
        }

        /* ç»“æœæ˜¾ç¤º */
        .result-display {
            margin-top: 25px;
            padding: 20px;
            border-radius: 15px;
            animation: resultSlideIn 0.5s ease-out;
            position: relative;
            z-index: 2;
        }

        @keyframes resultSlideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .result-correct {
            background: linear-gradient(135deg, rgba(67, 233, 123, 0.2), rgba(56, 249, 215, 0.2));
            border: 2px solid var(--success-color);
        }

        .result-incorrect {
            background: linear-gradient(135deg, rgba(255, 107, 107, 0.2), rgba(238, 90, 82, 0.2));
            border: 2px solid var(--error-color);
        }

        .result-icon {
            font-size: 1.5em;
            margin-right: 10px;
        }

        .explanation {
            margin-top: 15px;
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            font-size: 0.95em;
            line-height: 1.6;
        }

        /* é€šçŸ¥ç»„ä»¶ */
        .notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 15px 25px;
            border-radius: 15px;
            color: white;
            font-weight: 500;
            z-index: 10000;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            transition: all 0.3s ease;
            max-width: 90vw;
        }

        .notification.show {
            animation: notificationSlideIn 0.3s ease-out;
        }

        @keyframes notificationSlideIn {
            from {
                opacity: 0;
                transform: translateX(-50%) translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
        }

        .notification.success {
            background: linear-gradient(135deg, var(--success-color), #38f9d7);
        }

        .notification.error {
            background: linear-gradient(135deg, var(--error-color), #ee5a52);
        }

        .notification.info {
            background: linear-gradient(135deg, var(--accent-color), #00f2fe);
        }

        /* å¿«æ·é”®æç¤º */
        .shortcuts-hint {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: var(--glass-bg);
            padding: 15px 20px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            font-size: 0.85em;
            opacity: 0.8;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .shortcuts-hint:hover {
            opacity: 1;
            transform: translateY(-3px);
        }

        /* åŠ è½½åŠ¨ç”» */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 3px solid rgba(255,255,255,0.3);
            border-top: 3px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        .loading-text {
            color: white;
            font-size: 1.2em;
            font-weight: 500;
            text-align: center;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .practice-container {
                padding: 60px 15px 20px;
            }
            
            .is-fullscreen .practice-container {
                padding: 60px 20px 20px;
            }
            
            .question-card {
                padding: 25px;
            }
            
            .action-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .action-btn {
                width: 100%;
                max-width: 300px;
                justify-content: center;
            }
            
            .practice-stats, .stats-panel {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }
            
            .filter-controls {
                grid-template-columns: 1fr;
            }
            
            .fullscreen-controls {
                position: relative;
                top: auto;
                right: auto;
                margin-bottom: 20px;
                justify-content: center;
            }
            
            .shortcuts-hint {
                display: none;
            }
        }

        /* å¡«ç©ºé¢˜æ ·å¼ */
        .fill-blank-section {
            margin: 20px 0;
        }

        .answer-input-container {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            border: 2px solid #e9ecef;
        }

        .input-label {
            display: block;
            font-weight: 600;
            margin-bottom: 12px;
            color: #495057;
            font-size: 16px;
        }

        .input-label i {
            margin-right: 8px;
            color: var(--primary-color);
        }

        .answer-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 16px;
            line-height: 1.5;
            resize: vertical;
            min-height: 100px;
            font-family: inherit;
            transition: border-color 0.3s;
            box-sizing: border-box;
        }

        .answer-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .input-actions {
            margin-top: 15px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
        }

        .btn-outline:hover {
            background: var(--primary-color);
            color: white;
        }

        .answer-comparison {
            margin-top: 25px;
            background: white;
            border-radius: 12px;
            border: 2px solid #e9ecef;
            overflow: hidden;
        }

        .comparison-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 20px;
            text-align: center;
        }

        .comparison-header h4 {
            margin: 0;
            font-size: 18px;
        }

        .comparison-header i {
            margin-right: 8px;
        }

        .comparison-content {
            padding: 20px;
        }

        .user-answer-section,
        .standard-answer-section {
            margin-bottom: 20px;
        }

        .user-answer-section h5,
        .standard-answer-section h5 {
            margin: 0 0 10px 0;
            font-size: 16px;
            font-weight: 600;
        }

        .user-answer-section h5 {
            color: #495057;
        }

        .standard-answer-section h5 {
            color: #28a745;
        }

        .answer-box {
            padding: 15px;
            border-radius: 8px;
            font-size: 15px;
            line-height: 1.6;
            white-space: pre-wrap;
        }

        .user-answer {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
        }

        .standard-answer {
            background: #d4edda;
            border: 2px solid #c3e6cb;
        }

        .similarity-score {
            margin-top: 20px;
            text-align: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .score-display {
            font-size: 18px;
            margin-bottom: 10px;
        }

        .score-label {
            margin-right: 10px;
            color: #495057;
        }

        .score-value {
            font-weight: bold;
            font-size: 24px;
        }

        .score-value.high {
            color: #28a745;
        }

        .score-value.medium {
            color: #ffc107;
        }

        .score-value.low {
            color: #dc3545;
        }

        .score-feedback {
            font-size: 16px;
            font-weight: 600;
        }

        .score-feedback.excellent {
            color: #28a745;
        }

        .score-feedback.good {
            color: #17a2b8;
        }

        .score-feedback.average {
            color: #ffc107;
        }

        .score-feedback.poor {
            color: #dc3545;
        }

        /* å¿«é€Ÿè®¿é—®é¢˜åº“æ ·å¼ */
        .quick-bank-card {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 20px;
            background: white;
            border-radius: 12px;
            border: 2px solid #e9ecef;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .quick-bank-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            border-color: var(--primary-color);
        }

        .quick-bank-card:active {
            transform: translateY(-1px);
        }

        .quick-bank-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            flex-shrink: 0;
        }

        .quick-bank-info {
            flex: 1;
        }

        .quick-bank-info h4 {
            margin: 0 0 5px 0;
            font-size: 18px;
            color: #333;
            font-weight: 600;
        }

        .quick-bank-info p {
            margin: 0 0 8px 0;
            color: #666;
            font-size: 14px;
        }

        .bank-stats {
            display: inline-block;
            background: #f8f9fa;
            color: #495057;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }

        .quick-bank-arrow {
            color: #6c757d;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .quick-bank-card:hover .quick-bank-arrow {
            color: var(--primary-color);
            transform: translateX(5px);
        }

        .quick-bank-arrow .rotated {
            transform: rotate(180deg);
        }

        .classification-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 16px;
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            color: #495057;
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
        }

        .classification-btn:hover {
            background: #28a745;
            border-color: #28a745;
            color: white;
            transform: translateY(-2px);
        }

        .classification-btn i {
            font-size: 16px;
        }

        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 768px) {
            .quick-banks-grid {
                grid-template-columns: 1fr !important;
                gap: 12px;
            }

            .quick-bank-card {
                padding: 15px;
                gap: 12px;
            }

            .quick-bank-icon {
                width: 50px;
                height: 50px;
                font-size: 20px;
            }

            .quick-bank-info h4 {
                font-size: 16px;
            }

            .classification-list {
                padding: 15px !important;
            }

            .classification-btn {
                padding: 10px 12px;
                font-size: 13px;
            }
        }
    </style>
</head>
<body>
    <!-- æµ®åŠ¨ç²’å­æ•ˆæœ -->
    <div class="floating-elements">
        <div class="floating-particle" style="left: 8%; animation-delay: 0s;"></div>
        <div class="floating-particle" style="left: 18%; animation-delay: 4s;"></div>
        <div class="floating-particle" style="left: 28%; animation-delay: 8s;"></div>
        <div class="floating-particle" style="left: 38%; animation-delay: 12s;"></div>
        <div class="floating-particle" style="left: 48%; animation-delay: 16s;"></div>
        <div class="floating-particle" style="left: 58%; animation-delay: 20s;"></div>
        <div class="floating-particle" style="left: 68%; animation-delay: 24s;"></div>
        <div class="floating-particle" style="left: 78%; animation-delay: 28s;"></div>
        <div class="floating-particle" style="left: 88%; animation-delay: 32s;"></div>
    </div>

    <div id="app" :class="['fullscreen-container', { 'is-fullscreen': isFullscreen }]">
        <!-- åŠ è½½è¦†ç›–å±‚ -->
        <div v-if="loading" class="loading-overlay">
            <div class="loading-spinner"></div>
            <div class="loading-text">{{ loadingText }}</div>
        </div>

        <!-- é€šçŸ¥ç»„ä»¶ -->
        <div v-if="notification.show" :class="['notification', notification.type, {show: notification.show}]">
            {{ notification.message }}
        </div>

        <!-- å…¨å±æ§åˆ¶æŒ‰é’® -->
        <div class="fullscreen-controls">
            <button @click="toggleFullscreen" :class="['fullscreen-btn', { active: isFullscreen }]" :title="isFullscreen ? 'é€€å‡ºå…¨å± [F11]' : 'è¿›å…¥å…¨å± [F11]'">
                <i :class="isFullscreen ? 'fas fa-compress' : 'fas fa-expand'"></i>
                {{ isFullscreen ? 'é€€å‡ºå…¨å±' : 'å…¨å±æ¨¡å¼' }}
            </button>
            <a href="../index.html" class="exit-btn" title="é€€å‡ºç»ƒä¹  [ESC]">
                <i class="fas fa-times"></i> é€€å‡ºç»ƒä¹ 
            </a>
        </div>

        <!-- ä¸»è¦å†…å®¹ -->
        <div v-if="!loading" class="practice-container">
            <!-- é¡µé¢æ ‡é¢˜ -->
            <h1 class="page-title">ğŸ§  æ™ºèƒ½é¢˜åº“ç»ƒä¹ </h1>

            <!-- é¢˜åº“é€‰æ‹©ç•Œé¢ -->
            <div v-if="currentView === 'selector'" class="question-bank-selector">
                <div class="selector-header">
                    <h2 class="selector-title">ğŸ“š é€‰æ‹©é¢˜åº“</h2>
                    <p class="selector-subtitle">æ”¯æŒæŒ‰å¹´ä»½ã€åˆ†ç±»ã€éš¾åº¦ç­›é€‰ï¼Œæ‰¹é‡åŠ è½½æ‰€æœ‰é¢˜åº“</p>
                </div>

                <!-- ç»Ÿè®¡é¢æ¿ -->
                <div class="stats-panel">
                    <div class="stat-card">
                        <div class="stat-number">{{ totalQuestions }}</div>
                        <div class="stat-label">æ€»é¢˜æ•°</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">{{ availableBanks.length }}</div>
                        <div class="stat-label">å¯ç”¨é¢˜åº“</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">{{ answeredQuestions }}</div>
                        <div class="stat-label">å·²ç­”é¢˜</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">{{ correctRate }}%</div>
                        <div class="stat-label">æ­£ç¡®ç‡</div>
                    </div>
                </div>

                <!-- ç­›é€‰åŒºåŸŸ -->
                <div class="filter-section">
                    <div class="filter-header">
                        <i class="fas fa-filter"></i>
                        ç­›é€‰æ¡ä»¶
                    </div>
                    <div class="filter-controls">
                        <div class="filter-group">
                            <label class="filter-label">é¢˜åº“ç±»å‹</label>
                            <select v-model="filters.category" class="filter-select">
                                <option value="">å…¨éƒ¨ç±»å‹</option>
                                <option v-if="isRealExamMode" value="å†å¹´çœŸé¢˜">å†å¹´çœŸé¢˜</option>
                                <option v-if="isRealExamMode" value="æ˜“é”™é¢˜é›†">æ˜“é”™é¢˜é›†</option>
                                <option v-if="isRealExamMode" value="è®¡ç®—é¢˜é›†">è®¡ç®—é¢˜é›†</option>
                                <option v-if="isRealExamMode" value="ç»¼åˆé¢˜é›†">ç»¼åˆé¢˜é›†</option>
                                <option v-if="!isRealExamMode" value="çœŸé¢˜">å†å¹´çœŸé¢˜</option>
                                <option v-if="!isRealExamMode" value="åˆ†ç±»">åˆ†ç±»ç»ƒä¹ </option>
                                <option v-if="!isRealExamMode" value="æ˜“é”™">æ˜“é”™é¢˜é›†</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label class="filter-label">å¹´ä»½</label>
                            <select v-model="filters.year" class="filter-select">
                                <option value="">å…¨éƒ¨å¹´ä»½</option>
                                <option v-if="isRealExamMode" value="all">æ‰€æœ‰å†å¹´çœŸé¢˜</option>
                                <option v-if="isRealExamMode" value="error-prone">æ˜“é”™é¢˜é›†</option>
                                <option v-if="isRealExamMode" value="calculation">è®¡ç®—é¢˜é›†</option>
                                <option v-if="isRealExamMode" value="comprehensive">ç»¼åˆé¢˜é›†</option>
                                <option v-for="year in availableYears" :key="year" :value="year">{{ year }}å¹´çœŸé¢˜</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label class="filter-label">éš¾åº¦</label>
                            <select v-model="filters.difficulty" class="filter-select">
                                <option value="">å…¨éƒ¨éš¾åº¦</option>
                                <option value="easy">ç®€å•</option>
                                <option value="medium">ä¸­ç­‰</option>
                                <option value="hard">å›°éš¾</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label class="filter-label">æœç´¢å…³é”®è¯</label>
                            <input v-model="filters.keyword" class="filter-input" placeholder="æœç´¢é¢˜åº“åç§°æˆ–å†…å®¹...">
                        </div>
                    </div>
                </div>

                <!-- æ™ºèƒ½ç»ƒä¹ æŒ‰é’® -->
                <div v-if="canStartPractice" class="smart-practice-section" style="margin: 20px 0; padding: 20px; background: rgba(102, 126, 234, 0.1); border-radius: 15px; border: 2px solid var(--primary-color);">
                    <h3 style="color: var(--primary-color); margin-bottom: 15px;">
                        <i class="fas fa-magic"></i> æ™ºèƒ½ç»ƒä¹ 
                    </h3>
                    <p style="margin-bottom: 15px; color: #666;">
                        å·²é€‰æ‹©: <strong>{{ getSelectedFilterText() }}</strong>
                        <span v-if="loadedQuestionsCount > 0"> | å·²åŠ è½½: {{ loadedQuestionsCount }}é¢˜</span>
                    </p>
                    <div class="action-buttons" style="margin: 0;">
                        <button @click="startSmartPractice('normal')" class="action-btn btn-success">
                            <i class="fas fa-play"></i> å¼€å§‹ç»ƒä¹ 
                        </button>
                        <button @click="startSmartPractice('random')" class="action-btn btn-primary">
                            <i class="fas fa-random"></i> éšæœºç»ƒä¹ 
                        </button>
                        <button @click="previewLoadedQuestions" class="action-btn">
                            <i class="fas fa-eye"></i> é¢„è§ˆé¢˜ç›®
                        </button>
                    </div>
                </div>

                <!-- å¿«é€Ÿè®¿é—®é¢˜åº“ -->
                <div class="quick-access-section" style="margin: 30px 0; padding: 25px; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-radius: 15px; border: 1px solid #dee2e6;">
                    <h3 style="margin: 0 0 20px 0; color: #495057; display: flex; align-items: center; gap: 10px; font-size: 18px;">
                        <i class="fas fa-rocket"></i> å¿«é€Ÿè®¿é—®é¢˜åº“
                        <span style="font-size: 14px; color: #6c757d; font-weight: normal;">- ä¸€é”®ç›´è¾¾å„ç±»ä¸“é¡¹ç»ƒä¹ </span>
                    </h3>
                    
                    <div class="quick-banks-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 15px;">
                        <!-- æ˜“é”™é¢˜é›† -->
                        <div class="quick-bank-card error-prone" @click="quickStartPractice('æ˜“é”™é¢˜é›†')" style="cursor: pointer;">
                            <div class="quick-bank-icon" style="background: linear-gradient(135deg, #dc3545, #c82333);">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="quick-bank-info">
                                <h4>æ˜“é”™é¢˜é›†</h4>
                                <p>é«˜é¢‘æ˜“é”™é¢˜ä¸“é¡¹è®­ç»ƒ</p>
                                <span class="bank-stats">é‡ç‚¹çªç ´ Â· æå‡æ­£ç¡®ç‡</span>
                            </div>
                            <div class="quick-bank-arrow">
                                <i class="fas fa-arrow-right"></i>
                            </div>
                        </div>

                        <!-- å†å¹´çœŸé¢˜ -->
                        <div class="quick-bank-card real-exam" @click="quickStartPractice('å†å¹´çœŸé¢˜')" style="cursor: pointer;">
                            <div class="quick-bank-icon" style="background: linear-gradient(135deg, #007bff, #0056b3);">
                                <i class="fas fa-graduation-cap"></i>
                            </div>
                            <div class="quick-bank-info">
                                <h4>å†å¹´çœŸé¢˜</h4>
                                <p>ä¸­å›½æµ·æ´‹å¤§å­¦2001-2023</p>
                                <span class="bank-stats">çœŸé¢˜æ¼”ç»ƒ Â· å®æˆ˜æ£€éªŒ</span>
                            </div>
                            <div class="quick-bank-arrow">
                                <i class="fas fa-arrow-right"></i>
                            </div>
                        </div>

                        <!-- åˆ†ç±»ç»ƒä¹  -->
                        <div class="quick-bank-card classification" @click="showClassificationMenu" style="cursor: pointer;">
                            <div class="quick-bank-icon" style="background: linear-gradient(135deg, #28a745, #1e7e34);">
                                <i class="fas fa-th-list"></i>
                            </div>
                            <div class="quick-bank-info">
                                <h4>åˆ†ç±»ç»ƒä¹ </h4>
                                <p>æŒ‰çŸ¥è¯†ç‚¹åˆ†ç±»ä¸“é¡¹ç»ƒä¹ </p>
                                <span class="bank-stats">ç³»ç»Ÿå­¦ä¹  Â· é€ä¸€çªç ´</span>
                            </div>
                            <div class="quick-bank-arrow">
                                <i class="fas fa-chevron-down" :class="{ 'rotated': showClassificationList }"></i>
                            </div>
                        </div>

                        <!-- å…¨éƒ¨é¢˜åº“ -->
                        <div class="quick-bank-card all-banks" @click="loadAllQuestionBanks" style="cursor: pointer;">
                            <div class="quick-bank-icon" style="background: linear-gradient(135deg, #6f42c1, #59339d);">
                                <i class="fas fa-database"></i>
                            </div>
                            <div class="quick-bank-info">
                                <h4>å…¨éƒ¨é¢˜åº“</h4>
                                <p>åŠ è½½æ‰€æœ‰18ä¸ªé¢˜åº“</p>
                                <span class="bank-stats">æµ·é‡é¢˜ç›® Â· ç»¼åˆç»ƒä¹ </span>
                            </div>
                            <div class="quick-bank-arrow">
                                <i class="fas fa-arrow-right"></i>
                            </div>
                        </div>
                    </div>

                    <!-- åˆ†ç±»é¢˜åº“å±•å¼€åˆ—è¡¨ -->
                    <div v-if="showClassificationList" class="classification-list" style="margin-top: 20px; padding: 20px; background: white; border-radius: 12px; border: 2px solid #28a745;">
                        <h4 style="margin: 0 0 15px 0; color: #28a745; display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-list-ul"></i> é€‰æ‹©åˆ†ç±»é¢˜åº“
                        </h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px;">
                            <button v-for="category in classificationCategories" 
                                    :key="category.id"
                                    @click="quickStartClassification(category.id, category.name)"
                                    class="classification-btn">
                                <i :class="category.icon"></i>
                                {{ category.name }}
                            </button>
                        </div>
                    </div>
                </div>

                <!-- æ“ä½œæŒ‰é’® -->
                <div class="action-buttons">
                    <button @click="loadAllQuestionBanks" class="action-btn">
                        <i class="fas fa-download"></i> æ‰¹é‡åŠ è½½æ‰€æœ‰é¢˜åº“
                    </button>
                    <button @click="loadFromGitHub" class="action-btn btn-success">
                        <i class="fab fa-github"></i> ä»GitHubåŠ è½½
                    </button>
                    <button @click="loadFromLocal" class="action-btn btn-warning">
                        <i class="fas fa-folder"></i> ä»æœ¬åœ°åŠ è½½
                    </button>
                    <button @click="startRandomPractice" class="action-btn btn-success" :disabled="totalQuestions === 0">
                        <i class="fas fa-random"></i> éšæœºç»ƒä¹ æ¨¡å¼
                    </button>
                    <button @click="enterFullscreenMode" class="action-btn">
                        <i class="fas fa-expand"></i> å…¨å±ç»ƒä¹ æ¨¡å¼
                    </button>
                    <button @click="resetProgress" class="action-btn btn-danger">
                        <i class="fas fa-redo"></i> é‡ç½®è¿›åº¦
                    </button>
                </div>

                <!-- é¢˜åº“åˆ—è¡¨ -->
                <div v-if="filteredBanks.length > 0" class="question-bank-list">
                    <div 
                        v-for="bank in filteredBanks" 
                        :key="bank.id"
                        :class="['bank-item', { selected: selectedBanks.includes(bank.id) }]"
                        @click="toggleBankSelection(bank.id)"
                    >
                        <div class="bank-info">
                            <div class="bank-name">{{ bank.name }}</div>
                            <div class="bank-meta">
                                <span><i class="fas fa-question-circle"></i> {{ bank.questionCount || 0 }} é¢˜</span>
                                <span><i class="fas fa-tag"></i> {{ bank.category || 'æœªåˆ†ç±»' }}</span>
                                <span v-if="bank.year"><i class="fas fa-calendar"></i> {{ bank.year }}</span>
                                <span><i class="fas fa-signal"></i> {{ getDifficultyText(bank.difficulty) }}</span>
                            </div>
                        </div>
                        <div class="bank-actions" @click.stop>
                            <button @click="startBankPractice(bank.id)" class="bank-btn primary">
                                <i class="fas fa-play"></i> å¼€å§‹ç»ƒä¹ 
                            </button>
                            <button @click="previewBank(bank.id)" class="bank-btn secondary">
                                <i class="fas fa-eye"></i> é¢„è§ˆ
                            </button>
                        </div>
                    </div>
                </div>

                <div v-else-if="!isLoadingBanks" class="question-bank-list" style="text-align: center; color: #666;">
                    <i class="fas fa-search" style="font-size: 3em; margin-bottom: 20px; opacity: 0.5;"></i>
                    <h3>æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„é¢˜åº“</h3>
                    <p>è¯·è°ƒæ•´ç­›é€‰æ¡ä»¶æˆ–åŠ è½½é¢˜åº“æ•°æ®</p>
                </div>

                <div v-if="selectedBanks.length > 0" class="action-buttons" style="margin-top: 20px;">
                    <button @click="startSelectedBanksPractice" class="action-btn btn-success">
                        <i class="fas fa-play"></i> å¼€å§‹ç»ƒä¹ é€‰ä¸­é¢˜åº“ ({{ selectedBanks.length }}ä¸ª)
                    </button>
                    <button @click="clearSelection" class="action-btn">
                        <i class="fas fa-times"></i> æ¸…é™¤é€‰æ‹©
                    </button>
                </div>
            </div>

            <!-- çœŸé¢˜é€‰æ‹©å™¨ -->
            <div v-if="currentView === 'realExamSelector'" class="selector-container">
                <div class="selector-header">
                    <h1 class="selector-title">ğŸ† å†å¹´çœŸé¢˜é€‰æ‹©</h1>
                    <p class="selector-subtitle">é€‰æ‹©è¦ç»ƒä¹ çš„çœŸé¢˜å¹´ä»½æˆ–åˆ†ç±»</p>
                </div>

                <!-- ç»Ÿè®¡é¢æ¿ -->
                <div class="stats-panel">
                    <div class="stat-card">
                        <div class="stat-number">{{ totalQuestions }}</div>
                        <div class="stat-label">æ€»é¢˜æ•°</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">{{ availableBanks.length }}</div>
                        <div class="stat-label">å¯ç”¨é¢˜åº“</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">{{ realExamYears.length }}</div>
                        <div class="stat-label">å¹´ä»½æ•°é‡</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">{{ answeredQuestions }}</div>
                        <div class="stat-label">å·²ç­”é¢˜</div>
                    </div>
                </div>

                <!-- çœŸé¢˜é¢˜åº“åˆ—è¡¨ -->
                <div class="question-bank-list">
                    <div 
                        v-for="bank in availableBanks" 
                        :key="bank.id"
                        class="bank-item"
                        @click="startYearPractice(bank.year, 'normal')"
                    >
                        <div class="bank-info">
                            <div class="bank-name">{{ bank.name }}</div>
                            <div class="bank-meta">
                                <span><i class="fas fa-question-circle"></i> {{ bank.questionCount || 0 }} é¢˜</span>
                                <span><i class="fas fa-tag"></i> {{ bank.category || 'å†å¹´çœŸé¢˜' }}</span>
                                <span v-if="bank.year && bank.year !== 'all'"><i class="fas fa-calendar"></i> {{ bank.year }}å¹´</span>
                                <span><i class="fas fa-signal"></i> {{ getDifficultyText(bank.difficulty) }}</span>
                            </div>
                            <div class="bank-description">{{ bank.description }}</div>
                        </div>
                        <div class="bank-actions" @click.stop>
                            <button @click="startYearPractice(bank.year, 'normal')" class="bank-btn primary">
                                <i class="fas fa-play"></i> é¡ºåºç»ƒä¹ 
                            </button>
                            <button @click="startYearPractice(bank.year, 'random')" class="bank-btn secondary">
                                <i class="fas fa-random"></i> éšæœºç»ƒä¹ 
                            </button>
                        </div>
                    </div>
                </div>

                <!-- è¿”å›æŒ‰é’® -->
                <div class="action-buttons" style="margin-top: 30px;">
                    <button @click="backToSelector" class="action-btn">
                        <i class="fas fa-arrow-left"></i> è¿”å›é¢˜åº“é€‰æ‹©
                    </button>
                    <button @click="startYearPractice('all', 'random')" class="action-btn btn-success">
                        <i class="fas fa-random"></i> éšæœºæ‰€æœ‰çœŸé¢˜
                    </button>
                </div>
            </div>

            <!-- ç»ƒä¹ ç•Œé¢ -->
            <div v-if="currentView === 'practice'">
            <!-- ç»ƒä¹ ç»Ÿè®¡ -->
            <div class="practice-stats">
                <div class="stat-item">
                    <div class="stat-value">{{ currentQuestionIndex + 1 }}</div>
                    <div class="stat-label">å½“å‰é¢˜ç›®</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">{{ questions.length }}</div>
                    <div class="stat-label">æ€»é¢˜ç›®æ•°</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">{{ correctAnswers }}</div>
                    <div class="stat-label">æ­£ç¡®é¢˜æ•°</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">{{ Math.round((correctAnswers / Math.max(answeredQuestions, 1)) * 100) }}%</div>
                    <div class="stat-label">æ­£ç¡®ç‡</div>
                </div>
            </div>

            <!-- é¢˜ç›®å¡ç‰‡ -->
            <div v-if="currentQuestion" class="question-card">
                <div class="question-header">
                    <div class="question-number">
                        ç¬¬ {{ currentQuestionIndex + 1 }} é¢˜
                            <span v-if="currentQuestion.bank" style="font-size: 0.8em; opacity: 0.8;">
                                ({{ currentQuestion.bank }})
                            </span>
                    </div>
                        <div :class="['question-difficulty', `difficulty-${currentQuestion.difficulty || 'medium'}`]">
                        {{ getDifficultyText(currentQuestion.difficulty) }}
                    </div>
                </div>

                <div class="question-title">
                    {{ currentQuestion.title }}
                </div>

                    <div class="question-content" v-if="currentQuestion.content" v-html="currentQuestion.content"></div>

                    <!-- é€‰æ‹©é¢˜é€‰é¡¹ -->
                    <ul class="options-list" v-if="currentQuestion.options && currentQuestion.options.length > 0">
                    <li v-for="(option, index) in currentQuestion.options" :key="index" class="option-item">
                            <label :class="[
                                'option-label', 
                                { 
                                    selected: selectedAnswer === index,
                                    correct: showResult && index === currentQuestion.answer,
                                    incorrect: showResult && selectedAnswer === index && selectedAnswer !== currentQuestion.answer
                                }
                            ]">
                                <div class="option-letter">{{ String.fromCharCode(65 + index) }}</div>
                            <input 
                                type="radio" 
                                :name="`question-${currentQuestionIndex}`"
                                :value="index"
                                v-model="selectedAnswer"
                                class="option-radio"
                                    style="display: none;"
                            >
                            {{ option }}
                        </label>
                    </li>
                </ul>
                
                    <!-- å¡«ç©ºé¢˜/ä¸»è§‚é¢˜è¾“å…¥åŒºåŸŸ -->
                    <div v-else class="fill-blank-section">
                        <div class="answer-input-container">
                            <label class="input-label">
                                <i class="fas fa-pencil-alt"></i>
                                è¯·åœ¨ä¸‹æ–¹è¾“å…¥æ‚¨çš„ç­”æ¡ˆï¼š
                            </label>
                            <textarea 
                                v-model="userTextAnswer" 
                                :placeholder="getAnswerPlaceholder(currentQuestion)"
                                rows="4"
                                class="answer-input"
                                @input="onAnswerInput"></textarea>
                            
                            <div class="input-actions">
                                <button @click="submitTextAnswer" 
                                        class="action-btn btn-primary"
                                        :disabled="!userTextAnswer.trim() || showResult">
                                    <i class="fas fa-check"></i>
                                    æäº¤ç­”æ¡ˆ
                                </button>
                                <button @click="showStandardAnswer" 
                                        class="action-btn btn-outline"
                                        v-if="!showResult">
                                    <i class="fas fa-eye"></i>
                                    æŸ¥çœ‹ç­”æ¡ˆ
                                </button>
                            </div>
                        </div>
                        
                        <!-- ç­”æ¡ˆå¯¹æ¯”åŒºåŸŸ -->
                        <div v-if="showResult || showAnswer" class="answer-comparison">
                            <div class="comparison-header">
                                <h4><i class="fas fa-balance-scale"></i> ç­”æ¡ˆå¯¹æ¯”</h4>
                            </div>
                            
                            <div class="comparison-content">
                                <div class="user-answer-section">
                                    <h5><i class="fas fa-user"></i> æ‚¨çš„ç­”æ¡ˆ</h5>
                                    <div class="answer-box user-answer">{{ userTextAnswer }}</div>
                                </div>
                                
                                <div class="standard-answer-section">
                                    <h5><i class="fas fa-star"></i> æ ‡å‡†ç­”æ¡ˆ</h5>
                                    <div class="answer-box standard-answer" v-html="currentQuestion.answer"></div>
                                </div>
                                
                                <div v-if="showResult" class="similarity-score">
                                    <div class="score-display">
                                        <span class="score-label">ç›¸ä¼¼åº¦:</span>
                                        <span class="score-value" :class="getSimilarityClass(answerSimilarity)">
                                            {{ answerSimilarity }}%
                                        </span>
                                    </div>
                                    <div class="score-feedback" :class="getFeedbackClass(answerSimilarity)">
                                        {{ getFeedbackText(answerSimilarity) }}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                <div class="action-buttons">
                        <button @click="submitAnswer" class="action-btn" :disabled="selectedAnswer === null || showResult" title="æäº¤ç­”æ¡ˆ [Enter]">
                            <i class="fas fa-check"></i> æäº¤ç­”æ¡ˆ
                        </button>
                        <button @click="saveProgress" class="action-btn btn-warning" title="ä¿å­˜è¿›åº¦ [Ctrl+S]">
                            <i class="fas fa-save"></i> ä¿å­˜è¿›åº¦
                        </button>
                        <button @click="backToSelector" class="action-btn">
                            <i class="fas fa-arrow-left"></i> è¿”å›é¢˜åº“é€‰æ‹©
                        </button>
                    </div>

                    <div style="display: flex; gap: 15px; margin-top: 20px;">
                        <button @click="previousQuestion" class="action-btn" :disabled="currentQuestionIndex === 0" title="ä¸Šä¸€é¢˜ [â†]" style="flex: 1;">
                            <i class="fas fa-arrow-left"></i> ä¸Šä¸€é¢˜
                        </button>
                        <button @click="nextQuestion" class="action-btn" :disabled="currentQuestionIndex === questions.length - 1" title="ä¸‹ä¸€é¢˜ [â†’]" style="flex: 1;">
                            ä¸‹ä¸€é¢˜ <i class="fas fa-arrow-right"></i>
                        </button>
                </div>

                <!-- ç­”é¢˜ç»“æœæ˜¾ç¤º -->
                <div v-if="showResult" :class="['result-display', isCorrect ? 'result-correct' : 'result-incorrect']">
                    <div>
                        <i :class="['result-icon', isCorrect ? 'fas fa-check-circle' : 'fas fa-times-circle']"></i>
                        <strong>{{ isCorrect ? 'å›ç­”æ­£ç¡®ï¼' : 'å›ç­”é”™è¯¯ï¼' }}</strong>
                            <span v-if="!isCorrect && currentQuestion.options">
                                æ­£ç¡®ç­”æ¡ˆæ˜¯ï¼š{{ String.fromCharCode(65 + currentQuestion.answer) }}. {{ currentQuestion.options[currentQuestion.answer] }}
                            </span>
                    </div>
                    <div v-if="currentQuestion.explanation" class="explanation">
                            <strong>ğŸ“– è§£æï¼š</strong>{{ currentQuestion.explanation }}
                    </div>
                    </div>
                </div>

                <div v-else class="question-card" style="text-align: center; padding: 60px;">
                    <i class="fas fa-graduation-cap" style="font-size: 4em; color: #ccc; margin-bottom: 20px;"></i>
                    <h3>ç»ƒä¹ å®Œæˆï¼</h3>
                    <p style="margin: 20px 0;">
                        æ€»è®¡ {{ questions.length }} é¢˜ï¼Œæ­£ç¡® {{ correctAnswers }} é¢˜ï¼Œæ­£ç¡®ç‡ {{ Math.round((correctAnswers / Math.max(questions.length, 1)) * 100) }}%
                    </p>
                    <button @click="backToSelector" class="action-btn btn-success">
                        <i class="fas fa-redo"></i> é‡æ–°é€‰æ‹©é¢˜åº“
                    </button>
                </div>
            </div>

            <!-- å¿«æ·é”®æç¤º -->
            <div class="shortcuts-hint">
                <i class="fas fa-keyboard"></i> 
                å¿«æ·é”®: Enter-æäº¤ | â†â†’-åˆ‡æ¢é¢˜ç›® | F11-å…¨å± | ESC-é€€å‡º | Ctrl+S-ä¿å­˜
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue;

        createApp({
            data() {
                return {
                    loading: true,
                    loadingText: 'æ­£åœ¨åˆå§‹åŒ–...',
                    isLoadingBanks: false,
                    isFullscreen: false,
                    currentView: 'selector', // 'selector' | 'practice'
                    notification: {
                        show: false,
                        message: '',
                        type: 'info'
                    },
                    // é¢˜åº“æ•°æ®
                    availableBanks: [],
                    selectedBanks: [],
                    totalQuestions: 0,
                    
                    // çœŸé¢˜ç›¸å…³æ•°æ®
                    allQuestions: [],
                    realExamYears: [],
                    isRealExamMode: false,
                    // ç­›é€‰æ¡ä»¶
                    filters: {
                        category: '',
                        year: '',
                        difficulty: '',
                        keyword: ''
                    },
                    
                    // æ™ºèƒ½åŠ è½½ç›¸å…³
                    autoLoadEnabled: true,
                    lastLoadedCategory: '',
                    lastLoadedYear: '',
                    filterTimeout: null,
                    
                    // å¡«ç©ºé¢˜ç›¸å…³
                    userTextAnswer: '',
                    showAnswer: false,
                    answerSimilarity: 0,
                    
                    // å¿«é€Ÿè®¿é—®ç›¸å…³
                    showClassificationList: false,
                    classificationCategories: [
                        { id: 'fluid-basics', name: 'æµä½“åŠ›å­¦åŸºç¡€', icon: 'fas fa-water' },
                        { id: 'fluid-properties', name: 'æµä½“æ€§è´¨', icon: 'fas fa-flask' },
                        { id: 'pressure', name: 'å‹åŠ›', icon: 'fas fa-compress-arrows-alt' },
                        { id: 'viscosity', name: 'ç²˜æ€§', icon: 'fas fa-tint' },
                        { id: 'reynolds', name: 'é›·è¯ºæ•°', icon: 'fas fa-calculator' },
                        { id: 'boundary-layer', name: 'è¾¹ç•Œå±‚', icon: 'fas fa-layer-group' },
                        { id: 'streamline', name: 'æµçº¿è½¨è¿¹', icon: 'fas fa-route' },
                        { id: 'vorticity', name: 'æ¶¡åº¦', icon: 'fas fa-sync-alt' },
                        { id: 'momentum', name: 'åŠ¨é‡æ–¹ç¨‹', icon: 'fas fa-arrow-right' },
                        { id: 'energy', name: 'èƒ½é‡æ–¹ç¨‹', icon: 'fas fa-bolt' },
                        { id: 'potential-flow', name: 'åŠ¿æµ', icon: 'fas fa-wave-square' },
                        { id: 'pipe-flow', name: 'ç®¡é“æµåŠ¨', icon: 'fas fa-minus' },
                        { id: 'turbulence', name: 'æ¹æµ', icon: 'fas fa-wind' },
                        { id: 'free-surface', name: 'è‡ªç”±é¢', icon: 'fas fa-water' },
                        { id: 'experiment', name: 'å®éªŒä¸é‡çº²', icon: 'fas fa-microscope' }
                    ],
                    // ç»ƒä¹ æ•°æ®
                    questions: [],
                    currentQuestionIndex: 0,
                    selectedAnswer: null,
                    showResult: false,
                    isCorrect: false,
                    correctAnswers: 0,
                    answeredQuestions: 0,
                    startTime: null,
                    totalTime: 0
                }
            },
            
            computed: {
                currentQuestion() {
                    return this.questions[this.currentQuestionIndex] || null;
                },
                
                correctRate() {
                    if (this.answeredQuestions === 0) return 0;
                    return Math.round((this.correctAnswers / this.answeredQuestions) * 100);
                },
                
                availableYears() {
                    // å¼ºåˆ¶è¿”å›çœŸé¢˜å¹´ä»½åˆ—è¡¨ï¼Œç¡®ä¿å¹´ä»½é€‰é¡¹å§‹ç»ˆæ˜¾ç¤º
                    return [2023, 2021, 2020, 2019, 2018, 2016, 2015, 2014, 2013, 2011, 2010, 2009, 2006, 2004, 2003, 2002, 2001];
                },

                canStartPractice() {
                    // åªè¦é€‰æ‹©äº†å…·ä½“çš„å¹´ä»½æˆ–åˆ†ç±»ï¼Œå°±æ˜¾ç¤ºç»ƒä¹ æŒ‰é’®
                    const hasCategory = this.filters.category && 
                                       this.filters.category !== 'å…¨éƒ¨ç±»å‹' && 
                                       this.filters.category !== '';
                    const hasYear = this.filters.year && 
                                   this.filters.year !== 'å…¨éƒ¨å¹´ä»½' && 
                                   this.filters.year !== '';
                    
                    return hasCategory || hasYear;
                },

                loadedQuestionsCount() {
                    return this.questions.length;
                },
                
                filteredBanks() {
                    return this.availableBanks.filter(bank => {
                        // åˆ†ç±»ç­›é€‰
                        if (this.filters.category && this.filters.category !== 'å…¨éƒ¨ç±»å‹') {
                            if (this.filters.category === 'å†å¹´çœŸé¢˜' && bank.category !== 'å†å¹´çœŸé¢˜') return false;
                            if (this.filters.category === 'æ˜“é”™é¢˜é›†' && bank.category !== 'æ˜“é”™é¢˜é›†') return false;
                            if (this.filters.category === 'è®¡ç®—é¢˜é›†' && bank.category !== 'è®¡ç®—é¢˜é›†') return false;
                            if (this.filters.category === 'ç»¼åˆé¢˜é›†' && bank.category !== 'ç»¼åˆé¢˜é›†') return false;
                        }
                        
                        // å¹´ä»½ç­›é€‰
                        if (this.filters.year && this.filters.year !== 'å…¨éƒ¨å¹´ä»½') {
                            // å¦‚æœæ˜¯çœŸé¢˜æ¨¡å¼ï¼ŒæŒ‰å¹´ä»½ç­›é€‰
                            if (this.isRealExamMode) {
                                const selectedYear = parseInt(this.filters.year);
                                if (bank.year === 'all') return true; // æ‰€æœ‰çœŸé¢˜
                                if (bank.year === selectedYear) return true; // ç‰¹å®šå¹´ä»½
                                if (bank.year === 'error-prone' || bank.year === 'calculation' || bank.year === 'comprehensive') return true; // ç‰¹æ®Šåˆ†ç±»
                                return false;
                            } else {
                                // æ™®é€šé¢˜åº“æ¨¡å¼
                                if (this.filters.year === '2000-2021' && bank.year === 'all') return true;
                                if (this.filters.year === '2000-2021' && typeof bank.year === 'number' && bank.year >= 2000 && bank.year <= 2021) return true;
                                if (this.filters.year !== '2000-2021' && bank.year !== this.filters.year) return false;
                            }
                        }
                        
                        // éš¾åº¦ç­›é€‰
                        if (this.filters.difficulty && this.filters.difficulty !== 'å…¨éƒ¨éš¾åº¦') {
                            const difficultyMap = {
                                'ç®€å•': 'easy',
                                'ä¸­ç­‰': 'medium',
                                'å›°éš¾': 'hard'
                            };
                            if (bank.difficulty !== difficultyMap[this.filters.difficulty]) return false;
                        }
                        
                        // å…³é”®è¯æœç´¢
                        if (this.filters.keyword) {
                            const keyword = this.filters.keyword.toLowerCase();
                            if (!bank.name.toLowerCase().includes(keyword) && 
                                !bank.description?.toLowerCase().includes(keyword)) return false;
                        }
                        
                        return true;
                    });
                }
            },
            
            methods: {
                // æ˜¾ç¤ºé€šçŸ¥
                showNotification(message, type = 'info') {
                    this.notification = { show: true, message, type };
                    setTimeout(() => {
                        this.notification.show = false;
                    }, 3000);
                },

                // ç­›é€‰æ¡ä»¶å˜åŒ–å¤„ç†
                onFilterChange() {
                    // ç«‹å³æ‰§è¡Œæ™ºèƒ½åŠ è½½ï¼Œä¸å»¶è¿Ÿ
                    this.smartLoadQuestions();
                },

                // æ™ºèƒ½åŠ è½½é¢˜ç›®
                async smartLoadQuestions() {
                    if (!this.autoLoadEnabled) return;
                    
                    const category = this.filters.category;
                    const year = this.filters.year;
                    
                    // æ£€æŸ¥æ˜¯å¦éœ€è¦é‡æ–°åŠ è½½
                    if (category === this.lastLoadedCategory && year === this.lastLoadedYear) {
                        return;
                    }
                    
                    console.log('ğŸ¯ æ™ºèƒ½åŠ è½½è§¦å‘:', { category, year });
                    
                    try {
                        // ä¼˜å…ˆå¤„ç†å¹´ä»½ç­›é€‰ - è¿™æ˜¯æœ€é‡è¦çš„åŠŸèƒ½
                        if (year && year !== 'å…¨éƒ¨å¹´ä»½' && year !== 'all' && year !== '') {
                            console.log(`ğŸ“… åŠ è½½${year}å¹´çœŸé¢˜`);
                            await this.loadRealExamQuestions(year);
                            return;
                        }
                        
                        // å¤„ç†åˆ†ç±»ç­›é€‰
                        if (category === 'å†å¹´çœŸé¢˜') {
                            console.log('ğŸ“š åŠ è½½æ‰€æœ‰å†å¹´çœŸé¢˜');
                            await this.loadRealExamQuestions('all');
                        } else if (category === 'æ˜“é”™é¢˜é›†') {
                            console.log('âš ï¸ åŠ è½½æ˜“é”™é¢˜é›†');
                            await this.loadErrorProneQuestions();
                        } else if (category === 'è®¡ç®—é¢˜é›†') {
                            console.log('ğŸ§® åŠ è½½è®¡ç®—é¢˜é›†');
                            await this.loadCalculationQuestions();
                        } else if (category === 'ç»¼åˆé¢˜é›†') {
                            console.log('ğŸ“ åŠ è½½ç»¼åˆé¢˜é›†');
                            await this.loadComprehensiveQuestions();
                        } else {
                            // æ¸…ç©ºé¢˜ç›®ï¼Œç­‰å¾…ç”¨æˆ·é€‰æ‹©
                            this.questions = [];
                            this.totalQuestions = 0;
                        }
                        
                        this.lastLoadedCategory = category;
                        this.lastLoadedYear = year;
                        
                    } catch (error) {
                        console.error('æ™ºèƒ½åŠ è½½å¤±è´¥:', error);
                        this.showNotification('æ™ºèƒ½åŠ è½½å¤±è´¥: ' + error.message, 'error');
                    }
                },

                // åŠ è½½çœŸé¢˜é¢˜ç›®
                async loadRealExamQuestions(year = 'all') {
                    this.loading = true;
                    this.loadingText = `æ­£åœ¨åŠ è½½${year === 'all' ? 'å†å¹´' : year + 'å¹´'}çœŸé¢˜...`;
                    
                    try {
                        const response = await fetch('../question-banks/çœŸé¢˜_ä¸­å›½æµ·æ´‹å¤§å­¦_2000-2021_cleaned.json');
                        if (!response.ok) {
                            throw new Error('çœŸé¢˜æ–‡ä»¶åŠ è½½å¤±è´¥');
                        }
                        
                        let questions = await response.json();
                        
                        // æ ¹æ®å¹´ä»½ç­›é€‰
                        if (year && year !== 'all' && year !== 'å…¨éƒ¨å¹´ä»½') {
                            const selectedYear = parseInt(year);
                            questions = questions.filter(q => q.year === selectedYear);
                            console.log(`ğŸ“… ç­›é€‰${selectedYear}å¹´çœŸé¢˜: æ‰¾åˆ° ${questions.length} é¢˜`);
                        }
                        
                        if (questions.length === 0) {
                            throw new Error(`æœªæ‰¾åˆ°${year === 'all' ? '' : year + 'å¹´'}çš„çœŸé¢˜æ•°æ®`);
                        }
                        
                        // å¤„ç†é¢˜ç›®æ•°æ®å¹¶è¡¥å…¨ä¿¡æ¯
                        this.questions = questions.map((q, index) => ({
                            ...q,
                            bankId: 'real-exam',
                            bank: 'å†å¹´çœŸé¢˜',
                            bankName: `${q.year}å¹´çœŸé¢˜`,
                            category: 'å†å¹´çœŸé¢˜',
                            difficulty: this.getDifficultyByScore(q.score),
                            
                            // è¡¥å…¨é€‰é¡¹
                            options: q.options && q.options.length > 0 ? q.options : this.generateOptions(q),
                            
                            // è¡¥å…¨ç­”æ¡ˆ
                            answer: q.answer || this.generateAnswer(q),
                            
                            // è¡¥å…¨è§£æ
                            explanation: q.explanation || this.generateExplanation(q),
                            
                            // è¡¥å…¨çŸ¥è¯†ç‚¹
                            knowledgePoints: q.tags || this.generateKnowledgePoints(q),
                            
                            // æ·»åŠ é¢˜ç›®åºå·
                            questionNumber: index + 1
                        }));
                        
                        this.totalQuestions = this.questions.length;
                        
                        // æ˜¾ç¤ºåŠ è½½æˆåŠŸæç¤º
                        const yearText = year === 'all' ? 'å†å¹´çœŸé¢˜' : `${year}å¹´çœŸé¢˜`;
                        this.showNotification(`âœ… å·²åŠ è½½${yearText}: ${this.questions.length}é¢˜`, 'success');
                        
                    } finally {
                        this.loading = false;
                    }
                },

                // ç”Ÿæˆé€‰é¡¹ï¼ˆå½“é¢˜ç›®æ²¡æœ‰é€‰é¡¹æ—¶ï¼‰
                generateOptions(question) {
                    if (question.type === 'è®¡ç®—é¢˜' || question.type === 'åˆ†æé¢˜' || question.type === 'è¯æ˜é¢˜') {
                        return []; // è®¡ç®—é¢˜ç­‰ä¸éœ€è¦é€‰é¡¹
                    }
                    return ['A', 'B', 'C', 'D'];
                },

                // ç”Ÿæˆç­”æ¡ˆï¼ˆå½“é¢˜ç›®æ²¡æœ‰ç­”æ¡ˆæ—¶ï¼‰
                generateAnswer(question) {
                    if (question.type === 'è®¡ç®—é¢˜') {
                        return 'è¯·å‚è€ƒæ ‡å‡†ç­”æ¡ˆè¿›è¡Œè®¡ç®—';
                    } else if (question.type === 'åˆ†æé¢˜') {
                        return 'è¯·ç»“åˆæµä½“åŠ›å­¦åŸç†è¿›è¡Œåˆ†æ';
                    } else if (question.type === 'è¯æ˜é¢˜') {
                        return 'è¯·æŒ‰ç…§æ•°å­¦è¯æ˜æ­¥éª¤è¿›è¡Œæ¨å¯¼';
                    } else {
                        return 0; // é€‰æ‹©é¢˜é»˜è®¤é€‰æ‹©A
                    }
                },

                // ç”Ÿæˆè§£æï¼ˆå½“é¢˜ç›®æ²¡æœ‰è§£ææ—¶ï¼‰
                generateExplanation(question) {
                    const typeExplanations = {
                        'è®¡ç®—é¢˜': 'æœ¬é¢˜è€ƒæŸ¥æµä½“åŠ›å­¦çš„è®¡ç®—èƒ½åŠ›ï¼Œéœ€è¦è¿ç”¨ç›¸å…³å…¬å¼è¿›è¡Œæ±‚è§£ã€‚',
                        'åˆ†æé¢˜': 'æœ¬é¢˜è€ƒæŸ¥å¯¹æµä½“åŠ›å­¦ç°è±¡çš„ç†è§£å’Œåˆ†æèƒ½åŠ›ã€‚',
                        'è¯æ˜é¢˜': 'æœ¬é¢˜è€ƒæŸ¥æµä½“åŠ›å­¦ç†è®ºçš„æ¨å¯¼å’Œè¯æ˜èƒ½åŠ›ã€‚',
                        'ç»¼åˆé¢˜': 'æœ¬é¢˜ç»¼åˆè€ƒæŸ¥å¤šä¸ªæµä½“åŠ›å­¦çŸ¥è¯†ç‚¹ã€‚',
                        'é€‰æ‹©é¢˜': 'æœ¬é¢˜è€ƒæŸ¥æµä½“åŠ›å­¦åŸºç¡€æ¦‚å¿µçš„ç†è§£ã€‚'
                    };
                    
                    let explanation = typeExplanations[question.type] || 'æœ¬é¢˜è€ƒæŸ¥æµä½“åŠ›å­¦ç›¸å…³çŸ¥è¯†ã€‚';
                    
                    // æ ¹æ®åˆ†æ•°æ·»åŠ éš¾åº¦æç¤º
                    if (question.score >= 15) {
                        explanation += 'æœ¬é¢˜éš¾åº¦è¾ƒé«˜ï¼Œéœ€è¦æ·±å…¥ç†è§£ç›¸å…³æ¦‚å¿µã€‚';
                    } else if (question.score >= 10) {
                        explanation += 'æœ¬é¢˜éš¾åº¦ä¸­ç­‰ï¼Œéœ€è¦æŒæ¡åŸºæœ¬åŸç†ã€‚';
                    } else {
                        explanation += 'æœ¬é¢˜éš¾åº¦è¾ƒä½ï¼Œå±äºåŸºç¡€çŸ¥è¯†ç‚¹ã€‚';
                    }
                    
                    return explanation;
                },

                // ç”ŸæˆçŸ¥è¯†ç‚¹ï¼ˆå½“é¢˜ç›®æ²¡æœ‰æ ‡ç­¾æ—¶ï¼‰
                generateKnowledgePoints(question) {
                    const titleLower = question.title.toLowerCase();
                    const knowledgePoints = [];
                    
                    // æ ¹æ®é¢˜ç›®å†…å®¹æ™ºèƒ½è¯†åˆ«çŸ¥è¯†ç‚¹
                    if (titleLower.includes('é›·è¯ºæ•°') || titleLower.includes('reynolds')) {
                        knowledgePoints.push('é›·è¯ºæ•°');
                    }
                    if (titleLower.includes('è¾¹ç•Œå±‚')) {
                        knowledgePoints.push('è¾¹ç•Œå±‚');
                    }
                    if (titleLower.includes('æµçº¿') || titleLower.includes('è½¨è¿¹')) {
                        knowledgePoints.push('æµçº¿è½¨è¿¹');
                    }
                    if (titleLower.includes('å‹åŠ›') || titleLower.includes('å‹å¼º')) {
                        knowledgePoints.push('å‹åŠ›');
                    }
                    if (titleLower.includes('ç²˜æ€§') || titleLower.includes('ç²˜åº¦')) {
                        knowledgePoints.push('ç²˜æ€§');
                    }
                    if (titleLower.includes('æ¹æµ')) {
                        knowledgePoints.push('æ¹æµ');
                    }
                    if (titleLower.includes('ç®¡é“') || titleLower.includes('ç®¡æµ')) {
                        knowledgePoints.push('ç®¡é“æµåŠ¨');
                    }
                    if (titleLower.includes('åŠ¨é‡') || titleLower.includes('momentum')) {
                        knowledgePoints.push('åŠ¨é‡æ–¹ç¨‹');
                    }
                    if (titleLower.includes('èƒ½é‡') || titleLower.includes('ä¼¯åŠªåˆ©')) {
                        knowledgePoints.push('èƒ½é‡æ–¹ç¨‹');
                    }
                    if (titleLower.includes('æ¶¡åº¦') || titleLower.includes('æ—‹è½¬')) {
                        knowledgePoints.push('æ¶¡åº¦');
                    }
                    
                    // å¦‚æœæ²¡æœ‰è¯†åˆ«åˆ°ç‰¹å®šçŸ¥è¯†ç‚¹ï¼Œæ·»åŠ åŸºç¡€åˆ†ç±»
                    if (knowledgePoints.length === 0) {
                        knowledgePoints.push('æµä½“åŠ›å­¦åŸºç¡€');
                    }
                    
                    return knowledgePoints;
                },

                // åŠ è½½æ˜“é”™é¢˜
                async loadErrorProneQuestions() {
                    const response = await fetch('../question-banks/æ˜“é”™é¢˜é›†.json');
                    if (!response.ok) {
                        throw new Error('æ˜“é”™é¢˜æ–‡ä»¶åŠ è½½å¤±è´¥');
                    }
                    
                    const data = await response.json();
                    const questions = Array.isArray(data) ? data : (data.questions || []);
                    
                    this.questions = questions.map((q, index) => ({
                        id: `error-prone_${index}`,
                        title: q.title || q.question || `æ˜“é”™é¢˜${index + 1}`,
                        content: q.content || '',
                        options: q.options || ['A', 'B', 'C', 'D'],
                        answer: q.answer || 0,
                        explanation: q.explanation || 'æš‚æ— è§£æ',
                        category: 'æ˜“é”™é¢˜é›†',
                        difficulty: q.difficulty || 'hard',
                        bank: 'æ˜“é”™é¢˜é›†',
                        bankId: 'error-prone'
                    }));
                    
                    this.totalQuestions = this.questions.length;
                },

                // åŠ è½½è®¡ç®—é¢˜
                async loadCalculationQuestions() {
                    // ä»çœŸé¢˜ä¸­ç­›é€‰è®¡ç®—é¢˜
                    await this.loadRealExamQuestions();
                    this.questions = this.questions.filter(q => q.type === 'è®¡ç®—é¢˜');
                    this.totalQuestions = this.questions.length;
                },

                // åŠ è½½ç»¼åˆé¢˜
                async loadComprehensiveQuestions() {
                    // ä»çœŸé¢˜ä¸­ç­›é€‰ç»¼åˆé¢˜
                    await this.loadRealExamQuestions();
                    this.questions = this.questions.filter(q => q.type === 'ç»¼åˆé¢˜');
                    this.totalQuestions = this.questions.length;
                },

                // è·å–é€‰æ‹©çš„ç­›é€‰æ¡ä»¶æ–‡æœ¬
                getSelectedFilterText() {
                    const parts = [];
                    if (this.filters.category && this.filters.category !== 'å…¨éƒ¨ç±»å‹') {
                        parts.push(this.filters.category);
                    }
                    if (this.filters.year && this.filters.year !== 'å…¨éƒ¨å¹´ä»½') {
                        parts.push(this.filters.year);
                    }
                    return parts.join(' - ') || 'æœªé€‰æ‹©';
                },

                // å¼€å§‹æ™ºèƒ½ç»ƒä¹ 
                async startSmartPractice(mode = 'normal') {
                    if (this.questions.length === 0) {
                        this.showNotification('è¯·å…ˆé€‰æ‹©è¦ç»ƒä¹ çš„é¢˜ç›®ç±»å‹', 'warning');
                        return;
                    }

                    // æ ¹æ®æ¨¡å¼å¤„ç†é¢˜ç›®
                    if (mode === 'random') {
                        this.questions = this.shuffleArray([...this.questions]);
                    }

                    this.currentView = 'practice';
                    this.currentQuestionIndex = 0;
                    this.resetQuestion();
                    
                    const modeText = mode === 'random' ? 'éšæœº' : 'é¡ºåº';
                    this.showNotification(`ğŸ¯ å¼€å§‹${this.getSelectedFilterText()}${modeText}ç»ƒä¹ ï¼å…± ${this.questions.length} é“é¢˜ç›®`, 'success');
                },

                // é¢„è§ˆå·²åŠ è½½çš„é¢˜ç›®
                previewLoadedQuestions() {
                    if (this.questions.length === 0) {
                        this.showNotification('æš‚æ— å·²åŠ è½½çš„é¢˜ç›®', 'warning');
                        return;
                    }

                    const preview = this.questions.slice(0, 3).map((q, index) => 
                        `${index + 1}. ${q.title.substring(0, 50)}...`
                    ).join('\n');

                    alert(`å·²åŠ è½½é¢˜ç›®é¢„è§ˆ (å‰3é¢˜):\n\n${preview}\n\nå…± ${this.questions.length} é¢˜`);
                },

                // æ•°ç»„éšæœºæ‰“ä¹±
                shuffleArray(array) {
                    const shuffled = [...array];
                    for (let i = shuffled.length - 1; i > 0; i--) {
                        const j = Math.floor(Math.random() * (i + 1));
                        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
                    }
                    return shuffled;
                },

                // é‡ç½®å½“å‰é¢˜ç›®çŠ¶æ€
                resetQuestion() {
                    this.selectedAnswer = null;
                    this.showResult = false;
                    this.isCorrect = false;
                    this.userTextAnswer = '';
                    this.showAnswer = false;
                    this.answerSimilarity = 0;
                },

                // å¡«ç©ºé¢˜ç›¸å…³æ–¹æ³•
                getAnswerPlaceholder(question) {
                    if (question.type === 'è®¡ç®—é¢˜') {
                        return 'è¯·è¾“å…¥è®¡ç®—è¿‡ç¨‹å’Œæœ€ç»ˆç­”æ¡ˆ...';
                    } else if (question.type === 'åˆ†æé¢˜') {
                        return 'è¯·è¾“å…¥åˆ†æè¿‡ç¨‹å’Œç»“è®º...';
                    } else if (question.type === 'è¯æ˜é¢˜') {
                        return 'è¯·è¾“å…¥è¯æ˜æ­¥éª¤...';
                    } else {
                        return 'è¯·è¾“å…¥æ‚¨çš„ç­”æ¡ˆ...';
                    }
                },

                onAnswerInput() {
                    // å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ å®æ—¶æç¤ºæˆ–æ ¼å¼æ£€æŸ¥
                },

                submitTextAnswer() {
                    if (!this.userTextAnswer.trim()) {
                        this.showNotification('è¯·è¾“å…¥ç­”æ¡ˆåå†æäº¤', 'warning');
                        return;
                    }

                    // è®¡ç®—ç­”æ¡ˆç›¸ä¼¼åº¦
                    this.answerSimilarity = this.calculateSimilarity(this.userTextAnswer, this.currentQuestion.answer);
                    
                    // æ˜¾ç¤ºç»“æœ
                    this.showResult = true;
                    this.isCorrect = this.answerSimilarity >= 60; // 60%ä»¥ä¸Šè§†ä¸ºæ­£ç¡®
                    
                    // æ›´æ–°ç»Ÿè®¡
                    if (this.isCorrect) {
                        this.correctAnswers++;
                    }
                    
                    // ä¿å­˜ç”¨æˆ·ç­”æ¡ˆ
                    this.userAnswers[this.currentQuestionIndex] = this.userTextAnswer;
                    
                    this.showNotification(
                        this.isCorrect ? 'å›ç­”æ­£ç¡®ï¼' : `ç­”æ¡ˆç›¸ä¼¼åº¦ ${this.answerSimilarity}%ï¼Œè¯·æŸ¥çœ‹æ ‡å‡†ç­”æ¡ˆ`,
                        this.isCorrect ? 'success' : 'warning'
                    );
                },

                showStandardAnswer() {
                    this.showAnswer = true;
                    this.showNotification('å·²æ˜¾ç¤ºæ ‡å‡†ç­”æ¡ˆï¼Œå¯ä»¥å¯¹æ¯”å­¦ä¹ ', 'info');
                },

                calculateSimilarity(userAnswer, standardAnswer) {
                    if (!userAnswer || !standardAnswer) return 0;
                    
                    const user = userAnswer.toLowerCase().trim();
                    const standard = standardAnswer.toString().toLowerCase().trim();
                    
                    // ç®€å•çš„ç›¸ä¼¼åº¦è®¡ç®—ç®—æ³•
                    if (user === standard) return 100;
                    
                    // åŒ…å«å…³é”®è¯æ£€æŸ¥
                    const userWords = user.split(/\s+/);
                    const standardWords = standard.split(/\s+/);
                    
                    let matchCount = 0;
                    userWords.forEach(word => {
                        if (standardWords.some(sw => sw.includes(word) || word.includes(sw))) {
                            matchCount++;
                        }
                    });
                    
                    const similarity = Math.round((matchCount / Math.max(userWords.length, standardWords.length)) * 100);
                    return Math.min(similarity, 100);
                },

                getSimilarityClass(similarity) {
                    if (similarity >= 80) return 'high';
                    if (similarity >= 60) return 'medium';
                    return 'low';
                },

                getFeedbackClass(similarity) {
                    if (similarity >= 90) return 'excellent';
                    if (similarity >= 70) return 'good';
                    if (similarity >= 50) return 'average';
                    return 'poor';
                },

                getFeedbackText(similarity) {
                    if (similarity >= 90) return 'ä¼˜ç§€ï¼å›ç­”éå¸¸å‡†ç¡®';
                    if (similarity >= 70) return 'è‰¯å¥½ï¼å›ç­”åŸºæœ¬æ­£ç¡®';
                    if (similarity >= 50) return 'ä¸€èˆ¬ï¼Œéœ€è¦æ”¹è¿›';
                    return 'éœ€è¦é‡æ–°å­¦ä¹ ç›¸å…³çŸ¥è¯†ç‚¹';
                },

                // å¿«é€Ÿè®¿é—®æ–¹æ³•
                async quickStartPractice(type) {
                    console.log(`ğŸš€ å¿«é€Ÿå¼€å§‹ç»ƒä¹ : ${type}`);
                    
                    if (type === 'æ˜“é”™é¢˜é›†') {
                        this.filters.category = 'æ˜“é”™é¢˜é›†';
                        this.filters.year = '';
                        await this.loadErrorProneQuestions();
                        this.showNotification(`âœ… å·²åŠ è½½${type}`, 'success');
                    } else if (type === 'å†å¹´çœŸé¢˜') {
                        this.filters.category = 'å†å¹´çœŸé¢˜';
                        this.filters.year = '';
                        await this.loadRealExamQuestions('all');
                        this.showNotification(`âœ… å·²åŠ è½½${type}`, 'success');
                    }
                },

                showClassificationMenu() {
                    this.showClassificationList = !this.showClassificationList;
                    this.showNotification(
                        this.showClassificationList ? 'ğŸ“š å±•å¼€åˆ†ç±»é¢˜åº“åˆ—è¡¨' : 'ğŸ“š æ”¶èµ·åˆ†ç±»é¢˜åº“åˆ—è¡¨', 
                        'info'
                    );
                },

                async quickStartClassification(categoryId, categoryName) {
                    console.log(`ğŸ“š å¿«é€Ÿå¼€å§‹åˆ†ç±»ç»ƒä¹ : ${categoryName}`);
                    
                    try {
                        this.loading = true;
                        this.loadingText = `æ­£åœ¨åŠ è½½${categoryName}...`;
                        
                        // æ˜ å°„åˆ†ç±»IDåˆ°æ–‡ä»¶å
                        const categoryFiles = {
                            'fluid-basics': 'åˆ†ç±»_æµä½“åŠ›å­¦åŸºç¡€.json',
                            'fluid-properties': 'åˆ†ç±»_æµä½“æ€§è´¨.json', 
                            'pressure': 'åˆ†ç±»_å‹åŠ›.json',
                            'viscosity': 'åˆ†ç±»_ç²˜æ€§.json',
                            'reynolds': 'åˆ†ç±»_é›·è¯ºæ•°.json',
                            'boundary-layer': 'åˆ†ç±»_è¾¹ç•Œå±‚.json',
                            'streamline': 'åˆ†ç±»_æµçº¿è½¨è¿¹.json',
                            'vorticity': 'åˆ†ç±»_æ¶¡åº¦.json',
                            'momentum': 'åˆ†ç±»_åŠ¨é‡æ–¹ç¨‹.json',
                            'energy': 'åˆ†ç±»_èƒ½é‡æ–¹ç¨‹.json',
                            'potential-flow': 'åˆ†ç±»_åŠ¿æµ.json',
                            'pipe-flow': 'åˆ†ç±»_ç®¡é“æµåŠ¨.json',
                            'turbulence': 'åˆ†ç±»_æ¹æµ.json',
                            'free-surface': 'åˆ†ç±»_è‡ªç”±é¢.json',
                            'experiment': 'åˆ†ç±»_å®éªŒä¸é‡çº².json'
                        };
                        
                        const filename = categoryFiles[categoryId];
                        if (!filename) {
                            throw new Error(`æœªæ‰¾åˆ°${categoryName}å¯¹åº”çš„é¢˜åº“æ–‡ä»¶`);
                        }
                        
                        const response = await fetch(`../question-banks/${filename}`);
                        if (!response.ok) {
                            throw new Error(`åŠ è½½${categoryName}å¤±è´¥`);
                        }
                        
                        const data = await response.json();
                        const questions = Array.isArray(data) ? data : (data.questions || []);
                        
                        this.questions = questions.map((q, index) => ({
                            ...q,
                            id: `${categoryId}_${index}`,
                            bankId: categoryId,
                            bank: categoryName,
                            category: categoryName,
                            knowledgePoints: q.tags || q.knowledgePoints || [categoryName],
                            questionNumber: index + 1
                        }));
                        
                        this.totalQuestions = this.questions.length;
                        this.showClassificationList = false;
                        this.filters.category = categoryName;
                        this.filters.year = '';
                        
                        this.showNotification(`âœ… å·²åŠ è½½${categoryName}: ${this.questions.length}é¢˜`, 'success');
                        
                    } catch (error) {
                        console.error(`åŠ è½½${categoryName}å¤±è´¥:`, error);
                        this.showNotification(`âŒ åŠ è½½${categoryName}å¤±è´¥: ${error.message}`, 'error');
                    } finally {
                        this.loading = false;
                    }
                },

                // å…¨å±åŠŸèƒ½
                toggleFullscreen() {
                    if (!this.isFullscreen) {
                        this.enterFullscreen();
                    } else {
                        this.exitFullscreen();
                    }
                },

                enterFullscreen() {
                    const element = document.documentElement;
                    if (element.requestFullscreen) {
                        element.requestFullscreen();
                    } else if (element.webkitRequestFullscreen) {
                        element.webkitRequestFullscreen();
                    } else if (element.msRequestFullscreen) {
                        element.msRequestFullscreen();
                    }
                    this.isFullscreen = true;
                    this.showNotification('å·²è¿›å…¥å…¨å±æ¨¡å¼ï¼ŒæŒ‰F11æˆ–ESCå¯é€€å‡º', 'info');
                },

                exitFullscreen() {
                    if (document.exitFullscreen) {
                        document.exitFullscreen();
                    } else if (document.webkitExitFullscreen) {
                        document.webkitExitFullscreen();
                    } else if (document.msExitFullscreen) {
                        document.msExitFullscreen();
                    }
                    this.isFullscreen = false;
                    this.showNotification('å·²é€€å‡ºå…¨å±æ¨¡å¼', 'info');
                },

                enterFullscreenMode() {
                    this.enterFullscreen();
                    if (this.questions.length > 0) {
                        this.currentView = 'practice';
                    } else {
                        this.showNotification('è¯·å…ˆåŠ è½½é¢˜åº“å†ä½¿ç”¨å…¨å±ç»ƒä¹ æ¨¡å¼', 'warning');
                    }
                },

                // æ‰¹é‡åŠ è½½æ‰€æœ‰é¢˜åº“
                async loadAllQuestionBanks() {
                    this.isLoadingBanks = true;
                    this.loading = true;
                    this.loadingText = 'æ­£åœ¨æ‰¹é‡åŠ è½½æ‰€æœ‰é¢˜åº“...';
                    
                    try {
                        await this.loadFromGitHub();
                        if (this.totalQuestions === 0) {
                            await this.loadFromLocal();
                        }
                        
                        if (this.totalQuestions > 0) {
                            this.showNotification(`ğŸ‰ æˆåŠŸåŠ è½½ ${this.totalQuestions} é“é¢˜ç›®ï¼Œæ¥è‡ª ${this.availableBanks.length} ä¸ªé¢˜åº“`, 'success');
                        } else {
                            this.showNotification('æœªèƒ½åŠ è½½åˆ°ä»»ä½•é¢˜ç›®ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥', 'error');
                        }
                    } catch (error) {
                        console.error('æ‰¹é‡åŠ è½½å¤±è´¥:', error);
                        this.showNotification('æ‰¹é‡åŠ è½½å¤±è´¥: ' + error.message, 'error');
                    } finally {
                        this.isLoadingBanks = false;
                        this.loading = false;
                    }
                },

                // ä»GitHubåŠ è½½
                async loadFromGitHub() {
                    console.log('ğŸŒ å¼€å§‹ä»GitHubåŠ è½½é¢˜ç›®...');
                    this.loadingText = 'æ­£åœ¨ä»GitHubåŠ è½½é¢˜åº“...';
                    
                    const GITHUB_CONFIG = {
                        owner: 'lghui12138',
                        repo: 'lghui12138.github.io',
                        branch: 'main',
                        rawBaseUrl: 'https://raw.githubusercontent.com/lghui12138/lghui12138.github.io/main'
                    };
                    
                    const files = [
                        { file: 'æ˜“é”™é¢˜é›†.json', category: 'æ˜“é”™', name: 'æ˜“é”™é¢˜é›†', description: 'é«˜é¢‘æ˜“é”™é¢˜ç›®ä¸“é¡¹è®­ç»ƒ' },
                        { file: 'çœŸé¢˜_ä¸­å›½æµ·æ´‹å¤§å­¦_2000-2021_cleaned.json', category: 'çœŸé¢˜', name: 'çœŸé¢˜åˆé›†(ç²¾é€‰)', description: 'ä¸­å›½æµ·æ´‹å¤§å­¦å†å¹´çœŸé¢˜ç²¾é€‰ç‰ˆ', year: '2000-2021' },
                        { file: 'çœŸé¢˜_ä¸­å›½æµ·æ´‹å¤§å­¦_2000-2021.json', category: 'çœŸé¢˜', name: 'çœŸé¢˜åˆé›†(å®Œæ•´)', description: 'ä¸­å›½æµ·æ´‹å¤§å­¦å†å¹´çœŸé¢˜å®Œæ•´ç‰ˆ', year: '2000-2021' },
                        { file: 'åˆ†ç±»_åŠ¨é‡æ–¹ç¨‹.json', category: 'åˆ†ç±»', name: 'åŠ¨é‡æ–¹ç¨‹', description: 'åŠ¨é‡æ–¹ç¨‹ä¸“é¢˜ç»ƒä¹ ' },
                        { file: 'åˆ†ç±»_åŠ¿æµ.json', category: 'åˆ†ç±»', name: 'åŠ¿æµ', description: 'åŠ¿æµç†è®ºä¸“é¢˜ç»ƒä¹ ' },
                        { file: 'åˆ†ç±»_å‹åŠ›.json', category: 'åˆ†ç±»', name: 'å‹åŠ›', description: 'æµä½“å‹åŠ›ä¸“é¢˜ç»ƒä¹ ' },
                        { file: 'åˆ†ç±»_å®éªŒä¸é‡çº².json', category: 'åˆ†ç±»', name: 'å®éªŒä¸é‡çº²', description: 'å®éªŒæ–¹æ³•ä¸é‡çº²åˆ†æ' },
                        { file: 'åˆ†ç±»_æµä½“åŠ›å­¦åŸºç¡€.json', category: 'åˆ†ç±»', name: 'æµä½“åŠ›å­¦åŸºç¡€', description: 'æµä½“åŠ›å­¦åŸºç¡€çŸ¥è¯†' },
                        { file: 'åˆ†ç±»_æµä½“æ€§è´¨.json', category: 'åˆ†ç±»', name: 'æµä½“æ€§è´¨', description: 'æµä½“ç‰©ç†æ€§è´¨ä¸“é¢˜' },
                        { file: 'åˆ†ç±»_æµçº¿è½¨è¿¹.json', category: 'åˆ†ç±»', name: 'æµçº¿è½¨è¿¹', description: 'æµçº¿ä¸è½¨è¿¹çº¿ä¸“é¢˜' },
                        { file: 'åˆ†ç±»_æ¶¡åº¦.json', category: 'åˆ†ç±»', name: 'æ¶¡åº¦', description: 'æ¶¡åº¦ä¸æ—‹è½¬æµåŠ¨' },
                        { file: 'åˆ†ç±»_æ¹æµ.json', category: 'åˆ†ç±»', name: 'æ¹æµ', description: 'æ¹æµç†è®ºä¸åº”ç”¨' },
                        { file: 'åˆ†ç±»_ç®¡é“æµåŠ¨.json', category: 'åˆ†ç±»', name: 'ç®¡é“æµåŠ¨', description: 'ç®¡é“å†…æµåŠ¨ä¸“é¢˜' },
                        { file: 'åˆ†ç±»_ç²˜æ€§.json', category: 'åˆ†ç±»', name: 'ç²˜æ€§', description: 'ç²˜æ€§æµä½“åŠ›å­¦' },
                        { file: 'åˆ†ç±»_èƒ½é‡æ–¹ç¨‹.json', category: 'åˆ†ç±»', name: 'èƒ½é‡æ–¹ç¨‹', description: 'èƒ½é‡æ–¹ç¨‹ä¸“é¢˜ç»ƒä¹ ' },
                        { file: 'åˆ†ç±»_è‡ªç”±é¢.json', category: 'åˆ†ç±»', name: 'è‡ªç”±é¢', description: 'è‡ªç”±è¡¨é¢æµåŠ¨' },
                        { file: 'åˆ†ç±»_è¾¹ç•Œå±‚.json', category: 'åˆ†ç±»', name: 'è¾¹ç•Œå±‚', description: 'è¾¹ç•Œå±‚ç†è®ºä¸“é¢˜' },
                        { file: 'åˆ†ç±»_é›·è¯ºæ•°.json', category: 'åˆ†ç±»', name: 'é›·è¯ºæ•°', description: 'é›·è¯ºæ•°ä¸æµåŠ¨çŠ¶æ€' }
                    ];
                    
                    let loadedQuestions = [];
                    let loadedBanks = [];
                    let totalLoaded = 0;
                    
                    for (const fileInfo of files) {
                        try {
                            console.log(`ğŸ“– åŠ è½½: ${fileInfo.file}`);
                            this.loadingText = `æ­£åœ¨åŠ è½½: ${fileInfo.name}...`;
                            
                            const url = `${GITHUB_CONFIG.rawBaseUrl}/question-banks/${fileInfo.file}`;
                            const response = await fetch(url);
                            
                            if (response.ok) {
                                const data = await response.json();
                                const questions = Array.isArray(data) ? data : (data.questions ? data.questions : []);
                                
                                if (questions && questions.length > 0) {
                                    const convertedQuestions = questions.map((q, index) => ({
                                        id: `${fileInfo.file}_${index}`,
                                        title: q.title || q.question || `é¢˜ç›®${totalLoaded + index + 1}`,
                                        content: q.content || '',
                                        options: q.options || ['A', 'B', 'C', 'D'],
                                        answer: q.answer || 0,
                                        explanation: q.explanation || 'æš‚æ— è§£æ',
                                        category: q.category || fileInfo.category,
                                        difficulty: q.difficulty || 'medium',
                                        year: q.year || fileInfo.year || null,
                                        school: q.school || 'ä¸­å›½æµ·æ´‹å¤§å­¦',
                                        bank: fileInfo.name,
                                        bankId: fileInfo.file
                                    }));
                                    
                                    loadedQuestions = loadedQuestions.concat(convertedQuestions);
                                    totalLoaded += convertedQuestions.length;
                                    
                                    // è®°å½•é¢˜åº“ä¿¡æ¯
                                    loadedBanks.push({
                                        id: fileInfo.file,
                                        name: fileInfo.name,
                                        description: fileInfo.description,
                                        category: fileInfo.category,
                                        year: fileInfo.year,
                                        questionCount: convertedQuestions.length,
                                        difficulty: 'medium', // é»˜è®¤éš¾åº¦
                                        file: fileInfo.file
                                    });
                                    
                                    console.log(`âœ… ${fileInfo.name}: +${convertedQuestions.length}é¢˜`);
                                }
                            } else {
                                console.warn(`âš ï¸ GitHubæ–‡ä»¶ä¸å­˜åœ¨: ${fileInfo.file}`);
                            }
                        } catch (error) {
                            console.warn(`âš ï¸ åŠ è½½å¤±è´¥: ${fileInfo.file}`, error.message);
                        }
                    }
                    
                    if (loadedQuestions.length > 0) {
                        this.questions = loadedQuestions;
                        this.availableBanks = loadedBanks;
                        this.totalQuestions = loadedQuestions.length;
                        console.log(`ğŸ‰ GitHubåŠ è½½å®Œæˆï¼æ€»å…±: ${loadedQuestions.length} é“é¢˜ç›®ï¼Œ${loadedBanks.length} ä¸ªé¢˜åº“`);
                    }
                },

                // ä»æœ¬åœ°åŠ è½½
                async loadFromLocal() {
                    console.log('ğŸ“ å¼€å§‹ä»æœ¬åœ°åŠ è½½é¢˜ç›®...');
                    this.loadingText = 'æ­£åœ¨ä»æœ¬åœ°åŠ è½½é¢˜åº“...';
                    
                    // è¿™é‡Œå¯ä»¥æ·»åŠ æœ¬åœ°åŠ è½½é€»è¾‘
                    // ç›®å‰ä½œä¸ºå¤‡ç”¨æ–¹æ¡ˆ
                },

                // é¢˜åº“é€‰æ‹©åŠŸèƒ½
                toggleBankSelection(bankId) {
                    const index = this.selectedBanks.indexOf(bankId);
                    if (index > -1) {
                        this.selectedBanks.splice(index, 1);
                    } else {
                        this.selectedBanks.push(bankId);
                    }
                },

                clearSelection() {
                    this.selectedBanks = [];
                    this.showNotification('å·²æ¸…é™¤æ‰€æœ‰é€‰æ‹©', 'info');
                },

                // å¼€å§‹ç»ƒä¹ åŠŸèƒ½
                startBankPractice(bankId) {
                    const selectedQuestions = this.questions.filter(q => q.bankId === bankId);
                    if (selectedQuestions.length === 0) {
                        this.showNotification('è¯¥é¢˜åº“æš‚æ— é¢˜ç›®', 'warning');
                        return;
                    }
                    
                    this.questions = selectedQuestions;
                    this.startPractice();
                },

                startSelectedBanksPractice() {
                    if (this.selectedBanks.length === 0) {
                        this.showNotification('è¯·å…ˆé€‰æ‹©è¦ç»ƒä¹ çš„é¢˜åº“', 'warning');
                        return;
                    }
                    
                    const selectedQuestions = this.questions.filter(q => 
                        this.selectedBanks.includes(q.bankId)
                    );
                    
                    if (selectedQuestions.length === 0) {
                        this.showNotification('é€‰ä¸­çš„é¢˜åº“æš‚æ— é¢˜ç›®', 'warning');
                        return;
                    }
                    
                    this.questions = selectedQuestions;
                    this.startPractice();
                },

                startRandomPractice() {
                    if (this.totalQuestions === 0) {
                        this.showNotification('è¯·å…ˆåŠ è½½é¢˜åº“', 'warning');
                        return;
                    }
                    
                    // éšæœºæ‰“ä¹±é¢˜ç›®é¡ºåº
                    this.questions = [...this.questions].sort(() => Math.random() - 0.5);
                    this.startPractice();
                },

                startPractice() {
                    this.currentView = 'practice';
                    this.currentQuestionIndex = 0;
                    this.selectedAnswer = null;
                    this.showResult = false;
                    this.isCorrect = false;
                    this.startTime = Date.now();
                    this.showNotification(`å¼€å§‹ç»ƒä¹ ï¼å…± ${this.questions.length} é“é¢˜ç›®`, 'success');
                },

                backToSelector() {
                    // ç»Ÿä¸€è¿”å›åˆ°é¢˜åº“é€‰æ‹©é¡µé¢
                    this.currentView = 'selector';
                    this.selectedAnswer = null;
                    this.showResult = false;
                    this.isCorrect = false;
                    this.userTextAnswer = '';
                    this.showAnswer = false;
                    this.answerSimilarity = 0;
                    
                    // å¦‚æœæ˜¯çœŸé¢˜æ¨¡å¼ï¼Œä¹Ÿè¦é‡ç½®çœŸé¢˜ç›¸å…³çŠ¶æ€
                    if (this.isRealExamMode) {
                        this.isRealExamMode = false;
                        console.log('ğŸ”„ ä»çœŸé¢˜ç»ƒä¹ è¿”å›é¢˜åº“é€‰æ‹©é¡µé¢');
                    }
                    
                    console.log('ğŸ”„ è¿”å›é¢˜åº“é€‰æ‹©é¡µé¢');
                },

                previewBank(bankId) {
                    const bank = this.availableBanks.find(b => b.id === bankId);
                    if (bank) {
                        this.showNotification(`${bank.name}: ${bank.description} (${bank.questionCount}é¢˜)`, 'info');
                    }
                },

                // é¢˜ç›®æ“ä½œ
                submitAnswer() {
                    if (this.selectedAnswer === null) {
                        this.showNotification('è¯·å…ˆé€‰æ‹©ç­”æ¡ˆ', 'warning');
                        return;
                    }

                    this.isCorrect = this.selectedAnswer === this.currentQuestion.answer;
                    this.showResult = true;
                    
                    if (this.isCorrect) {
                        this.correctAnswers++;
                        this.showNotification('å›ç­”æ­£ç¡®ï¼', 'success');
                    } else {
                        this.showNotification('å›ç­”é”™è¯¯ï¼Œè¯·æŸ¥çœ‹è§£æ', 'error');
                    }
                    
                    this.answeredQuestions++;
                    
                    // è®°å½•ç­”é¢˜æ—¶é—´
                    if (this.startTime) {
                        const timeSpent = Math.round((Date.now() - this.startTime) / 1000);
                        this.totalTime += timeSpent;
                    }
                    
                    this.saveProgress();
                    
                    // 3ç§’åè‡ªåŠ¨è·³è½¬åˆ°ä¸‹ä¸€é¢˜
                    setTimeout(() => {
                        if (this.showResult && this.currentQuestionIndex < this.questions.length - 1) {
                            this.nextQuestion();
                        }
                    }, 3000);
                },

                nextQuestion() {
                    if (this.currentQuestionIndex < this.questions.length - 1) {
                        this.currentQuestionIndex++;
                        this.resetQuestion();
                    } else {
                        this.showNotification('ç»ƒä¹ å®Œæˆï¼', 'success');
                    }
                },

                previousQuestion() {
                    if (this.currentQuestionIndex > 0) {
                        this.currentQuestionIndex--;
                        this.resetQuestion();
                    }
                },

                resetQuestion() {
                    this.selectedAnswer = null;
                    this.showResult = false;
                    this.isCorrect = false;
                    this.startTime = Date.now();
                },

                saveProgress() {
                    const progress = {
                        currentQuestionIndex: this.currentQuestionIndex,
                        correctAnswers: this.correctAnswers,
                        answeredQuestions: this.answeredQuestions,
                        totalTime: this.totalTime,
                        timestamp: new Date().toISOString(),
                        questions: this.questions.length
                    };
                    localStorage.setItem('practiceProgress', JSON.stringify(progress));
                },

                loadProgress() {
                    try {
                        const saved = localStorage.getItem('practiceProgress');
                        if (saved) {
                            const progress = JSON.parse(saved);
                            this.correctAnswers = progress.correctAnswers || 0;
                            this.answeredQuestions = progress.answeredQuestions || 0;
                            this.totalTime = progress.totalTime || 0;
                        }
                    } catch (error) {
                        console.error('Failed to load progress:', error);
                    }
                },

                resetProgress() {
                    this.answeredQuestions = 0;
                    this.correctAnswers = 0;
                    this.totalTime = 0;
                    this.currentQuestionIndex = 0;
                    this.selectedAnswer = null;
                    this.showResult = false;
                    localStorage.removeItem('practiceProgress');
                    this.showNotification('è¿›åº¦å·²é‡ç½®', 'info');
                },

                getDifficultyText(difficulty) {
                    const map = {
                        easy: 'ç®€å•',
                        medium: 'ä¸­ç­‰',
                        hard: 'å›°éš¾'
                    };
                    return map[difficulty] || 'ä¸­ç­‰';
                },

                // å¤„ç†URLå‚æ•°
                handleUrlParameters() {
                    const urlParams = new URLSearchParams(window.location.search);
                    const examType = urlParams.get('type');
                    const examId = urlParams.get('exam');
                    const examYear = urlParams.get('year');
                    const examMode = urlParams.get('mode');
                    
                    if (examType === 'real') {
                        console.log('ğŸ“š æ£€æµ‹åˆ°çœŸé¢˜ç»ƒä¹ è¯·æ±‚:', { examType, examId, examYear, examMode });
                        this.handleRealExamPractice(examId, examYear, examMode);
                    }
                },

                // çœŸé¢˜ç»ƒä¹ å¤„ç†
                async handleRealExamPractice(examId, examYear, examMode = 'all') {
                    console.log('ğŸ“š å¤„ç†çœŸé¢˜ç»ƒä¹ è¯·æ±‚:', { examId, examYear, examMode });
                    
                    // ç«‹å³è®¾ç½®çœŸé¢˜æ¨¡å¼
                    this.isRealExamMode = true;
                    
                    this.loading = true;
                    this.loadingText = 'æ­£åœ¨åŠ è½½çœŸé¢˜æ•°æ®...';
                    
                    try {
                        // åŠ è½½çœŸé¢˜æ•°æ®
                        await this.loadRealExamData(examId, examYear, examMode);
                        
                        // æ ¹æ®æ¨¡å¼å†³å®šå¦‚ä½•å¼€å§‹ç»ƒä¹ 
                        if (examMode === 'all') {
                            // æ˜¾ç¤ºçœŸé¢˜é€‰æ‹©å™¨
                            this.showRealExamSelector();
                        } else {
                            // è‡ªåŠ¨å¼€å§‹ç»ƒä¹ 
                            this.startRealExamPractice(examId, examYear, examMode);
                        }
                        
                    } catch (error) {
                        console.error('âŒ çœŸé¢˜ç»ƒä¹ åˆå§‹åŒ–å¤±è´¥:', error);
                        this.showNotification('çœŸé¢˜ç»ƒä¹ åˆå§‹åŒ–å¤±è´¥: ' + error.message, 'error');
                        this.loading = false;
                    }
                },

                // åŠ è½½çœŸé¢˜æ•°æ®
                async loadRealExamData(examId, examYear, examMode = 'all') {
                    console.log('ğŸ“– åŠ è½½çœŸé¢˜æ•°æ®:', { examId, examYear, examMode });
                    
                    try {
                        // ä»çœŸé¢˜æ–‡ä»¶åŠ è½½æ•°æ®
                        const response = await fetch('../question-banks/çœŸé¢˜_ä¸­å›½æµ·æ´‹å¤§å­¦_2000-2021_cleaned.json');
                        if (!response.ok) {
                            throw new Error('çœŸé¢˜æ–‡ä»¶åŠ è½½å¤±è´¥');
                        }
                        
                        const allExamQuestions = await response.json();
                        
                        // å¤„ç†é¢˜ç›®æ•°æ®
                        const processedQuestions = allExamQuestions.map(q => ({
                            ...q,
                            bankId: 'real-exam',
                            bank: 'å†å¹´çœŸé¢˜',
                            bankName: `${q.year}å¹´çœŸé¢˜`,
                            category: 'å†å¹´çœŸé¢˜',
                            difficulty: this.getDifficultyByScore(q.score),
                            options: q.options || [],
                            answer: q.answer || '',
                            explanation: q.explanation || ''
                        }));
                        
                        // æ ¹æ®æ¨¡å¼å’Œå¹´ä»½ç­›é€‰é¢˜ç›®
                        let filteredQuestions = processedQuestions;
                        
                        if (examYear && examYear !== 'all') {
                            filteredQuestions = processedQuestions.filter(q => q.year === parseInt(examYear));
                            console.log(`ğŸ“… ç­›é€‰${examYear}å¹´çœŸé¢˜: ${filteredQuestions.length}é¢˜`);
                        } else {
                            // å¦‚æœæ²¡æœ‰æŒ‡å®šå¹´ä»½ï¼ŒåŠ è½½æ‰€æœ‰é¢˜ç›®
                            filteredQuestions = processedQuestions;
                        }
                        
                        if (filteredQuestions.length === 0) {
                            throw new Error(`æœªæ‰¾åˆ°${examYear || ''}å¹´çš„çœŸé¢˜æ•°æ®`);
                        }
                        
                        // å­˜å‚¨æ‰€æœ‰é¢˜ç›®å’Œå¹´ä»½ä¿¡æ¯
                        this.allQuestions = filteredQuestions;
                        this.realExamYears = this.getRealExamYears(processedQuestions);
                        
                        // æ„å»ºé¢˜åº“ä¿¡æ¯ - æŒ‰å¹´ä»½åˆ†ç±»
                        this.availableBanks = this.buildRealExamBanksByYear(processedQuestions, examYear);
                        this.totalQuestions = this.allQuestions.length;
                        
                        console.log(`âœ… çœŸé¢˜æ•°æ®åŠ è½½å®Œæˆ: ${this.allQuestions.length}é¢˜ï¼Œ${this.realExamYears.length}ä¸ªå¹´ä»½`);
                        
                    } catch (error) {
                        console.error('âŒ çœŸé¢˜æ•°æ®åŠ è½½å¤±è´¥:', error);
                        throw error;
                    }
                },

                // å¼€å§‹çœŸé¢˜ç»ƒä¹ 
                startRealExamPractice(examId, examYear, examMode = 'normal') {
                    console.log('ğŸ¯ å¼€å§‹çœŸé¢˜ç»ƒä¹ :', { examId, examYear, examMode });
                    
                    // è®¾ç½®çœŸé¢˜æ¨¡å¼
                    this.isRealExamMode = true;
                    
                    // è®¾ç½®ç»ƒä¹ é¢˜ç›®
                    this.questions = [...this.allQuestions];
                    
                    // æ ¹æ®æ¨¡å¼å¤„ç†é¢˜ç›®
                    if (examMode === 'random') {
                        this.questions = this.shuffleArray([...this.questions]);
                    }
                    
                    this.currentView = 'practice';
                    this.currentQuestionIndex = 0;
                    this.resetQuestion();
                    
                    // æ›´æ–°åŠ è½½çŠ¶æ€
                    this.loading = false;
                    
                    // æ˜¾ç¤ºç»ƒä¹ ä¿¡æ¯
                    const yearText = examYear ? `${examYear}å¹´` : 'å†å¹´';
                    const modeText = examMode === 'random' ? 'éšæœº' : 'é¡ºåº';
                    this.showNotification(`ğŸ¯ å¼€å§‹${yearText}çœŸé¢˜${modeText}ç»ƒä¹ ï¼å…± ${this.questions.length} é“é¢˜ç›®`, 'success');
                    
                    // ä¿å­˜çœŸé¢˜ç»ƒä¹ çŠ¶æ€
                    localStorage.setItem('currentRealExamPractice', JSON.stringify({
                        examId,
                        examYear,
                        examMode,
                        startTime: Date.now(),
                        totalQuestions: this.questions.length
                    }));
                },

                // æ ¹æ®åˆ†æ•°åˆ¤æ–­éš¾åº¦
                getDifficultyByScore(score) {
                    if (score <= 5) return 'easy';
                    if (score <= 10) return 'medium';
                    return 'hard';
                },

                // è·å–çœŸé¢˜å¹´ä»½åˆ—è¡¨
                getRealExamYears(questions) {
                    const years = [...new Set(questions.map(q => q.year))].sort((a, b) => b - a);
                    return years.map(year => ({
                        year,
                        count: questions.filter(q => q.year === year).length,
                        label: `${year}å¹´ (${questions.filter(q => q.year === year).length}é¢˜)`
                    }));
                },

                // æ„å»ºçœŸé¢˜é¢˜åº“ä¿¡æ¯ - æŒ‰å¹´ä»½åˆ†ç±»
                buildRealExamBanksByYear(questions, selectedYear) {
                    const banks = [];
                    
                    // æ·»åŠ "æ‰€æœ‰çœŸé¢˜"é€‰é¡¹
                    banks.push({
                        id: 'real-exam-all',
                        name: 'æ‰€æœ‰å†å¹´çœŸé¢˜',
                        description: `ä¸­å›½æµ·æ´‹å¤§å­¦å†å¹´çœŸé¢˜åˆé›† (${questions.length}é¢˜)`,
                        questionCount: questions.length,
                        year: 'all',
                        category: 'å†å¹´çœŸé¢˜',
                        difficulty: 'hard'
                    });
                    
                    // æŒ‰å¹´ä»½åˆ†ç»„æ·»åŠ é¢˜åº“
                    const years = this.getRealExamYears(questions);
                    years.forEach(yearInfo => {
                        banks.push({
                            id: `real-exam-${yearInfo.year}`,
                            name: `${yearInfo.year}å¹´çœŸé¢˜`,
                            description: `${yearInfo.year}å¹´ä¸­å›½æµ·æ´‹å¤§å­¦æµä½“åŠ›å­¦çœŸé¢˜ (${yearInfo.count}é¢˜)`,
                            questionCount: yearInfo.count,
                            year: yearInfo.year.toString(),
                            category: 'å†å¹´çœŸé¢˜',
                            difficulty: this.getDifficultyByYear(yearInfo.year)
                        });
                    });
                    
                    // æ·»åŠ æ˜“é”™é¢˜é›†
                    const errorProneQuestions = questions.filter(q => q.score >= 15 || q.type === 'ç»¼åˆé¢˜');
                    if (errorProneQuestions.length > 0) {
                        banks.push({
                            id: 'real-exam-error-prone',
                            name: 'æ˜“é”™é¢˜é›†',
                            description: `å†å¹´çœŸé¢˜ä¸­çš„æ˜“é”™é¢˜ç›® (${errorProneQuestions.length}é¢˜)`,
                            questionCount: errorProneQuestions.length,
                            year: 'error-prone',
                            category: 'æ˜“é”™é¢˜é›†',
                            difficulty: 'hard'
                        });
                    }
                    
                    // æ·»åŠ è®¡ç®—é¢˜é›†
                    const calculationQuestions = questions.filter(q => q.type === 'è®¡ç®—é¢˜');
                    if (calculationQuestions.length > 0) {
                        banks.push({
                            id: 'real-exam-calculation',
                            name: 'è®¡ç®—é¢˜é›†',
                            description: `å†å¹´çœŸé¢˜ä¸­çš„è®¡ç®—é¢˜ (${calculationQuestions.length}é¢˜)`,
                            questionCount: calculationQuestions.length,
                            year: 'calculation',
                            category: 'è®¡ç®—é¢˜é›†',
                            difficulty: 'medium'
                        });
                    }
                    
                    // æ·»åŠ ç»¼åˆé¢˜é›†
                    const comprehensiveQuestions = questions.filter(q => q.type === 'ç»¼åˆé¢˜');
                    if (comprehensiveQuestions.length > 0) {
                        banks.push({
                            id: 'real-exam-comprehensive',
                            name: 'ç»¼åˆé¢˜é›†',
                            description: `å†å¹´çœŸé¢˜ä¸­çš„ç»¼åˆé¢˜ (${comprehensiveQuestions.length}é¢˜)`,
                            questionCount: comprehensiveQuestions.length,
                            year: 'comprehensive',
                            category: 'ç»¼åˆé¢˜é›†',
                            difficulty: 'hard'
                        });
                    }
                    
                    return banks;
                },

                // æ ¹æ®å¹´ä»½åˆ¤æ–­éš¾åº¦
                getDifficultyByYear(year) {
                    const currentYear = new Date().getFullYear();
                    const yearDiff = currentYear - year;
                    
                    if (yearDiff <= 5) return 'hard';      // è¿‘5å¹´çœŸé¢˜
                    if (yearDiff <= 10) return 'medium';   // 5-10å¹´å‰çœŸé¢˜
                    return 'easy';                         // 10å¹´å‰çœŸé¢˜
                },

                // æ˜¾ç¤ºçœŸé¢˜é€‰æ‹©å™¨
                showRealExamSelector() {
                    this.loading = false;
                    this.currentView = 'realExamSelector';
                    this.showNotification('è¯·é€‰æ‹©è¦ç»ƒä¹ çš„çœŸé¢˜å¹´ä»½', 'info');
                },

                // å¼€å§‹ç‰¹å®šå¹´ä»½çš„çœŸé¢˜ç»ƒä¹ 
                startYearPractice(year, mode = 'normal') {
                    let selectedQuestions = [];
                    
                    if (year === 'all') {
                        selectedQuestions = [...this.allQuestions];
                    } else if (year === 'error-prone') {
                        // æ˜“é”™é¢˜é›†
                        selectedQuestions = this.allQuestions.filter(q => q.score >= 15 || q.type === 'ç»¼åˆé¢˜');
                    } else if (year === 'calculation') {
                        // è®¡ç®—é¢˜é›†
                        selectedQuestions = this.allQuestions.filter(q => q.type === 'è®¡ç®—é¢˜');
                    } else if (year === 'comprehensive') {
                        // ç»¼åˆé¢˜é›†
                        selectedQuestions = this.allQuestions.filter(q => q.type === 'ç»¼åˆé¢˜');
                    } else {
                        // ç‰¹å®šå¹´ä»½
                        selectedQuestions = this.allQuestions.filter(q => q.year === parseInt(year));
                    }
                    
                    if (selectedQuestions.length === 0) {
                        this.showNotification(`æœªæ‰¾åˆ°${year}å¹´çš„çœŸé¢˜`, 'warning');
                        return;
                    }
                    
                    // æ ¹æ®æ¨¡å¼å¤„ç†é¢˜ç›®
                    if (mode === 'random') {
                        selectedQuestions = this.shuffleArray([...selectedQuestions]);
                    }
                    
                    this.questions = selectedQuestions;
                    this.currentView = 'practice';
                    this.currentQuestionIndex = 0;
                    this.resetQuestion();
                    
                    const yearText = this.getYearDisplayText(year);
                    const modeText = mode === 'random' ? 'éšæœº' : 'é¡ºåº';
                    this.showNotification(`ğŸ¯ å¼€å§‹${yearText}çœŸé¢˜${modeText}ç»ƒä¹ ï¼å…± ${selectedQuestions.length} é“é¢˜ç›®`, 'success');
                    
                    // ä¿å­˜çœŸé¢˜ç»ƒä¹ çŠ¶æ€
                    localStorage.setItem('currentRealExamPractice', JSON.stringify({
                        year,
                        mode,
                        startTime: Date.now(),
                        totalQuestions: selectedQuestions.length
                    }));
                },

                // è·å–å¹´ä»½æ˜¾ç¤ºæ–‡æœ¬
                getYearDisplayText(year) {
                    const yearMap = {
                        'all': 'æ‰€æœ‰å¹´ä»½',
                        'error-prone': 'æ˜“é”™é¢˜é›†',
                        'calculation': 'è®¡ç®—é¢˜é›†',
                        'comprehensive': 'ç»¼åˆé¢˜é›†'
                    };
                    return yearMap[year] || `${year}å¹´`;
                },

                // æ•°ç»„éšæœºæ‰“ä¹±
                shuffleArray(array) {
                    const shuffled = [...array];
                    for (let i = shuffled.length - 1; i > 0; i--) {
                        const j = Math.floor(Math.random() * (i + 1));
                        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
                    }
                    return shuffled;
                },

                // é”®ç›˜äº‹ä»¶å¤„ç†
                handleKeyboard(event) {
                    // é˜²æ­¢åœ¨è¾“å…¥çŠ¶æ€ä¸‹è§¦å‘
                    if (event.target.tagName === 'INPUT' || event.target.tagName === 'SELECT') return;

                    switch(event.key) {
                        case 'Enter':
                            if (this.currentView === 'practice') {
                            event.preventDefault();
                                if (!this.showResult) {
                            this.submitAnswer();
                                } else {
                                    this.nextQuestion();
                                }
                            }
                            break;
                        case 'ArrowLeft':
                            if (this.currentView === 'practice') {
                            event.preventDefault();
                            this.previousQuestion();
                            }
                            break;
                        case 'ArrowRight':
                            if (this.currentView === 'practice') {
                            event.preventDefault();
                            this.nextQuestion();
                            }
                            break;
                        case 'F11':
                            event.preventDefault();
                            this.toggleFullscreen();
                            break;
                        case 'Escape':
                            if (this.isFullscreen) {
                                event.preventDefault();
                                this.exitFullscreen();
                            } else if (this.currentView === 'practice') {
                                this.backToSelector();
                            } else {
                                window.location.href = '../index.html';
                            }
                            break;
                        case 's':
                            if (event.ctrlKey && this.currentView === 'practice') {
                                event.preventDefault();
                                this.saveProgress();
                                this.showNotification('è¿›åº¦å·²ä¿å­˜', 'success');
                            }
                            break;
                        case '1':
                        case '2':
                        case '3':
                        case '4':
                            if (this.currentView === 'practice' && this.currentQuestion && this.currentQuestion.options && !this.showResult) {
                                const optionIndex = parseInt(event.key) - 1;
                                if (optionIndex < this.currentQuestion.options.length) {
                                    this.selectedAnswer = optionIndex;
                                }
                            }
                            break;
                    }
                }
            },

            mounted() {
                console.log('ğŸ§  æ™ºèƒ½é¢˜åº“ç»ƒä¹ å¯åŠ¨ï¼');
                
                // æ£€æŸ¥URLå‚æ•°ï¼Œå¤„ç†çœŸé¢˜æ¨¡å¼
                this.handleUrlParameters();
                
                // åˆå§‹åŒ–
                setTimeout(() => {
                    this.loadProgress();
                    this.loading = false;
                    
                    if (this.isRealExamMode) {
                        this.showNotification('çœŸé¢˜ç»ƒä¹ æ¨¡å¼å·²å¯åŠ¨ï¼', 'success');
                    } else {
                        this.showNotification('æ¬¢è¿æ¥åˆ°æ™ºèƒ½é¢˜åº“ï¼ç‚¹å‡»"æ‰¹é‡åŠ è½½æ‰€æœ‰é¢˜åº“"å¼€å§‹', 'info');
                    }
                }, 1500);

                // ç»‘å®šé”®ç›˜äº‹ä»¶
                document.addEventListener('keydown', this.handleKeyboard);

                // ç›‘å¬å…¨å±çŠ¶æ€å˜åŒ–
                document.addEventListener('fullscreenchange', () => {
                    this.isFullscreen = !!document.fullscreenElement;
                });
                
                // ç›‘å¬ç­›é€‰æ¡ä»¶å˜åŒ–
                this.$watch('filters.category', (newVal, oldVal) => {
                    console.log('ğŸ“‚ åˆ†ç±»å˜åŒ–:', oldVal, '->', newVal);
                    this.onFilterChange();
                });
                this.$watch('filters.year', (newVal, oldVal) => {
                    console.log('ğŸ“… å¹´ä»½å˜åŒ–:', oldVal, '->', newVal);
                    this.onFilterChange();
                });
            },

            beforeUnmount() {
                document.removeEventListener('keydown', this.handleKeyboard);
            }
        }).mount('#app');
    </script>
</body>
</html> 