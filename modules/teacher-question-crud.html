<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìö ÊïôÂ∏àÈ¢òÁõÆÁÆ°ÁêÜÁ≥ªÁªü</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        :root {
            --primary-color: #667eea;
            --secondary-color: #764ba2;
            --accent-color: #f093fb;
            --success-color: #4CAF50;
            --warning-color: #FF9800;
            --error-color: #f44336;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
        }

        .header h1 {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-size: 28px;
        }

        .stats-bar {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 20px;
        }

        .stat-item {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            text-align: center;
            min-width: 120px;
        }

        .stat-number {
            font-size: 24px;
            font-weight: bold;
            display: block;
        }

        .stat-label {
            font-size: 12px;
            opacity: 0.9;
        }

        .toolbar {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-success {
            background: var(--success-color);
            color: white;
        }

        .btn-warning {
            background: var(--warning-color);
            color: white;
        }

        .btn-danger {
            background: var(--error-color);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .search-box {
            flex: 1;
            min-width: 300px;
        }

        .search-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .filter-select {
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            min-width: 150px;
        }

        .questions-grid {
            display: grid;
            gap: 20px;
            grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
        }

        .question-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }

        .question-card:hover {
            transform: translateY(-5px);
        }

        .question-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 15px;
        }

        .question-id {
            background: var(--primary-color);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
        }

        .question-actions {
            display: flex;
            gap: 8px;
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 12px;
        }

        .question-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
            line-height: 1.4;
        }

        .question-meta {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            font-size: 12px;
            color: #666;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .question-options {
            margin-bottom: 15px;
        }

        .option-item {
            padding: 8px 12px;
            background: #f8f9fa;
            border-radius: 6px;
            margin-bottom: 5px;
            font-size: 14px;
        }

        .correct-answer {
            background: #d4edda;
            border-left: 4px solid var(--success-color);
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal {
            background: white;
            border-radius: 15px;
            padding: 30px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #eee;
        }

        .modal-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--primary-color);
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #999;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .form-input,
        .form-textarea,
        .form-select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            font-family: inherit;
        }

        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }

        .form-input:focus,
        .form-textarea:focus,
        .form-select:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .options-editor {
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 15px;
        }

        .option-editor {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
            align-items: center;
        }

        .option-input {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
        }

        .correct-radio {
            margin-right: 10px;
        }

        .add-option-btn {
            background: var(--success-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            z-index: 2000;
            animation: slideIn 0.3s;
        }

        .notification.success {
            background: var(--success-color);
        }

        .notification.error {
            background: var(--error-color);
        }

        .notification.warning {
            background: var(--warning-color);
        }

        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }

        .loading {
            text-align: center;
            padding: 40px;
            font-size: 16px;
            color: #666;
        }

        .empty-state {
            text-align: center;
            padding: 60px;
            color: #999;
        }

        .empty-state i {
            font-size: 64px;
            margin-bottom: 20px;
            color: #ddd;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .questions-grid {
                grid-template-columns: 1fr;
            }

            .toolbar {
                flex-direction: column;
                align-items: stretch;
            }

            .stats-bar {
                flex-direction: column;
                gap: 10px;
            }

            .modal {
                width: 95%;
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="container">
            <!-- Â§¥ÈÉ® -->
            <div class="header">
                <h1><i class="fas fa-chalkboard-teacher"></i> ÊïôÂ∏àÈ¢òÁõÆÁÆ°ÁêÜÁ≥ªÁªü</h1>
                <p>ÁÆ°ÁêÜÊµÅ‰ΩìÂäõÂ≠¶È¢òÂ∫ì - ÊîØÊåÅÂ¢ûÂä†„ÄÅÁºñËæë„ÄÅÂà†Èô§È¢òÁõÆ</p>
                
                <div class="stats-bar">
                    <div class="stat-item">
                        <span class="stat-number">{{ totalQuestions }}</span>
                        <span class="stat-label">ÊÄªÈ¢òÁõÆÊï∞</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">{{ filteredQuestions.length }}</span>
                        <span class="stat-label">ÂΩìÂâçÊòæÁ§∫</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">{{ questionBanks.length }}</span>
                        <span class="stat-label">È¢òÂ∫ìÊï∞Èáè</span>
                    </div>
                </div>
            </div>

            <!-- Â∑•ÂÖ∑Ê†è -->
            <div class="toolbar">
                <button @click="showAddModal" class="btn btn-success">
                    <i class="fas fa-plus"></i> Ê∑ªÂä†È¢òÁõÆ
                </button>
                
                <button @click="exportQuestions" class="btn btn-primary">
                    <i class="fas fa-download"></i> ÂØºÂá∫È¢òÂ∫ì
                </button>
                
                <button @click="importQuestions" class="btn btn-warning">
                    <i class="fas fa-upload"></i> ÂØºÂÖ•È¢òÂ∫ì
                </button>
                
                <button @click="saveToGitHub" class="btn btn-primary" :disabled="!hasChanges">
                    <i class="fas fa-save"></i> ‰øùÂ≠òÂà∞GitHub
                </button>

                <div class="search-box">
                    <input v-model="searchKeyword" 
                           class="search-input" 
                           placeholder="ÊêúÁ¥¢È¢òÁõÆÂÜÖÂÆπ„ÄÅÁü•ËØÜÁÇπ..." 
                           @input="onSearch">
                </div>

                <select v-model="selectedBank" class="filter-select" @change="onFilterChange">
                    <option value="">ÊâÄÊúâÈ¢òÂ∫ì</option>
                    <option v-for="bank in questionBanks" :key="bank.id" :value="bank.id">
                        {{ bank.name }}
                    </option>
                </select>

                <select v-model="selectedType" class="filter-select" @change="onFilterChange">
                    <option value="">ÊâÄÊúâÁ±ªÂûã</option>
                    <option value="ÈÄâÊã©È¢ò">ÈÄâÊã©È¢ò</option>
                    <option value="ËÆ°ÁÆóÈ¢ò">ËÆ°ÁÆóÈ¢ò</option>
                    <option value="ÂàÜÊûêÈ¢ò">ÂàÜÊûêÈ¢ò</option>
                    <option value="ËØÅÊòéÈ¢ò">ËØÅÊòéÈ¢ò</option>
                </select>
            </div>

            <!-- È¢òÁõÆÂàóË°® -->
            <div v-if="loading" class="loading">
                <i class="fas fa-spinner fa-spin"></i> Ê≠£Âú®Âä†ËΩΩÈ¢òÁõÆ...
            </div>

            <div v-else-if="filteredQuestions.length === 0" class="empty-state">
                <i class="fas fa-inbox"></i>
                <h3>ÊöÇÊó†È¢òÁõÆ</h3>
                <p>{{ searchKeyword ? 'Ê≤°ÊúâÊâæÂà∞ÂåπÈÖçÁöÑÈ¢òÁõÆ' : 'ÁÇπÂáª‰∏äÊñπ"Ê∑ªÂä†È¢òÁõÆ"ÂºÄÂßãÂàõÂª∫' }}</p>
            </div>

            <div v-else class="questions-grid">
                <div v-for="question in paginatedQuestions" :key="question.id" class="question-card">
                    <div class="question-header">
                        <span class="question-id">ID: {{ question.id }}</span>
                        <div class="question-actions">
                            <button @click="editQuestion(question)" class="btn btn-primary btn-small">
                                <i class="fas fa-edit"></i> ÁºñËæë
                            </button>
                            <button @click="duplicateQuestion(question)" class="btn btn-warning btn-small">
                                <i class="fas fa-copy"></i> Â§çÂà∂
                            </button>
                            <button @click="deleteQuestion(question)" class="btn btn-danger btn-small">
                                <i class="fas fa-trash"></i> Âà†Èô§
                            </button>
                        </div>
                    </div>

                    <div class="question-title">{{ question.title }}</div>

                    <div class="question-meta">
                        <div class="meta-item">
                            <i class="fas fa-tag"></i>
                            {{ question.type || 'Êú™ÂàÜÁ±ª' }}
                        </div>
                        <div class="meta-item">
                            <i class="fas fa-calendar"></i>
                            {{ question.year || 'Êú™Áü•Âπ¥‰ªΩ' }}
                        </div>
                        <div class="meta-item">
                            <i class="fas fa-star"></i>
                            {{ question.score || 0 }}ÂàÜ
                        </div>
                        <div class="meta-item">
                            <i class="fas fa-book"></i>
                            {{ getQuestionBankName(question.bankId) }}
                        </div>
                    </div>

                    <div v-if="question.options && question.options.length > 0" class="question-options">
                        <div v-for="(option, index) in question.options.slice(0, 2)" 
                             :key="index" 
                             class="option-item"
                             :class="{ 'correct-answer': index === question.answer }">
                            {{ String.fromCharCode(65 + index) }}. {{ option.substring(0, 50) }}...
                        </div>
                        <div v-if="question.options.length > 2" class="option-item" style="color: #999;">
                            ËøòÊúâ {{ question.options.length - 2 }} ‰∏™ÈÄâÈ°π...
                        </div>
                    </div>

                    <div v-if="question.knowledgePoints && question.knowledgePoints.length > 0" class="question-meta">
                        <div class="meta-item">
                            <i class="fas fa-lightbulb"></i>
                            {{ question.knowledgePoints.slice(0, 3).join(', ') }}
                            <span v-if="question.knowledgePoints.length > 3">...</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ÂàÜÈ°µ -->
            <div v-if="totalPages > 1" class="pagination" style="text-align: center; margin-top: 30px;">
                <button @click="currentPage = Math.max(1, currentPage - 1)" 
                        :disabled="currentPage === 1" 
                        class="btn btn-primary">
                    ‰∏ä‰∏ÄÈ°µ
                </button>
                <span style="margin: 0 20px; font-weight: 600;">
                    Á¨¨ {{ currentPage }} È°µÔºåÂÖ± {{ totalPages }} È°µ
                </span>
                <button @click="currentPage = Math.min(totalPages, currentPage + 1)" 
                        :disabled="currentPage === totalPages" 
                        class="btn btn-primary">
                    ‰∏ã‰∏ÄÈ°µ
                </button>
            </div>
        </div>

        <!-- Ê∑ªÂä†/ÁºñËæëÈ¢òÁõÆÊ®°ÊÄÅÊ°Ü -->
        <div v-if="showModal" class="modal-overlay" @click.self="closeModal">
            <div class="modal">
                <div class="modal-header">
                    <h3 class="modal-title">
                        <i :class="isEditing ? 'fas fa-edit' : 'fas fa-plus'"></i>
                        {{ isEditing ? 'ÁºñËæëÈ¢òÁõÆ' : 'Ê∑ªÂä†È¢òÁõÆ' }}
                    </h3>
                    <button @click="closeModal" class="close-btn">&times;</button>
                </div>

                <form @submit.prevent="saveQuestion">
                    <div class="form-group">
                        <label class="form-label">È¢òÁõÆÂÜÖÂÆπ *</label>
                        <textarea v-model="currentQuestion.title" 
                                  class="form-textarea" 
                                  placeholder="ËØ∑ËæìÂÖ•È¢òÁõÆÂÜÖÂÆπ..." 
                                  required></textarea>
                    </div>

                    <div class="form-group">
                        <label class="form-label">È¢òÁõÆÁ±ªÂûã *</label>
                        <select v-model="currentQuestion.type" class="form-select" required>
                            <option value="">ËØ∑ÈÄâÊã©Á±ªÂûã</option>
                            <option value="ÈÄâÊã©È¢ò">ÈÄâÊã©È¢ò</option>
                            <option value="ËÆ°ÁÆóÈ¢ò">ËÆ°ÁÆóÈ¢ò</option>
                            <option value="ÂàÜÊûêÈ¢ò">ÂàÜÊûêÈ¢ò</option>
                            <option value="ËØÅÊòéÈ¢ò">ËØÅÊòéÈ¢ò</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">ÊâÄÂ±ûÈ¢òÂ∫ì *</label>
                        <select v-model="currentQuestion.bankId" class="form-select" required>
                            <option value="">ËØ∑ÈÄâÊã©È¢òÂ∫ì</option>
                            <option v-for="bank in questionBanks" :key="bank.id" :value="bank.id">
                                {{ bank.name }}
                            </option>
                        </select>
                    </div>

                    <div style="display: flex; gap: 15px;">
                        <div class="form-group" style="flex: 1;">
                            <label class="form-label">Âπ¥‰ªΩ</label>
                            <input v-model.number="currentQuestion.year" 
                                   type="number" 
                                   class="form-input" 
                                   placeholder="Â¶Ç: 2023" 
                                   min="2000" 
                                   max="2030">
                        </div>

                        <div class="form-group" style="flex: 1;">
                            <label class="form-label">ÂàÜÊï∞</label>
                            <input v-model.number="currentQuestion.score" 
                                   type="number" 
                                   class="form-input" 
                                   placeholder="Â¶Ç: 5" 
                                   min="1" 
                                   max="50">
                        </div>
                    </div>

                    <!-- ÈÄâÊã©È¢òÈÄâÈ°πÁºñËæë -->
                    <div v-if="currentQuestion.type === 'ÈÄâÊã©È¢ò'" class="form-group">
                        <label class="form-label">ÈÄâÈ°πËÆæÁΩÆ</label>
                        <div class="options-editor">
                            <div v-for="(option, index) in currentQuestion.options" :key="index" class="option-editor">
                                <input type="radio" 
                                       :name="'correct-answer'" 
                                       :value="index" 
                                       v-model="currentQuestion.answer" 
                                       class="correct-radio">
                                <input v-model="currentQuestion.options[index]" 
                                       class="option-input" 
                                       :placeholder="`ÈÄâÈ°π ${String.fromCharCode(65 + index)}`"
                                       required>
                                <button type="button" 
                                        @click="removeOption(index)" 
                                        class="btn btn-danger btn-small"
                                        v-if="currentQuestion.options.length > 2">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            <button type="button" 
                                    @click="addOption" 
                                    class="add-option-btn"
                                    v-if="currentQuestion.options.length < 6">
                                <i class="fas fa-plus"></i> Ê∑ªÂä†ÈÄâÈ°π
                            </button>
                        </div>
                    </div>

                    <!-- ‰∏ªËßÇÈ¢òÁ≠îÊ°à -->
                    <div v-else class="form-group">
                        <label class="form-label">Ê†áÂáÜÁ≠îÊ°à</label>
                        <textarea v-model="currentQuestion.answer" 
                                  class="form-textarea" 
                                  placeholder="ËØ∑ËæìÂÖ•Ê†áÂáÜÁ≠îÊ°àÊàñËß£È¢òÊ≠•È™§..."></textarea>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Ëß£ÊûêËØ¥Êòé</label>
                        <textarea v-model="currentQuestion.explanation" 
                                  class="form-textarea" 
                                  placeholder="ËØ∑ËæìÂÖ•È¢òÁõÆËß£Êûê..."></textarea>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Áü•ËØÜÁÇπÊ†áÁ≠æ</label>
                        <input v-model="knowledgePointsText" 
                               class="form-input" 
                               placeholder="ËØ∑ËæìÂÖ•Áü•ËØÜÁÇπÔºåÁî®ÈÄóÂè∑ÂàÜÈöîÔºåÂ¶Ç: ÊµÅ‰ΩìÂäõÂ≠¶Âü∫Á°Ä,Èõ∑ËØ∫Êï∞,ËæπÁïåÂ±Ç">
                    </div>

                    <div class="form-group" style="display: flex; gap: 15px; justify-content: flex-end;">
                        <button type="button" @click="closeModal" class="btn btn-secondary">
                            ÂèñÊ∂à
                        </button>
                        <button type="submit" class="btn btn-success">
                            <i class="fas fa-save"></i>
                            {{ isEditing ? '‰øùÂ≠ò‰øÆÊîπ' : 'Ê∑ªÂä†È¢òÁõÆ' }}
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- ÈÄöÁü•Ê∂àÊÅØ -->
        <div v-if="notification.show" 
             :class="['notification', notification.type]">
            {{ notification.message }}
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js"></script>
    <script>
        const { createApp } = Vue;

        createApp({
            data() {
                return {
                    // È¢òÁõÆÊï∞ÊçÆ
                    questions: [],
                    questionBanks: [
                        { id: 'real-exam', name: 'ÂéÜÂπ¥ÁúüÈ¢ò', file: 'ÁúüÈ¢ò_‰∏≠ÂõΩÊµ∑Ê¥ãÂ§ßÂ≠¶_2000-2021_cleaned.json' },
                        { id: 'error-prone', name: 'ÊòìÈîôÈ¢òÈõÜ', file: 'ÊòìÈîôÈ¢òÈõÜ.json' },
                        { id: 'fluid-basics', name: 'ÊµÅ‰ΩìÂäõÂ≠¶Âü∫Á°Ä', file: 'ÂàÜÁ±ª_ÊµÅ‰ΩìÂäõÂ≠¶Âü∫Á°Ä.json' },
                        { id: 'fluid-properties', name: 'ÊµÅ‰ΩìÊÄßË¥®', file: 'ÂàÜÁ±ª_ÊµÅ‰ΩìÊÄßË¥®.json' },
                        { id: 'pressure', name: 'ÂéãÂäõ', file: 'ÂàÜÁ±ª_ÂéãÂäõ.json' },
                        { id: 'viscosity', name: 'Á≤òÊÄß', file: 'ÂàÜÁ±ª_Á≤òÊÄß.json' },
                        { id: 'reynolds', name: 'Èõ∑ËØ∫Êï∞', file: 'ÂàÜÁ±ª_Èõ∑ËØ∫Êï∞.json' },
                        { id: 'boundary-layer', name: 'ËæπÁïåÂ±Ç', file: 'ÂàÜÁ±ª_ËæπÁïåÂ±Ç.json' },
                        { id: 'streamline', name: 'ÊµÅÁ∫øËΩ®Ëøπ', file: 'ÂàÜÁ±ª_ÊµÅÁ∫øËΩ®Ëøπ.json' },
                        { id: 'vorticity', name: 'Ê∂°Â∫¶', file: 'ÂàÜÁ±ª_Ê∂°Â∫¶.json' },
                        { id: 'momentum', name: 'Âä®ÈáèÊñπÁ®ã', file: 'ÂàÜÁ±ª_Âä®ÈáèÊñπÁ®ã.json' },
                        { id: 'energy', name: 'ËÉΩÈáèÊñπÁ®ã', file: 'ÂàÜÁ±ª_ËÉΩÈáèÊñπÁ®ã.json' },
                        { id: 'potential-flow', name: 'ÂäøÊµÅ', file: 'ÂàÜÁ±ª_ÂäøÊµÅ.json' },
                        { id: 'pipe-flow', name: 'ÁÆ°ÈÅìÊµÅÂä®', file: 'ÂàÜÁ±ª_ÁÆ°ÈÅìÊµÅÂä®.json' },
                        { id: 'turbulence', name: 'ÊπçÊµÅ', file: 'ÂàÜÁ±ª_ÊπçÊµÅ.json' },
                        { id: 'free-surface', name: 'Ëá™Áî±Èù¢', file: 'ÂàÜÁ±ª_Ëá™Áî±Èù¢.json' },
                        { id: 'experiment', name: 'ÂÆûÈ™å‰∏éÈáèÁ∫≤', file: 'ÂàÜÁ±ª_ÂÆûÈ™å‰∏éÈáèÁ∫≤.json' }
                    ],
                    
                    // ÁïåÈù¢Áä∂ÊÄÅ
                    loading: false,
                    showModal: false,
                    isEditing: false,
                    hasChanges: false,
                    
                    // Á≠õÈÄâÂíåÊêúÁ¥¢
                    searchKeyword: '',
                    selectedBank: '',
                    selectedType: '',
                    
                    // ÂàÜÈ°µ
                    currentPage: 1,
                    pageSize: 12,
                    
                    // ÂΩìÂâçÁºñËæëÁöÑÈ¢òÁõÆ
                    currentQuestion: this.getEmptyQuestion(),
                    knowledgePointsText: '',
                    
                    // ÈÄöÁü•
                    notification: {
                        show: false,
                        message: '',
                        type: 'success'
                    }
                }
            },

            computed: {
                totalQuestions() {
                    return this.questions.length;
                },

                filteredQuestions() {
                    let filtered = this.questions;

                    // ÊêúÁ¥¢ËøáÊª§
                    if (this.searchKeyword) {
                        const keyword = this.searchKeyword.toLowerCase();
                        filtered = filtered.filter(q => 
                            q.title.toLowerCase().includes(keyword) ||
                            (q.knowledgePoints && q.knowledgePoints.some(kp => kp.toLowerCase().includes(keyword))) ||
                            (q.explanation && q.explanation.toLowerCase().includes(keyword))
                        );
                    }

                    // È¢òÂ∫ìËøáÊª§
                    if (this.selectedBank) {
                        filtered = filtered.filter(q => q.bankId === this.selectedBank);
                    }

                    // Á±ªÂûãËøáÊª§
                    if (this.selectedType) {
                        filtered = filtered.filter(q => q.type === this.selectedType);
                    }

                    return filtered;
                },

                totalPages() {
                    return Math.ceil(this.filteredQuestions.length / this.pageSize);
                },

                paginatedQuestions() {
                    const start = (this.currentPage - 1) * this.pageSize;
                    const end = start + this.pageSize;
                    return this.filteredQuestions.slice(start, end);
                }
            },

            async mounted() {
                await this.loadQuestions();
            },

            methods: {
                async loadQuestions() {
                    this.loading = true;
                    try {
                        // Âä†ËΩΩÊâÄÊúâÈ¢òÂ∫ì
                        const allQuestions = [];
                        
                        for (const bank of this.questionBanks) {
                            try {
                                const response = await fetch(`../question-banks/${bank.file}`);
                                if (response.ok) {
                                    const data = await response.json();
                                    const questions = Array.isArray(data) ? data : (data.questions || []);
                                    
                                    questions.forEach((q, index) => {
                                        allQuestions.push({
                                            ...q,
                                            id: q.id || `${bank.id}_${index}`,
                                            bankId: bank.id,
                                            bankName: bank.name
                                        });
                                    });
                                }
                            } catch (error) {
                                console.warn(`Êó†Ê≥ïÂä†ËΩΩÈ¢òÂ∫ì ${bank.name}:`, error);
                            }
                        }
                        
                        this.questions = allQuestions;
                        this.showNotification(`ÊàêÂäüÂä†ËΩΩ ${allQuestions.length} ÈÅìÈ¢òÁõÆ`, 'success');
                        
                    } catch (error) {
                        console.error('Âä†ËΩΩÈ¢òÁõÆÂ§±Ë¥•:', error);
                        this.showNotification('Âä†ËΩΩÈ¢òÁõÆÂ§±Ë¥•', 'error');
                    } finally {
                        this.loading = false;
                    }
                },

                getEmptyQuestion() {
                    return {
                        id: '',
                        title: '',
                        type: '',
                        bankId: '',
                        year: new Date().getFullYear(),
                        score: 5,
                        options: ['', '', '', ''],
                        answer: 0,
                        explanation: '',
                        knowledgePoints: []
                    };
                },

                showAddModal() {
                    this.currentQuestion = this.getEmptyQuestion();
                    this.knowledgePointsText = '';
                    this.isEditing = false;
                    this.showModal = true;
                },

                editQuestion(question) {
                    this.currentQuestion = { ...question };
                    // Á°Æ‰øùÈÄâÊã©È¢òÊúâÊ≠£Á°ÆÁöÑÈÄâÈ°πÊ†ºÂºè
                    if (question.type === 'ÈÄâÊã©È¢ò' && (!question.options || question.options.length === 0)) {
                        this.currentQuestion.options = ['', '', '', ''];
                        this.currentQuestion.answer = 0;
                    }
                    this.knowledgePointsText = question.knowledgePoints ? question.knowledgePoints.join(', ') : '';
                    this.isEditing = true;
                    this.showModal = true;
                },

                duplicateQuestion(question) {
                    this.currentQuestion = { 
                        ...question, 
                        id: `${question.id}_copy_${Date.now()}`,
                        title: `${question.title} (ÂâØÊú¨)`
                    };
                    this.knowledgePointsText = question.knowledgePoints ? question.knowledgePoints.join(', ') : '';
                    this.isEditing = false;
                    this.showModal = true;
                },

                async deleteQuestion(question) {
                    if (!confirm(`Á°ÆÂÆöË¶ÅÂà†Èô§È¢òÁõÆ "${question.title.substring(0, 50)}..." ÂêóÔºü`)) {
                        return;
                    }

                    try {
                        // ‰ªéÊú¨Âú∞Êï∞ÁªÑ‰∏≠Âà†Èô§
                        const index = this.questions.findIndex(q => q.id === question.id);
                        if (index !== -1) {
                            this.questions.splice(index, 1);
                            this.hasChanges = true;
                            this.showNotification('È¢òÁõÆÂ∑≤Âà†Èô§', 'success');
                        }
                    } catch (error) {
                        console.error('Âà†Èô§È¢òÁõÆÂ§±Ë¥•:', error);
                        this.showNotification('Âà†Èô§È¢òÁõÆÂ§±Ë¥•', 'error');
                    }
                },

                saveQuestion() {
                    // È™åËØÅË°®Âçï
                    if (!this.currentQuestion.title.trim()) {
                        this.showNotification('ËØ∑Â°´ÂÜôÈ¢òÁõÆÂÜÖÂÆπ', 'warning');
                        return;
                    }

                    if (!this.currentQuestion.type) {
                        this.showNotification('ËØ∑ÈÄâÊã©È¢òÁõÆÁ±ªÂûã', 'warning');
                        return;
                    }

                    if (!this.currentQuestion.bankId) {
                        this.showNotification('ËØ∑ÈÄâÊã©ÊâÄÂ±ûÈ¢òÂ∫ì', 'warning');
                        return;
                    }

                    // Â§ÑÁêÜÁü•ËØÜÁÇπ
                    this.currentQuestion.knowledgePoints = this.knowledgePointsText
                        .split(',')
                        .map(point => point.trim())
                        .filter(point => point);

                    // ÁîüÊàêIDÔºàÂ¶ÇÊûúÊòØÊñ∞Â¢ûÔºâ
                    if (!this.isEditing || !this.currentQuestion.id) {
                        this.currentQuestion.id = `${this.currentQuestion.bankId}_${Date.now()}`;
                    }

                    // ‰øùÂ≠òÂà∞Êú¨Âú∞Êï∞ÁªÑ
                    if (this.isEditing) {
                        const index = this.questions.findIndex(q => q.id === this.currentQuestion.id);
                        if (index !== -1) {
                            this.questions.splice(index, 1, { ...this.currentQuestion });
                        }
                    } else {
                        this.questions.push({ ...this.currentQuestion });
                    }

                    this.hasChanges = true;
                    this.closeModal();
                    this.showNotification(
                        this.isEditing ? 'È¢òÁõÆÂ∑≤Êõ¥Êñ∞' : 'È¢òÁõÆÂ∑≤Ê∑ªÂä†', 
                        'success'
                    );
                },

                addOption() {
                    if (this.currentQuestion.options.length < 6) {
                        this.currentQuestion.options.push('');
                    }
                },

                removeOption(index) {
                    if (this.currentQuestion.options.length > 2) {
                        this.currentQuestion.options.splice(index, 1);
                        // Ë∞ÉÊï¥Ê≠£Á°ÆÁ≠îÊ°àÁ¥¢Âºï
                        if (this.currentQuestion.answer >= index) {
                            this.currentQuestion.answer = Math.max(0, this.currentQuestion.answer - 1);
                        }
                    }
                },

                closeModal() {
                    this.showModal = false;
                    this.currentQuestion = this.getEmptyQuestion();
                    this.knowledgePointsText = '';
                },

                onSearch() {
                    this.currentPage = 1;
                },

                onFilterChange() {
                    this.currentPage = 1;
                },

                getQuestionBankName(bankId) {
                    const bank = this.questionBanks.find(b => b.id === bankId);
                    return bank ? bank.name : 'Êú™Áü•È¢òÂ∫ì';
                },

                async exportQuestions() {
                    try {
                        const dataStr = JSON.stringify(this.questions, null, 2);
                        const dataBlob = new Blob([dataStr], { type: 'application/json' });
                        const url = URL.createObjectURL(dataBlob);
                        
                        const link = document.createElement('a');
                        link.href = url;
                        link.download = `questions_export_${new Date().toISOString().split('T')[0]}.json`;
                        link.click();
                        
                        URL.revokeObjectURL(url);
                        this.showNotification('È¢òÁõÆÂ∑≤ÂØºÂá∫', 'success');
                    } catch (error) {
                        console.error('ÂØºÂá∫Â§±Ë¥•:', error);
                        this.showNotification('ÂØºÂá∫Â§±Ë¥•', 'error');
                    }
                },

                importQuestions() {
                    const input = document.createElement('input');
                    input.type = 'file';
                    input.accept = '.json';
                    
                    input.onchange = (event) => {
                        const file = event.target.files[0];
                        if (file) {
                            const reader = new FileReader();
                            reader.onload = (e) => {
                                try {
                                    const importedQuestions = JSON.parse(e.target.result);
                                    if (Array.isArray(importedQuestions)) {
                                        // ‰∏∫ÂØºÂÖ•ÁöÑÈ¢òÁõÆÁîüÊàêÊñ∞IDÔºåÈÅøÂÖçÂÜ≤Á™Å
                                        importedQuestions.forEach(q => {
                                            q.id = `imported_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
                                        });
                                        
                                        this.questions.push(...importedQuestions);
                                        this.hasChanges = true;
                                        this.showNotification(`ÊàêÂäüÂØºÂÖ• ${importedQuestions.length} ÈÅìÈ¢òÁõÆ`, 'success');
                                    } else {
                                        throw new Error('Êó†ÊïàÁöÑJSONÊ†ºÂºè');
                                    }
                                } catch (error) {
                                    console.error('ÂØºÂÖ•Â§±Ë¥•:', error);
                                    this.showNotification('ÂØºÂÖ•Â§±Ë¥•ÔºåËØ∑Ê£ÄÊü•Êñá‰ª∂Ê†ºÂºè', 'error');
                                }
                            };
                            reader.readAsText(file);
                        }
                    };
                    
                    input.click();
                },

                async saveToGitHub() {
                    if (!this.hasChanges) {
                        this.showNotification('Ê≤°ÊúâÈúÄË¶Å‰øùÂ≠òÁöÑÊõ¥Êîπ', 'warning');
                        return;
                    }

                    try {
                        this.showNotification('Ê≠£Âú®‰øùÂ≠òÂà∞GitHub...', 'info');
                        
                        // ËøôÈáåÂ∫îËØ•Ë∞ÉÁî®GitHub API‰øùÂ≠òÊñá‰ª∂
                        // Áé∞Âú®ÂÖàÊ®°Êãü‰øùÂ≠òÊàêÂäü
                        
                        await new Promise(resolve => setTimeout(resolve, 2000));
                        
                        this.hasChanges = false;
                        this.showNotification('Â∑≤ÊàêÂäü‰øùÂ≠òÂà∞GitHub‰ªìÂ∫ì', 'success');
                        
                    } catch (error) {
                        console.error('‰øùÂ≠òÂà∞GitHubÂ§±Ë¥•:', error);
                        this.showNotification('‰øùÂ≠òÂà∞GitHubÂ§±Ë¥•', 'error');
                    }
                },

                showNotification(message, type = 'success') {
                    this.notification = {
                        show: true,
                        message,
                        type
                    };

                    setTimeout(() => {
                        this.notification.show = false;
                    }, 3000);
                }
            }
        }).mount('#app');
    </script>
</body>
</html> 