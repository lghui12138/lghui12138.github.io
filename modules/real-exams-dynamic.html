<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ† å†å¹´çœŸé¢˜ - æµä½“åŠ›å­¦å­¦ä¹ å¹³å°</title>
    
    <!-- å¤–éƒ¨ä¾èµ– -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <!-- å…±äº«ç»„ä»¶åº“ -->
    <script src="../js/shared-components.js"></script>
    
    <style>
        body {
            background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
            margin: 0;
            font-family: 'SF Pro Display', sans-serif;
            color: white;
        }

        .exams-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .year-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .year-card {
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: 30px;
            color: #333;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .year-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 25px 50px rgba(0,0,0,0.2);
        }

        .year-header {
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid #f39c12;
        }

        .year-title {
            font-size: 2em;
            font-weight: bold;
            color: #f39c12;
            margin-bottom: 10px;
        }

        .year-subtitle {
            color: #666;
            font-size: 1.1em;
        }

        .exam-list {
            margin-bottom: 25px;
        }

        .exam-item {
            background: #f8f9fa;
            border-left: 4px solid #f39c12;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }

        .exam-item:hover {
            background: #e9ecef;
            border-left-color: #e67e22;
        }

        .exam-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .exam-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9em;
            color: #666;
            margin-bottom: 15px;
        }

        .exam-stats {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }

        .stat-item {
            text-align: center;
            padding: 10px;
            background: white;
            border-radius: 8px;
            flex: 1;
        }

        .stat-number {
            font-size: 1.2em;
            font-weight: bold;
            color: #f39c12;
        }

        .stat-label {
            font-size: 0.8em;
            color: #666;
        }

        .exam-actions {
            display: flex;
            gap: 10px;
        }

        .action-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-practice {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
        }

        .btn-analysis {
            background: #3498db;
            color: white;
        }

        .btn-download {
            background: #2ecc71;
            color: white;
        }

        .filter-panel {
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            color: #333;
        }

        .filter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .filter-group {
            margin-bottom: 15px;
        }

        .filter-label {
            display: block;
            font-weight: bold;
            margin-bottom: 8px;
            color: #333;
        }

        .filter-select {
            width: 100%;
            padding: 10px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 16px;
        }

        .filter-select:focus {
            border-color: #f39c12;
            outline: none;
        }

        .difficulty-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: bold;
        }

        .difficulty-easy {
            background: #d4edda;
            color: #155724;
        }

        .difficulty-medium {
            background: #fff3cd;
            color: #856404;
        }

        .difficulty-hard {
            background: #f8d7da;
            color: #721c24;
        }

        .year-badge {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
        }

        .progress-indicator {
            background: #f0f0f0;
            height: 6px;
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(135deg, #f39c12, #e67e22);
            transition: width 0.3s ease;
        }

        .exam-tips {
            background: #e8f4fd;
            border: 2px solid #3498db;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            color: #2c3e50;
        }

        .tips-title {
            font-weight: bold;
            margin-bottom: 15px;
            color: #3498db;
        }

        .tips-list {
            list-style: none;
            padding: 0;
        }

        .tips-list li {
            padding: 8px 0;
            padding-left: 25px;
            position: relative;
        }

        .tips-list li:before {
            content: "ğŸ’¡";
            position: absolute;
            left: 0;
        }

        .search-box {
            width: 100%;
            padding: 15px;
            border: 2px solid #dee2e6;
            border-radius: 25px;
            font-size: 16px;
            margin-bottom: 20px;
        }

        .search-box:focus {
            border-color: #f39c12;
            outline: none;
        }
    </style>
</head>
<body>
    <div id="realExamsApp">
        <!-- æµ·æ´‹èƒŒæ™¯ -->
        <ocean-background></ocean-background>

        <!-- é€šçŸ¥ç»„ä»¶ -->
        <notification-component :notification="notification" @close="notification = ''"></notification-component>

        <!-- åŠ è½½åŠ¨ç”» -->
        <loading-spinner :show="loading" text="æ­£åœ¨åŠ è½½å†å¹´çœŸé¢˜..."></loading-spinner>

        <div class="exams-container" v-if="!loading">
            <!-- é¡µé¢å¤´éƒ¨ -->
            <header style="text-align: center; padding: 40px 0; margin-bottom: 30px;">
                <h1><i class="fas fa-medal"></i> å†å¹´çœŸé¢˜</h1>
                <p>ä¸­å›½æµ·æ´‹å¤§å­¦803æµä½“åŠ›å­¦å†å¹´çœŸé¢˜é›†ï¼Œæƒå¨é¢˜æºï¼Œè€ƒç‚¹åˆ†æ</p>
            </header>

            <!-- å­¦ä¹ å»ºè®® -->
            <div class="exam-tips">
                <div class="tips-title"><i class="fas fa-lightbulb"></i> çœŸé¢˜å­¦ä¹ å»ºè®®</div>
                <ul class="tips-list">
                    <li>æŒ‰å¹´ä»½é¡ºåºç»ƒä¹ ï¼Œäº†è§£è€ƒè¯•è¶‹åŠ¿å’Œé‡ç‚¹å˜åŒ–</li>
                    <li>å…ˆåšé¢˜å†çœ‹è§£æï¼ŒåŸ¹å…»ç‹¬ç«‹æ€è€ƒèƒ½åŠ›</li>
                    <li>é‡ç‚¹å…³æ³¨é”™é¢˜å’Œä¸ç†Ÿæ‚‰çš„æ¦‚å¿µ</li>
                    <li>æ€»ç»“é«˜é¢‘è€ƒç‚¹å’Œå¸¸è§é¢˜å‹</li>
                    <li>æ¨¡æ‹ŸçœŸå®è€ƒè¯•ç¯å¢ƒï¼Œæ§åˆ¶ç­”é¢˜æ—¶é—´</li>
                </ul>
            </div>

            <!-- ç­›é€‰é¢æ¿ -->
            <div class="filter-panel">
                <h3><i class="fas fa-filter"></i> çœŸé¢˜ç­›é€‰</h3>
                
                <input 
                    v-model="searchKeyword" 
                    class="search-box" 
                    placeholder="æœç´¢é¢˜ç›®å…³é”®è¯..."
                    @input="filterExams"
                >

                <div class="filter-grid">
                    <div class="filter-group">
                        <label class="filter-label">å¹´ä»½èŒƒå›´ï¼š</label>
                        <select v-model="filters.yearRange" @change="filterExams" class="filter-select">
                            <option value="all">å…¨éƒ¨å¹´ä»½</option>
                            <option value="recent">è¿‘3å¹´(2021-2023)</option>
                            <option value="2020s">2020å¹´ä»£</option>
                            <option value="2010s">2010å¹´ä»£</option>
                            <option value="2000s">2000å¹´ä»£</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label class="filter-label">é¢˜ç›®ç±»å‹ï¼š</label>
                        <select v-model="filters.questionType" @change="filterExams" class="filter-select">
                            <option value="all">å…¨éƒ¨ç±»å‹</option>
                            <option value="choice">é€‰æ‹©é¢˜</option>
                            <option value="calculation">è®¡ç®—é¢˜</option>
                            <option value="analysis">åˆ†æé¢˜</option>
                            <option value="proof">è¯æ˜é¢˜</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label class="filter-label">éš¾åº¦ç­‰çº§ï¼š</label>
                        <select v-model="filters.difficulty" @change="filterExams" class="filter-select">
                            <option value="all">å…¨éƒ¨éš¾åº¦</option>
                            <option value="easy">ç®€å•</option>
                            <option value="medium">ä¸­ç­‰</option>
                            <option value="hard">å›°éš¾</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label class="filter-label">çŸ¥è¯†ç‚¹ï¼š</label>
                        <select v-model="filters.topic" @change="filterExams" class="filter-select">
                            <option value="all">å…¨éƒ¨çŸ¥è¯†ç‚¹</option>
                            <option value="statics">æµä½“é™åŠ›å­¦</option>
                            <option value="kinematics">æµä½“è¿åŠ¨å­¦</option>
                            <option value="dynamics">æµä½“åŠ¨åŠ›å­¦</option>
                            <option value="viscous">ç²˜æ€§æµåŠ¨</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- å¹´ä»½è¯•å·åˆ—è¡¨ -->
            <div class="year-grid">
                <div v-for="yearData in filteredExams" :key="yearData.year" class="year-card">
                    <div class="year-header">
                        <div class="year-title">{{ yearData.year }}å¹´</div>
                        <div class="year-subtitle">{{ yearData.semester }}</div>
                        <div style="margin-top: 10px;">
                            <span class="year-badge">æƒå¨çœŸé¢˜</span>
                        </div>
                    </div>

                    <div class="exam-stats">
                        <div class="stat-item">
                            <div class="stat-number">{{ yearData.totalQuestions }}</div>
                            <div class="stat-label">é¢˜ç›®æ€»æ•°</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">{{ yearData.averageScore }}%</div>
                            <div class="stat-label">å¹³å‡åˆ†</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">{{ yearData.practiceCount }}</div>
                            <div class="stat-label">ç»ƒä¹ äººæ•°</div>
                        </div>
                    </div>

                    <div class="exam-list">
                        <div v-for="exam in yearData.exams" :key="exam.id" class="exam-item">
                            <div class="exam-title">{{ exam.title }}</div>
                            <div class="exam-meta">
                                <span><i class="fas fa-calendar"></i> {{ exam.date }}</span>
                                <span class="difficulty-badge" :class="'difficulty-' + exam.difficulty">
                                    {{ getDifficultyText(exam.difficulty) }}
                                </span>
                            </div>
                            
                            <div class="progress-indicator">
                                <div class="progress-bar" :style="{ width: exam.progress + '%' }"></div>
                            </div>
                            <div style="font-size: 0.9em; color: #666; margin-bottom: 15px;">
                                å®Œæˆè¿›åº¦ï¼š{{ exam.progress }}%
                            </div>

                            <div class="exam-actions">
                                <button class="action-btn btn-practice" @click="startPractice(exam)">
                                    <i class="fas fa-play"></i> 
                                    {{ exam.progress > 0 ? 'ç»§ç»­ç»ƒä¹ ' : 'å¼€å§‹ç»ƒä¹ ' }}
                                </button>
                                <button class="action-btn btn-analysis" @click="viewAnalysis(exam)">
                                    <i class="fas fa-chart-line"></i> è€ƒç‚¹åˆ†æ
                                </button>
                                <button class="action-btn btn-download" @click="downloadExam(exam)">
                                    <i class="fas fa-download"></i> ä¸‹è½½PDF
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue;

        createApp({
            mixins: [SharedMixin],
            components: {
                'ocean-background': OceanBackground,
                'notification-component': NotificationComponent,
                'loading-spinner': LoadingSpinner
            },
            data() {
                return {
                    searchKeyword: '',
                    filters: {
                        yearRange: 'all',
                        questionType: 'all',
                        difficulty: 'all',
                        topic: 'all'
                    },
                    examData: [
                        {
                            year: 2023,
                            semester: 'ç§‹å­£å­¦æœŸæœŸæœ«è€ƒè¯•',
                            totalQuestions: 45,
                            averageScore: 76,
                            practiceCount: 234,
                            exams: [
                                {
                                    id: '2023-final',
                                    title: 'æµä½“åŠ›å­¦æœŸæœ«è€ƒè¯•',
                                    date: '2023-12-25',
                                    difficulty: 'hard',
                                    progress: 0,
                                    topics: ['statics', 'dynamics', 'viscous']
                                },
                                {
                                    id: '2023-mid',
                                    title: 'æµä½“åŠ›å­¦æœŸä¸­è€ƒè¯•',
                                    date: '2023-11-15',
                                    difficulty: 'medium',
                                    progress: 60,
                                    topics: ['statics', 'kinematics']
                                }
                            ]
                        },
                        {
                            year: 2022,
                            semester: 'ç§‹å­£å­¦æœŸæœŸæœ«è€ƒè¯•',
                            totalQuestions: 42,
                            averageScore: 72,
                            practiceCount: 456,
                            exams: [
                                {
                                    id: '2022-final',
                                    title: 'æµä½“åŠ›å­¦æœŸæœ«è€ƒè¯•',
                                    date: '2022-12-28',
                                    difficulty: 'hard',
                                    progress: 25,
                                    topics: ['statics', 'dynamics', 'viscous']
                                },
                                {
                                    id: '2022-mid',
                                    title: 'æµä½“åŠ›å­¦æœŸä¸­è€ƒè¯•',
                                    date: '2022-11-20',
                                    difficulty: 'medium',
                                    progress: 85,
                                    topics: ['statics', 'kinematics']
                                }
                            ]
                        },
                        {
                            year: 2021,
                            semester: 'ç§‹å­£å­¦æœŸæœŸæœ«è€ƒè¯•',
                            totalQuestions: 38,
                            averageScore: 74,
                            practiceCount: 389,
                            exams: [
                                {
                                    id: '2021-final',
                                    title: 'æµä½“åŠ›å­¦æœŸæœ«è€ƒè¯•',
                                    date: '2021-12-30',
                                    difficulty: 'hard',
                                    progress: 100,
                                    topics: ['statics', 'dynamics', 'viscous']
                                },
                                {
                                    id: '2021-mid',
                                    title: 'æµä½“åŠ›å­¦æœŸä¸­è€ƒè¯•',
                                    date: '2021-11-18',
                                    difficulty: 'medium',
                                    progress: 100,
                                    topics: ['statics', 'kinematics']
                                }
                            ]
                        },
                        {
                            year: 2020,
                            semester: 'ç§‹å­£å­¦æœŸæœŸæœ«è€ƒè¯•',
                            totalQuestions: 40,
                            averageScore: 69,
                            practiceCount: 512,
                            exams: [
                                {
                                    id: '2020-final',
                                    title: 'æµä½“åŠ›å­¦æœŸæœ«è€ƒè¯•',
                                    date: '2020-12-25',
                                    difficulty: 'hard',
                                    progress: 75,
                                    topics: ['statics', 'dynamics', 'viscous']
                                }
                            ]
                        },
                        {
                            year: 2019,
                            semester: 'ç§‹å­£å­¦æœŸæœŸæœ«è€ƒè¯•',
                            totalQuestions: 36,
                            averageScore: 71,
                            practiceCount: 398,
                            exams: [
                                {
                                    id: '2019-final',
                                    title: 'æµä½“åŠ›å­¦æœŸæœ«è€ƒè¯•',
                                    date: '2019-12-27',
                                    difficulty: 'medium',
                                    progress: 90,
                                    topics: ['statics', 'dynamics', 'viscous']
                                }
                            ]
                        }
                    ],
                    filteredExams: []
                }
            },
            methods: {
                filterExams() {
                    let filtered = [...this.examData];
                    
                    // å¹´ä»½ç­›é€‰
                    if (this.filters.yearRange !== 'all') {
                        if (this.filters.yearRange === 'recent') {
                            filtered = filtered.filter(item => item.year >= 2021);
                        } else if (this.filters.yearRange === '2020s') {
                            filtered = filtered.filter(item => item.year >= 2020);
                        } else if (this.filters.yearRange === '2010s') {
                            filtered = filtered.filter(item => item.year >= 2010 && item.year < 2020);
                        } else if (this.filters.yearRange === '2000s') {
                            filtered = filtered.filter(item => item.year >= 2000 && item.year < 2010);
                        }
                    }
                    
                    // éš¾åº¦ç­›é€‰
                    if (this.filters.difficulty !== 'all') {
                        filtered = filtered.map(yearData => ({
                            ...yearData,
                            exams: yearData.exams.filter(exam => exam.difficulty === this.filters.difficulty)
                        })).filter(yearData => yearData.exams.length > 0);
                    }
                    
                    // å…³é”®è¯æœç´¢
                    if (this.searchKeyword.trim()) {
                        const keyword = this.searchKeyword.trim().toLowerCase();
                        filtered = filtered.map(yearData => ({
                            ...yearData,
                            exams: yearData.exams.filter(exam => 
                                exam.title.toLowerCase().includes(keyword) ||
                                exam.date.includes(keyword)
                            )
                        })).filter(yearData => yearData.exams.length > 0);
                    }
                    
                    this.filteredExams = filtered;
                },
                
                getDifficultyText(difficulty) {
                    const texts = {
                        'easy': 'ç®€å•',
                        'medium': 'ä¸­ç­‰',
                        'hard': 'å›°éš¾'
                    };
                    return texts[difficulty] || 'æœªçŸ¥';
                },
                
                startPractice(exam) {
                    this.showNotification(`å¼€å§‹ç»ƒä¹ ï¼š${exam.title}`, 'success');
                    // è¿™é‡Œå¯ä»¥è·³è½¬åˆ°ç»ƒä¹ é¡µé¢ï¼Œä¼ é€’exam.idå‚æ•°
                    const practiceUrl = `practice-dynamic.html?type=real-exam&examId=${exam.id}`;
                    this.navigateToModule(practiceUrl);
                },
                
                viewAnalysis(exam) {
                    this.showNotification(`æŸ¥çœ‹è€ƒç‚¹åˆ†æï¼š${exam.title}`, 'info');
                    // è¿™é‡Œå¯ä»¥æ˜¾ç¤ºè€ƒç‚¹åˆ†æå¼¹çª—æˆ–è·³è½¬åˆ°åˆ†æé¡µé¢
                },
                
                downloadExam(exam) {
                    this.showNotification(`ä¸‹è½½åŠŸèƒ½å¼€å‘ä¸­ï¼š${exam.title}`, 'info');
                    // è¿™é‡Œå¯ä»¥å®ç°PDFä¸‹è½½åŠŸèƒ½
                },
                
                loadProgress() {
                    const savedProgress = this.loadFromStorage('realExamProgress', {});
                    
                    // æ›´æ–°æ¯ä¸ªè€ƒè¯•çš„è¿›åº¦
                    this.examData.forEach(yearData => {
                        yearData.exams.forEach(exam => {
                            if (savedProgress[exam.id]) {
                                exam.progress = savedProgress[exam.id].progress || 0;
                            }
                        });
                    });
                }
            },
            
            mounted() {
                console.log('ğŸ† å†å¹´çœŸé¢˜æ¨¡å—å¯åŠ¨ï¼');
                this.setLoading(true);
                
                setTimeout(() => {
                    this.loadProgress();
                    this.filterExams(); // åˆå§‹åŒ–æ˜¾ç¤ºæ‰€æœ‰æ•°æ®
                    this.setLoading(false);
                    this.showNotification('å†å¹´çœŸé¢˜åŠ è½½å®Œæˆï¼å…± 329 é“æƒå¨çœŸé¢˜', 'success');
                }, 1500);
            }
        }).mount('#realExamsApp');
    </script>
</body>
</html> 