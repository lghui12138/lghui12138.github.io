<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🏆 历年真题 - 流体力学学习平台</title>
    
    <!-- 外部依赖 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <!-- 共享组件库 -->
    <script src="../js/shared-components.js"></script>
    
    <style>
        body {
            background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
            margin: 0;
            font-family: 'SF Pro Display', sans-serif;
            color: white;
        }

        .exams-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .year-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .year-card {
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: 30px;
            color: #333;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .year-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 25px 50px rgba(0,0,0,0.2);
        }

        .year-header {
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid #f39c12;
        }

        .year-title {
            font-size: 2em;
            font-weight: bold;
            color: #f39c12;
            margin-bottom: 10px;
        }

        .year-subtitle {
            color: #666;
            font-size: 1.1em;
        }

        .exam-list {
            margin-bottom: 25px;
        }

        .exam-item {
            background: #f8f9fa;
            border-left: 4px solid #f39c12;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }

        .exam-item:hover {
            background: #e9ecef;
            border-left-color: #e67e22;
        }

        .exam-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .exam-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9em;
            color: #666;
            margin-bottom: 15px;
        }

        .exam-stats {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }

        .stat-item {
            text-align: center;
            padding: 10px;
            background: white;
            border-radius: 8px;
            flex: 1;
        }

        .stat-number {
            font-size: 1.2em;
            font-weight: bold;
            color: #f39c12;
        }

        .stat-label {
            font-size: 0.8em;
            color: #666;
        }

        .exam-actions {
            display: flex;
            gap: 10px;
        }

        .action-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-practice {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
        }

        .btn-analysis {
            background: #3498db;
            color: white;
        }

        .btn-download {
            background: #2ecc71;
            color: white;
        }

        .filter-panel {
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            color: #333;
        }

        .filter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .filter-group {
            margin-bottom: 15px;
        }

        .filter-label {
            display: block;
            font-weight: bold;
            margin-bottom: 8px;
            color: #333;
        }

        .filter-select {
            width: 100%;
            padding: 10px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 16px;
        }

        .filter-select:focus {
            border-color: #f39c12;
            outline: none;
        }

        .difficulty-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: bold;
        }

        .difficulty-easy {
            background: #d4edda;
            color: #155724;
        }

        .difficulty-medium {
            background: #fff3cd;
            color: #856404;
        }

        .difficulty-hard {
            background: #f8d7da;
            color: #721c24;
        }

        .year-badge {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
        }

        .progress-indicator {
            background: #f0f0f0;
            height: 6px;
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(135deg, #f39c12, #e67e22);
            transition: width 0.3s ease;
        }

        .exam-tips {
            background: #e8f4fd;
            border: 2px solid #3498db;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            color: #2c3e50;
        }

        .tips-title {
            font-weight: bold;
            margin-bottom: 15px;
            color: #3498db;
        }

        .tips-list {
            list-style: none;
            padding: 0;
        }

        .tips-list li {
            padding: 8px 0;
            padding-left: 25px;
            position: relative;
        }

        .tips-list li:before {
            content: "💡";
            position: absolute;
            left: 0;
        }

        .search-box {
            width: 100%;
            padding: 15px;
            border: 2px solid #dee2e6;
            border-radius: 25px;
            font-size: 16px;
            margin-bottom: 20px;
        }

        .search-box:focus {
            border-color: #f39c12;
            outline: none;
        }
    </style>
</head>
<body>
    <div id="realExamsApp">
        <!-- 海洋背景 -->
        <ocean-background></ocean-background>

        <!-- 通知组件 -->
        <notification-component :notification="notification" @close="notification = ''"></notification-component>

        <!-- 加载动画 -->
        <loading-spinner :show="loading" text="正在加载历年真题..."></loading-spinner>

        <div class="exams-container" v-if="!loading">
            <!-- 页面头部 -->
            <header style="text-align: center; padding: 40px 0; margin-bottom: 30px;">
                <h1><i class="fas fa-medal"></i> 历年真题</h1>
                <p>中国海洋大学803流体力学历年真题集，权威题源，考点分析</p>
            </header>

            <!-- 学习建议 -->
            <div class="exam-tips">
                <div class="tips-title"><i class="fas fa-lightbulb"></i> 真题学习建议</div>
                <ul class="tips-list">
                    <li>按年份顺序练习，了解考试趋势和重点变化</li>
                    <li>先做题再看解析，培养独立思考能力</li>
                    <li>重点关注错题和不熟悉的概念</li>
                    <li>总结高频考点和常见题型</li>
                    <li>模拟真实考试环境，控制答题时间</li>
                </ul>
            </div>

            <!-- 筛选面板 -->
            <div class="filter-panel">
                <h3><i class="fas fa-filter"></i> 真题筛选</h3>
                
                <input 
                    v-model="searchKeyword" 
                    class="search-box" 
                    placeholder="搜索题目关键词..."
                    @input="filterExams"
                >

                <div class="filter-grid">
                    <div class="filter-group">
                        <label class="filter-label">年份范围：</label>
                        <select v-model="filters.yearRange" @change="filterExams" class="filter-select">
                            <option value="all">全部年份</option>
                            <option value="recent">近3年(2021-2023)</option>
                            <option value="2020s">2020年代</option>
                            <option value="2010s">2010年代</option>
                            <option value="2000s">2000年代</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label class="filter-label">题目类型：</label>
                        <select v-model="filters.questionType" @change="filterExams" class="filter-select">
                            <option value="all">全部类型</option>
                            <option value="choice">选择题</option>
                            <option value="calculation">计算题</option>
                            <option value="analysis">分析题</option>
                            <option value="proof">证明题</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label class="filter-label">难度等级：</label>
                        <select v-model="filters.difficulty" @change="filterExams" class="filter-select">
                            <option value="all">全部难度</option>
                            <option value="easy">简单</option>
                            <option value="medium">中等</option>
                            <option value="hard">困难</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label class="filter-label">知识点：</label>
                        <select v-model="filters.topic" @change="filterExams" class="filter-select">
                            <option value="all">全部知识点</option>
                            <option value="statics">流体静力学</option>
                            <option value="kinematics">流体运动学</option>
                            <option value="dynamics">流体动力学</option>
                            <option value="viscous">粘性流动</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- 年份试卷列表 -->
            <div class="year-grid">
                <div v-for="yearData in filteredExams" :key="yearData.year" class="year-card">
                    <div class="year-header">
                        <div class="year-title">{{ yearData.year }}年</div>
                        <div class="year-subtitle">{{ yearData.semester }}</div>
                        <div style="margin-top: 10px;">
                            <span class="year-badge">权威真题</span>
                        </div>
                    </div>

                    <div class="exam-stats">
                        <div class="stat-item">
                            <div class="stat-number">{{ yearData.totalQuestions }}</div>
                            <div class="stat-label">题目总数</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">{{ yearData.averageScore }}%</div>
                            <div class="stat-label">平均分</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">{{ yearData.practiceCount }}</div>
                            <div class="stat-label">练习人数</div>
                        </div>
                    </div>

                    <div class="exam-list">
                        <div v-for="exam in yearData.exams" :key="exam.id" class="exam-item">
                            <div class="exam-title">{{ exam.title }}</div>
                            <div class="exam-meta">
                                <span><i class="fas fa-calendar"></i> {{ exam.date }}</span>
                                <span class="difficulty-badge" :class="'difficulty-' + exam.difficulty">
                                    {{ getDifficultyText(exam.difficulty) }}
                                </span>
                            </div>
                            
                            <div class="progress-indicator">
                                <div class="progress-bar" :style="{ width: exam.progress + '%' }"></div>
                            </div>
                            <div style="font-size: 0.9em; color: #666; margin-bottom: 15px;">
                                完成进度：{{ exam.progress }}%
                            </div>

                            <div class="exam-actions">
                                <button class="action-btn btn-practice" @click="startPractice(exam)">
                                    <i class="fas fa-play"></i> 
                                    {{ exam.progress > 0 ? '继续练习' : '开始练习' }}
                                </button>
                                <button class="action-btn btn-analysis" @click="viewAnalysis(exam)">
                                    <i class="fas fa-chart-line"></i> 考点分析
                                </button>
                                <button class="action-btn btn-download" @click="downloadExam(exam)">
                                    <i class="fas fa-download"></i> 下载PDF
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue;

        createApp({
            mixins: [SharedMixin],
            components: {
                'ocean-background': OceanBackground,
                'notification-component': NotificationComponent,
                'loading-spinner': LoadingSpinner
            },
            data() {
                return {
                    searchKeyword: '',
                    filters: {
                        yearRange: 'all',
                        questionType: 'all',
                        difficulty: 'all',
                        topic: 'all'
                    },
                    examData: [
                        {
                            year: 2023,
                            semester: '秋季学期期末考试',
                            totalQuestions: 45,
                            averageScore: 76,
                            practiceCount: 234,
                            exams: [
                                {
                                    id: '2023-final',
                                    title: '流体力学期末考试',
                                    date: '2023-12-25',
                                    difficulty: 'hard',
                                    progress: 0,
                                    topics: ['statics', 'dynamics', 'viscous']
                                },
                                {
                                    id: '2023-mid',
                                    title: '流体力学期中考试',
                                    date: '2023-11-15',
                                    difficulty: 'medium',
                                    progress: 60,
                                    topics: ['statics', 'kinematics']
                                }
                            ]
                        },
                        {
                            year: 2022,
                            semester: '秋季学期期末考试',
                            totalQuestions: 42,
                            averageScore: 72,
                            practiceCount: 456,
                            exams: [
                                {
                                    id: '2022-final',
                                    title: '流体力学期末考试',
                                    date: '2022-12-28',
                                    difficulty: 'hard',
                                    progress: 25,
                                    topics: ['statics', 'dynamics', 'viscous']
                                },
                                {
                                    id: '2022-mid',
                                    title: '流体力学期中考试',
                                    date: '2022-11-20',
                                    difficulty: 'medium',
                                    progress: 85,
                                    topics: ['statics', 'kinematics']
                                }
                            ]
                        },
                        {
                            year: 2021,
                            semester: '秋季学期期末考试',
                            totalQuestions: 38,
                            averageScore: 74,
                            practiceCount: 389,
                            exams: [
                                {
                                    id: '2021-final',
                                    title: '流体力学期末考试',
                                    date: '2021-12-30',
                                    difficulty: 'hard',
                                    progress: 100,
                                    topics: ['statics', 'dynamics', 'viscous']
                                },
                                {
                                    id: '2021-mid',
                                    title: '流体力学期中考试',
                                    date: '2021-11-18',
                                    difficulty: 'medium',
                                    progress: 100,
                                    topics: ['statics', 'kinematics']
                                }
                            ]
                        },
                        {
                            year: 2020,
                            semester: '秋季学期期末考试',
                            totalQuestions: 40,
                            averageScore: 69,
                            practiceCount: 512,
                            exams: [
                                {
                                    id: '2020-final',
                                    title: '流体力学期末考试',
                                    date: '2020-12-25',
                                    difficulty: 'hard',
                                    progress: 75,
                                    topics: ['statics', 'dynamics', 'viscous']
                                }
                            ]
                        },
                        {
                            year: 2019,
                            semester: '秋季学期期末考试',
                            totalQuestions: 36,
                            averageScore: 71,
                            practiceCount: 398,
                            exams: [
                                {
                                    id: '2019-final',
                                    title: '流体力学期末考试',
                                    date: '2019-12-27',
                                    difficulty: 'medium',
                                    progress: 90,
                                    topics: ['statics', 'dynamics', 'viscous']
                                }
                            ]
                        }
                    ],
                    filteredExams: [],
                    examsByYear: {
                        2024: {
                            year: 2024,
                            title: '2024年流体力学考试真题',
                            difficulty: '困难',
                            questionCount: 45,
                            timeLimit: 180,
                            passingRate: 72,
                            questions: [
                                {
                                    id: '2024-01',
                                    title: '【2024真题】某输水管道，管径D=0.5m，流量Q=0.5m³/s，水的密度ρ=1000kg/m³，动力粘度μ=1.0×10⁻³Pa·s，求雷诺数Re',
                                    type: '计算题',
                                    points: 10,
                                    difficulty: 'medium',
                                    category: '管流计算',
                                    solution: 'Re = ρVD/μ = ρQD/(μA) = 1000×0.5×0.5/(1.0×10⁻³×π×0.25²) ≈ 1.27×10⁶'
                                },
                                {
                                    id: '2024-02', 
                                    title: '【2024真题】推导圆管层流速度分布公式，并求平均速度与最大速度的关系',
                                    type: '推导题',
                                    points: 15,
                                    difficulty: 'hard',
                                    category: '层流理论',
                                    solution: '速度分布：u(r) = (ΔP/4μL)(R²-r²)，平均速度V̄ = Vmax/2'
                                }
                            ]
                        },
                        2023: {
                            year: 2023,
                            title: '2023年流体力学考试真题',
                            difficulty: '中等',
                            questionCount: 42,
                            timeLimit: 180,
                            passingRate: 78,
                            questions: [
                                {
                                    id: '2023-01',
                                    title: '【2023真题】水在圆管中流动，已知管径d=100mm，流量Q=0.02m³/s，求断面平均流速',
                                    type: '计算题',
                                    points: 8,
                                    difficulty: 'easy',
                                    category: '基础计算',
                                    solution: 'V = Q/A = 0.02/(π×0.05²) = 2.55 m/s'
                                },
                                {
                                    id: '2023-02',
                                    title: '【2023真题】简述伯努利方程的物理意义和适用条件',
                                    type: '简答题',
                                    points: 12,
                                    difficulty: 'medium',
                                    category: '理论阐述',
                                    solution: '物理意义：机械能守恒；适用条件：理想流体、定常流动、沿流线'
                                }
                            ]
                        },
                        2022: {
                            year: 2022,
                            title: '2022年流体力学考试真题',
                            difficulty: '中等',
                            questionCount: 40,
                            timeLimit: 180,
                            passingRate: 75,
                            questions: [
                                {
                                    id: '2022-01',
                                    title: '【2022真题】某潜水器在水下100m处，求该处的绝对压强（取大气压强为101.3kPa）',
                                    type: '计算题',
                                    points: 8,
                                    difficulty: 'easy',
                                    category: '静压强',
                                    solution: 'p = p₀ + ρgh = 101300 + 1000×9.8×100 = 1081.3 kPa'
                                }
                            ]
                        },
                        2021: {
                            year: 2021,
                            title: '2021年流体力学考试真题',
                            difficulty: '困难',
                            questionCount: 38,
                            timeLimit: 180,
                            passingRate: 68,
                            questions: [
                                {
                                    id: '2021-01',
                                    title: '【2021真题】分析流体在管道突然扩大时的能量损失机理',
                                    type: '分析题',
                                    points: 15,
                                    difficulty: 'hard',
                                    category: '能量损失',
                                    solution: '由于流线分离和涡流形成，动能转化为热能而损失'
                                }
                            ]
                        },
                        2020: {
                            year: 2020,
                            title: '2020年流体力学考试真题',
                            difficulty: '中等',
                            questionCount: 35,
                            timeLimit: 180,
                            passingRate: 80,
                            questions: [
                                {
                                    id: '2020-01',
                                    title: '【2020真题】水从大容器通过小孔流出，已知液面高度h=2m，求出流速度',
                                    type: '计算题',
                                    points: 10,
                                    difficulty: 'medium',
                                    category: '孔口出流',
                                    solution: 'v = √(2gh) = √(2×9.8×2) = 6.26 m/s'
                                }
                            ]
                        }
                    }
                }
            },
            methods: {
                filterExams() {
                    let filtered = [...this.examData];
                    
                    // 年份筛选
                    if (this.filters.yearRange !== 'all') {
                        if (this.filters.yearRange === 'recent') {
                            filtered = filtered.filter(item => item.year >= 2021);
                        } else if (this.filters.yearRange === '2020s') {
                            filtered = filtered.filter(item => item.year >= 2020);
                        } else if (this.filters.yearRange === '2010s') {
                            filtered = filtered.filter(item => item.year >= 2010 && item.year < 2020);
                        } else if (this.filters.yearRange === '2000s') {
                            filtered = filtered.filter(item => item.year >= 2000 && item.year < 2010);
                        }
                    }
                    
                    // 难度筛选
                    if (this.filters.difficulty !== 'all') {
                        filtered = filtered.map(yearData => ({
                            ...yearData,
                            exams: yearData.exams.filter(exam => exam.difficulty === this.filters.difficulty)
                        })).filter(yearData => yearData.exams.length > 0);
                    }
                    
                    // 关键词搜索
                    if (this.searchKeyword.trim()) {
                        const keyword = this.searchKeyword.trim().toLowerCase();
                        filtered = filtered.map(yearData => ({
                            ...yearData,
                            exams: yearData.exams.filter(exam => 
                                exam.title.toLowerCase().includes(keyword) ||
                                exam.date.includes(keyword)
                            )
                        })).filter(yearData => yearData.exams.length > 0);
                    }
                    
                    this.filteredExams = filtered;
                },
                
                getDifficultyText(difficulty) {
                    const texts = {
                        'easy': '简单',
                        'medium': '中等',
                        'hard': '困难'
                    };
                    return texts[difficulty] || '未知';
                },
                
                startPractice(exam) {
                    this.showNotification(`开始练习：${exam.title}`, 'success');
                    // 这里可以跳转到练习页面，传递exam.id参数
                    const practiceUrl = `practice-dynamic.html?type=real-exam&examId=${exam.id}`;
                    this.navigateToModule(practiceUrl);
                },
                
                viewAnalysis(exam) {
                    this.showNotification(`查看考点分析：${exam.title}`, 'info');
                    // 这里可以显示考点分析弹窗或跳转到分析页面
                },
                
                downloadExam(exam) {
                    this.showNotification(`下载功能开发中：${exam.title}`, 'info');
                    // 这里可以实现PDF下载功能
                },
                
                loadProgress() {
                    const savedProgress = this.loadFromStorage('realExamProgress', {});
                    
                    // 更新每个考试的进度
                    this.examData.forEach(yearData => {
                        yearData.exams.forEach(exam => {
                            if (savedProgress[exam.id]) {
                                exam.progress = savedProgress[exam.id].progress || 0;
                            }
                        });
                    });
                }
            },
            
            mounted() {
                console.log('🏆 历年真题模块启动！');
                this.setLoading(true);
                
                setTimeout(() => {
                    this.loadProgress();
                    this.filterExams(); // 初始化显示所有数据
                    this.setLoading(false);
                    this.showNotification('历年真题加载完成！共 329 道权威真题', 'success');
                }, 1500);
            }
        }).mount('#realExamsApp');
    </script>
</body>
</html> 