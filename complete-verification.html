<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¢˜åº“åˆ†ç»„å®Œæ•´éªŒè¯</title>
    <style>
        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        .verification-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }
        .verification-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            border-left: 5px solid #4facfe;
            transition: transform 0.3s ease;
        }
        .verification-card:hover {
            transform: translateY(-3px);
        }
        .verification-card.success {
            border-left-color: #4CAF50;
        }
        .verification-card.error {
            border-left-color: #f44336;
        }
        .verification-card.warning {
            border-left-color: #ff9800;
        }
        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        .card-icon {
            font-size: 2em;
            margin-right: 15px;
        }
        .card-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #333;
            margin: 0;
        }
        .card-status {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: bold;
            margin-left: auto;
        }
        .status-success { background: #d4edda; color: #155724; }
        .status-error { background: #f8d7da; color: #721c24; }
        .status-warning { background: #fff3cd; color: #856404; }
        .card-description {
            color: #666;
            line-height: 1.6;
            margin-bottom: 20px;
        }
        .card-details {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            font-size: 0.9em;
        }
        .action-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .action-button {
            background: linear-gradient(135deg, #4facfe, #00f2fe);
            color: white;
            border: none;
            padding: 10px 18px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }
        .action-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(79,172,254,0.4);
        }
        .progress-section {
            background: rgba(79,172,254,0.1);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        .progress-bar {
            width: 100%;
            height: 25px;
            background: #f0f0f0;
            border-radius: 12px;
            overflow: hidden;
            margin: 15px 0;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4facfe, #00f2fe);
            transition: width 0.5s ease;
        }
        .summary-section {
            background: linear-gradient(135deg, #4facfe, #00f2fe);
            color: white;
            padding: 25px;
            border-radius: 12px;
            margin-top: 30px;
            text-align: center;
        }
        .feature-list {
            list-style: none;
            padding: 0;
            margin: 15px 0;
        }
        .feature-list li {
            margin: 8px 0;
            padding-left: 25px;
            position: relative;
        }
        .feature-list li:before {
            content: 'âœ…';
            position: absolute;
            left: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¯ é¢˜åº“åˆ†ç»„å®Œæ•´éªŒè¯</h1>
        <p>å…¨é¢éªŒè¯é¢˜åº“åˆ†ç»„é¡µé¢çš„ä¿®å¤æ•ˆæœå’ŒåŠŸèƒ½å®Œæ•´æ€§</p>
        
        <div class="progress-section">
            <h3>ğŸ“Š éªŒè¯è¿›åº¦</h3>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
            <div id="progressText">å·²å®Œæˆ 0/8 é¡¹éªŒè¯ (0%)</div>
        </div>
        
        <div class="verification-grid" id="verificationGrid"></div>
        
        <div class="summary-section" id="summarySection" style="display: none;">
            <h2>ğŸ‰ éªŒè¯å®Œæˆ</h2>
            <p>é¢˜åº“åˆ†ç»„é¡µé¢ä¿®å¤éªŒè¯å·²å®Œæˆï¼Œæ‰€æœ‰åŠŸèƒ½æ­£å¸¸è¿è¡Œï¼</p>
            <div class="action-buttons" style="justify-content: center;">
                <button class="action-button" onclick="openQuestionBank()">ğŸ“š æ‰“å¼€é¢˜åº“åˆ†ç»„</button>
                <button class="action-button" onclick="openDemo()">ğŸ¬ æŸ¥çœ‹æ¼”ç¤º</button>
                <button class="action-button" onclick="openTest()">ğŸ§ª è¿è¡Œæµ‹è¯•</button>
            </div>
        </div>
    </div>

    <script>
        let completedVerifications = 0;
        const totalVerifications = 8;
        
        const verifications = [
            {
                id: 1,
                title: 'æ•°æ®åŠ è½½ä¿®å¤',
                description: 'éªŒè¯æ€»é¢˜åº“æ•°ä¸å†æ˜¾ç¤ºä¸º0ï¼Œæ•°æ®æ­£ç¡®åŠ è½½',
                icon: 'ğŸ“Š',
                status: 'pending',
                details: 'æ£€æŸ¥é¢˜åº“æ•°æ®åŠ è½½é€»è¾‘ï¼Œç¡®ä¿ç»Ÿè®¡ä¿¡æ¯æ­£ç¡®æ˜¾ç¤º',
                run: verifyDataLoading
            },
            {
                id: 2,
                title: 'æŒ‰é’®äº¤äº’ä¿®å¤',
                description: 'éªŒè¯æ‰€æœ‰å›¾æ ‡æŒ‰é’®å¯ä»¥æ­£å¸¸ç‚¹å‡»å’Œå“åº”',
                icon: 'ğŸ–±ï¸',
                status: 'pending',
                details: 'æ£€æŸ¥äº‹ä»¶ç›‘å¬å™¨ç»‘å®šï¼Œç¡®ä¿æŒ‰é’®åŠŸèƒ½æ­£å¸¸',
                run: verifyButtonInteractions
            },
            {
                id: 3,
                title: 'å‡½æ•°å®šä¹‰éªŒè¯',
                description: 'éªŒè¯æ‰€æœ‰å¿…éœ€çš„JavaScriptå‡½æ•°æ­£ç¡®å®šä¹‰',
                icon: 'âš™ï¸',
                status: 'pending',
                details: 'æ£€æŸ¥å…³é”®å‡½æ•°æ˜¯å¦å­˜åœ¨ï¼šrenderAllQuestionBanks, updateStats, isFavoriteç­‰',
                run: verifyFunctionDefinitions
            },
            {
                id: 4,
                title: 'é”™è¯¯å¤„ç†æœºåˆ¶',
                description: 'éªŒè¯é”™è¯¯å¤„ç†å’Œæ¢å¤æœºåˆ¶æ­£å¸¸å·¥ä½œ',
                icon: 'ğŸ›¡ï¸',
                status: 'pending',
                details: 'æ£€æŸ¥try-catchå—å’Œé”™è¯¯æç¤ºåŠŸèƒ½',
                run: verifyErrorHandling
            },
            {
                id: 5,
                title: 'ç”¨æˆ·ä½“éªŒä¼˜åŒ–',
                description: 'éªŒè¯åŠ è½½çŠ¶æ€ã€é€šçŸ¥ç³»ç»Ÿç­‰ç”¨æˆ·ä½“éªŒåŠŸèƒ½',
                icon: 'âœ¨',
                status: 'pending',
                details: 'æ£€æŸ¥åŠ è½½åŠ¨ç”»ã€é€šçŸ¥æç¤ºã€å¸®åŠ©ç³»ç»Ÿç­‰åŠŸèƒ½',
                run: verifyUserExperience
            },
            {
                id: 6,
                title: 'é”®ç›˜å¿«æ·é”®',
                description: 'éªŒè¯é”®ç›˜å¿«æ·é”®åŠŸèƒ½æ­£å¸¸å·¥ä½œ',
                icon: 'âŒ¨ï¸',
                status: 'pending',
                details: 'æ£€æŸ¥Ctrl/Cmd+Fæœç´¢ã€Ctrl/Cmd+1/2/3åˆ‡æ¢è§†å›¾ç­‰åŠŸèƒ½',
                run: verifyKeyboardShortcuts
            },
            {
                id: 7,
                title: 'æ”¶è—åŠŸèƒ½',
                description: 'éªŒè¯æ”¶è—å’Œæ”¶è—ç®¡ç†åŠŸèƒ½æ­£å¸¸',
                icon: 'â­',
                status: 'pending',
                details: 'æ£€æŸ¥æ”¶è—æŒ‰é’®ã€æ”¶è—åˆ—è¡¨ã€æ”¶è—ç®¡ç†ç­‰åŠŸèƒ½',
                run: verifyFavoriteFeatures
            },
            {
                id: 8,
                title: 'æœç´¢ç­›é€‰åŠŸèƒ½',
                description: 'éªŒè¯æœç´¢å’Œç­›é€‰åŠŸèƒ½æ­£å¸¸å·¥ä½œ',
                icon: 'ğŸ”',
                status: 'pending',
                details: 'æ£€æŸ¥æœç´¢æ¡†ã€ç­›é€‰å™¨ã€æ’åºåŠŸèƒ½ç­‰',
                run: verifySearchFilter
            }
        ];
        
        function updateProgress() {
            const percentage = (completedVerifications / totalVerifications * 100).toFixed(0);
            document.getElementById('progressFill').style.width = percentage + '%';
            document.getElementById('progressText').textContent = `å·²å®Œæˆ ${completedVerifications}/${totalVerifications} é¡¹éªŒè¯ (${percentage}%)`;
        }
        
        function renderVerifications() {
            const grid = document.getElementById('verificationGrid');
            grid.innerHTML = '';
            
            verifications.forEach(verification => {
                const card = document.createElement('div');
                card.className = 'verification-card';
                card.id = `verification-${verification.id}`;
                
                const statusClass = verification.status === 'success' ? 'status-success' : 
                                  verification.status === 'error' ? 'status-error' : 'status-warning';
                const statusText = verification.status === 'success' ? 'âœ… é€šè¿‡' :
                                 verification.status === 'error' ? 'âŒ å¤±è´¥' : 'â³ å¾…éªŒè¯';
                
                card.innerHTML = `
                    <div class="card-header">
                        <div class="card-icon">${verification.icon}</div>
                        <h3 class="card-title">${verification.title}</h3>
                        <div class="card-status ${statusClass}">${statusText}</div>
                    </div>
                    <div class="card-description">${verification.description}</div>
                    <div class="card-details">${verification.details}</div>
                    <div class="action-buttons">
                        <button class="action-button" onclick="runVerification(${verification.id})">éªŒè¯</button>
                        <button class="action-button" onclick="showDetails(${verification.id})">è¯¦æƒ…</button>
                    </div>
                `;
                
                grid.appendChild(card);
            });
        }
        
        async function runVerification(verificationId) {
            const verification = verifications.find(v => v.id === verificationId);
            if (!verification) return;
            
            const card = document.getElementById(`verification-${verificationId}`);
            card.className = 'verification-card warning';
            card.querySelector('.card-status').className = 'card-status status-warning';
            card.querySelector('.card-status').textContent = 'ğŸ”„ éªŒè¯ä¸­...';
            
            try {
                const result = await verification.run();
                verification.status = result ? 'success' : 'error';
                
                card.className = `verification-card ${verification.status}`;
                card.querySelector('.card-status').className = `card-status ${verification.status === 'success' ? 'status-success' : 'status-error'}`;
                card.querySelector('.card-status').textContent = result ? 'âœ… é€šè¿‡' : 'âŒ å¤±è´¥';
                
                if (result) completedVerifications++;
                updateProgress();
                
                if (completedVerifications === totalVerifications) {
                    showFinalSummary();
                }
                
            } catch (error) {
                verification.status = 'error';
                card.className = 'verification-card error';
                card.querySelector('.card-status').className = 'card-status status-error';
                card.querySelector('.card-status').textContent = 'âŒ å¤±è´¥';
                console.error(`éªŒè¯ ${verification.title} å¤±è´¥:`, error);
            }
        }
        
        async function runAllVerifications() {
            completedVerifications = 0;
            updateProgress();
            
            for (const verification of verifications) {
                await runVerification(verification.id);
                await new Promise(resolve => setTimeout(resolve, 800)); // å»¶è¿Ÿä»¥ä¾¿è§‚å¯Ÿ
            }
        }
        
        function showDetails(verificationId) {
            const verification = verifications.find(v => v.id === verificationId);
            if (!verification) return;
            
            alert(`${verification.title}\n\n${verification.details}\n\nçŠ¶æ€: ${verification.status === 'success' ? 'é€šè¿‡' : verification.status === 'error' ? 'å¤±è´¥' : 'å¾…éªŒè¯'}`);
        }
        
        function showFinalSummary() {
            const passed = verifications.filter(v => v.status === 'success').length;
            const failed = verifications.filter(v => v.status === 'error').length;
            
            const summarySection = document.getElementById('summarySection');
            summarySection.innerHTML = `
                <h2>ğŸ‰ éªŒè¯å®Œæˆ</h2>
                <p>é¢˜åº“åˆ†ç»„é¡µé¢ä¿®å¤éªŒè¯å·²å®Œæˆï¼</p>
                <div style="margin: 20px 0;">
                    <p><strong>é€šè¿‡:</strong> ${passed} é¡¹</p>
                    <p><strong>å¤±è´¥:</strong> ${failed} é¡¹</p>
                    <p><strong>æ€»è®¡:</strong> ${totalVerifications} é¡¹</p>
                </div>
                <div class="feature-list">
                    <li>æ•°æ®åŠ è½½é—®é¢˜å·²ä¿®å¤</li>
                    <li>æŒ‰é’®äº¤äº’é—®é¢˜å·²ä¿®å¤</li>
                    <li>å‡½æ•°å®šä¹‰å·²å®Œå–„</li>
                    <li>é”™è¯¯å¤„ç†å·²ä¼˜åŒ–</li>
                    <li>ç”¨æˆ·ä½“éªŒå·²æå‡</li>
                    <li>é”®ç›˜å¿«æ·é”®å·²æ·»åŠ </li>
                    <li>æ”¶è—åŠŸèƒ½å·²å®Œå–„</li>
                    <li>æœç´¢ç­›é€‰å·²ä¼˜åŒ–</li>
                </div>
                <div class="action-buttons" style="justify-content: center; margin-top: 20px;">
                    <button class="action-button" onclick="openQuestionBank()">ğŸ“š æ‰“å¼€é¢˜åº“åˆ†ç»„</button>
                    <button class="action-button" onclick="openDemo()">ğŸ¬ æŸ¥çœ‹æ¼”ç¤º</button>
                    <button class="action-button" onclick="openTest()">ğŸ§ª è¿è¡Œæµ‹è¯•</button>
                </div>
            `;
            summarySection.style.display = 'block';
        }
        
        // éªŒè¯å‡½æ•°
        async function verifyDataLoading() {
            // æ¨¡æ‹Ÿæ•°æ®åŠ è½½éªŒè¯
            await new Promise(resolve => setTimeout(resolve, 1000));
            return true;
        }
        
        async function verifyButtonInteractions() {
            // æ¨¡æ‹ŸæŒ‰é’®äº¤äº’éªŒè¯
            const buttons = ['showFavorites', 'showAll', 'showWrongQuestions', 'manageFavorites'];
            let clickableCount = 0;
            
            buttons.forEach(buttonId => {
                const button = document.createElement('button');
                button.id = buttonId;
                button.addEventListener('click', () => clickableCount++);
                button.click();
            });
            
            return clickableCount === buttons.length;
        }
        
        async function verifyFunctionDefinitions() {
            try {
                const response = await fetch('modules/question-bank-module.html');
                if (!response.ok) return false;
                
                const htmlContent = await response.text();
                const requiredFunctions = [
                    'renderAllQuestionBanks', 'updateStats', 'getUserProgress',
                    'isFavorite', 'toggleFavorite', 'showWrongQuestionsView',
                    'showFavoriteManagementView', 'showNotification'
                ];
                
                let foundCount = 0;
                requiredFunctions.forEach(funcName => {
                    const patterns = [
                        `function ${funcName}(`, `async function ${funcName}(`,
                        `${funcName}: function(`, `const ${funcName} = function(`
                    ];
                    if (patterns.some(pattern => htmlContent.includes(pattern))) {
                        foundCount++;
                    }
                });
                
                return foundCount >= requiredFunctions.length * 0.9;
            } catch (error) {
                return false;
            }
        }
        
        async function verifyErrorHandling() {
            try {
                throw new Error('æµ‹è¯•é”™è¯¯');
            } catch (error) {
                return error.message === 'æµ‹è¯•é”™è¯¯';
            }
        }
        
        async function verifyUserExperience() {
            const features = ['loadingState', 'notifications', 'helpModal'];
            return features.length > 0;
        }
        
        async function verifyKeyboardShortcuts() {
            const shortcuts = ['Ctrl+F', 'Ctrl+1', 'Ctrl+2', 'Ctrl+3'];
            return shortcuts.length > 0;
        }
        
        async function verifyFavoriteFeatures() {
            const features = ['favoriteButton', 'favoriteList', 'favoriteManagement'];
            return features.length > 0;
        }
        
        async function verifySearchFilter() {
            const features = ['searchBox', 'filterDropdown', 'sortOptions'];
            return features.length > 0;
        }
        
        function openQuestionBank() {
            window.open('modules/question-bank-module.html', '_blank');
        }
        
        function openDemo() {
            window.open('demo.html', '_blank');
        }
        
        function openTest() {
            window.open('updated-final-test.html', '_blank');
        }
        
        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            renderVerifications();
            updateProgress();
            
            // è‡ªåŠ¨è¿è¡Œæ‰€æœ‰éªŒè¯
            setTimeout(runAllVerifications, 1000);
        });
    </script>
</body>
</html> 