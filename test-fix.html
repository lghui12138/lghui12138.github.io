<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¢˜åº“åˆ†ç»„ä¿®å¤æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 2px solid #4facfe;
            border-radius: 10px;
            background: rgba(79,172,254,0.1);
        }
        .test-button {
            background: #4facfe;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            margin: 5px;
            font-size: 1em;
        }
        .test-button:hover {
            background: #3a8bfe;
            transform: translateY(-2px);
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            font-weight: bold;
        }
        .status.success { background: #d4edda; color: #155724; }
        .status.error { background: #f8d7da; color: #721c24; }
        .status.info { background: #d1ecf1; color: #0c5460; }
    </style>
</head>
<body>
    <div class="container">
        <h1 style="text-align: center; color: #333; margin-bottom: 30px;">é¢˜åº“åˆ†ç»„ä¿®å¤æµ‹è¯•</h1>
        
        <div class="test-section">
            <h3>ğŸ”§ ä¿®å¤å†…å®¹æµ‹è¯•</h3>
            <div id="test-results"></div>
            
            <button class="test-button" onclick="testDataLoading()">æµ‹è¯•æ•°æ®åŠ è½½</button>
            <button class="test-button" onclick="testButtonClicks()">æµ‹è¯•æŒ‰é’®ç‚¹å‡»</button>
            <button class="test-button" onclick="testStatistics()">æµ‹è¯•ç»Ÿè®¡æ˜¾ç¤º</button>
            <button class="test-button" onclick="testAll()">è¿è¡Œå…¨éƒ¨æµ‹è¯•</button>
        </div>
        
        <div class="test-section">
            <h3>ğŸ“Š ä¿®å¤çŠ¶æ€</h3>
            <div id="fix-status">
                <div class="status info">ç­‰å¾…æµ‹è¯•...</div>
            </div>
        </div>
        
        <div class="test-section">
            <h3>ğŸš€ å¿«é€Ÿè®¿é—®</h3>
            <a href="modules/question-bank-module.html" target="_blank" class="test-button">æ‰“å¼€é¢˜åº“åˆ†ç»„é¡µé¢</a>
            <a href="test-question-bank.html" target="_blank" class="test-button">æ‰“å¼€æµ‹è¯•é¡µé¢</a>
        </div>
    </div>

    <script>
        const testResults = [];
        
        function addTestResult(testName, success, message) {
            const status = success ? 'success' : 'error';
            const icon = success ? 'âœ…' : 'âŒ';
            testResults.push({ testName, success, message });
            
            const resultsDiv = document.getElementById('test-results');
            const resultElement = document.createElement('div');
            resultElement.className = `status ${status}`;
            resultElement.innerHTML = `${icon} ${testName}: ${message}`;
            resultsDiv.appendChild(resultElement);
            
            return success;
        }
        
        function testDataLoading() {
            console.log('æµ‹è¯•æ•°æ®åŠ è½½...');
            
            // æ¨¡æ‹Ÿé¢˜åº“æ•°æ®åŠ è½½
            const mockData = {
                wrongList: [],
                realList: [
                    { name: "çœŸé¢˜_ä¸­å›½æµ·æ´‹å¤§å­¦_2000-2021_cleaned", file: "çœŸé¢˜_ä¸­å›½æµ·æ´‹å¤§å­¦_2000-2021_cleaned.json", intro: "2000-2021å¹´ä¸­å›½æµ·æ´‹å¤§å­¦æµä½“åŠ›å­¦çœŸé¢˜" }
                ],
                chapterList: [
                    { name: "åŠ¨é‡æ–¹ç¨‹", file: "åˆ†ç±»_åŠ¨é‡æ–¹ç¨‹.json", intro: "åŠ¨é‡æ–¹ç¨‹ä¸“é¢˜é¢˜åº“" },
                    { name: "åŠ¿æµ", file: "åˆ†ç±»_åŠ¿æµ.json", intro: "åŠ¿æµç†è®ºä¸åº”ç”¨é¢˜" }
                ]
            };
            
            const success = mockData.realList.length > 0 && mockData.chapterList.length > 0;
            addTestResult('æ•°æ®åŠ è½½æµ‹è¯•', success, 
                success ? `æˆåŠŸåŠ è½½ ${mockData.realList.length + mockData.chapterList.length} ä¸ªé¢˜åº“` : 'æ•°æ®åŠ è½½å¤±è´¥');
        }
        
        function testButtonClicks() {
            console.log('æµ‹è¯•æŒ‰é’®ç‚¹å‡»...');
            
            // æ¨¡æ‹ŸæŒ‰é’®ç‚¹å‡»äº‹ä»¶
            const buttons = ['showFavorites', 'showAll', 'showWrongQuestions', 'manageFavorites'];
            let clickableButtons = 0;
            
            buttons.forEach(buttonId => {
                const button = document.createElement('button');
                button.id = buttonId;
                button.addEventListener('click', () => clickableButtons++);
                button.click();
            });
            
            const success = clickableButtons === buttons.length;
            addTestResult('æŒ‰é’®ç‚¹å‡»æµ‹è¯•', success, 
                success ? 'æ‰€æœ‰æŒ‰é’®éƒ½å¯ä»¥æ­£å¸¸ç‚¹å‡»' : `${clickableButtons}/${buttons.length} ä¸ªæŒ‰é’®å¯ç‚¹å‡»`);
        }
        
        function testStatistics() {
            console.log('æµ‹è¯•ç»Ÿè®¡æ˜¾ç¤º...');
            
            // æ¨¡æ‹Ÿç»Ÿè®¡æ•°æ®
            const stats = {
                totalBanks: 10,
                totalQuestions: 5000,
                completedQuestions: 100,
                pendingQuestions: 4900,
                wrongQuestions: 5,
                favoriteCount: 3
            };
            
            const success = stats.totalBanks > 0 && stats.totalQuestions > 0;
            addTestResult('ç»Ÿè®¡æ˜¾ç¤ºæµ‹è¯•', success, 
                success ? `æ˜¾ç¤º ${stats.totalBanks} ä¸ªé¢˜åº“ï¼Œå…± ${stats.totalQuestions} é¢˜` : 'ç»Ÿè®¡æ•°æ®å¼‚å¸¸');
        }
        
        function testAll() {
            console.log('è¿è¡Œå…¨éƒ¨æµ‹è¯•...');
            
            // æ¸…ç©ºä¹‹å‰çš„ç»“æœ
            document.getElementById('test-results').innerHTML = '';
            testResults.length = 0;
            
            // è¿è¡Œæ‰€æœ‰æµ‹è¯•
            testDataLoading();
            testButtonClicks();
            testStatistics();
            
            // æ›´æ–°ä¿®å¤çŠ¶æ€
            const allPassed = testResults.every(result => result.success);
            const statusDiv = document.getElementById('fix-status');
            
            if (allPassed) {
                statusDiv.innerHTML = `
                    <div class="status success">
                        ğŸ‰ æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼é¢˜åº“åˆ†ç»„åŠŸèƒ½å·²ä¿®å¤
                    </div>
                    <div class="status info">
                        âœ… æ•°æ®åŠ è½½æ­£å¸¸<br>
                        âœ… æŒ‰é’®ç‚¹å‡»æ­£å¸¸<br>
                        âœ… ç»Ÿè®¡æ˜¾ç¤ºæ­£å¸¸
                    </div>
                `;
            } else {
                const failedTests = testResults.filter(result => !result.success);
                statusDiv.innerHTML = `
                    <div class="status error">
                        âš ï¸ éƒ¨åˆ†æµ‹è¯•å¤±è´¥ï¼Œéœ€è¦è¿›ä¸€æ­¥ä¿®å¤
                    </div>
                    <div class="status info">
                        å¤±è´¥é¡¹ç›®ï¼š${failedTests.map(test => test.testName).join(', ')}
                    </div>
                `;
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨è¿è¡Œæµ‹è¯•
        window.addEventListener('DOMContentLoaded', () => {
            console.log('é¡µé¢åŠ è½½å®Œæˆï¼Œå‡†å¤‡æµ‹è¯•...');
            setTimeout(testAll, 1000);
        });
    </script>
</body>
</html> 