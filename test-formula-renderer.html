<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•°å­¦å…¬å¼æ¸²æŸ“æµ‹è¯• - æµä½“åŠ›å­¦å­¦ä¹ å¹³å°</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .header p {
            color: #7f8c8d;
            font-size: 1.2em;
        }

        .section {
            margin: 40px 0;
        }

        .section-title {
            color: #2c3e50;
            font-size: 1.8em;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .section-title i {
            color: #3498db;
        }

        .demo-controls {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
        }

        .control-group {
            margin: 15px 0;
        }

        .control-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #2c3e50;
        }

        .control-group select,
        .control-group input {
            width: 100%;
            padding: 10px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1em;
        }

        .control-group button {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            margin: 5px;
            transition: all 0.3s ease;
        }

        .control-group button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }

        .formula-demo {
            margin: 30px 0;
            padding: 20px;
            background: #fff;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .demo-title {
            color: #27ae60;
            font-weight: bold;
            font-size: 1.3em;
            margin-bottom: 15px;
        }

        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .info-title {
            color: #1976d2;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .info-content {
            color: #1976d2;
            line-height: 1.6;
        }

        .feature-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .feature-item {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 15px;
            padding: 20px;
            border-left: 5px solid #3498db;
        }

        .feature-title {
            color: #2c3e50;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .feature-description {
            color: #666;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-square-root-alt"></i> æ•°å­¦å…¬å¼æ¸²æŸ“æµ‹è¯•</h1>
            <p>æµ‹è¯•ç¾è§‚çš„æ•°å­¦å…¬å¼æ˜¾ç¤ºæ•ˆæœ</p>
        </div>

        <div class="section">
            <h2 class="section-title">
                <i class="fas fa-cogs"></i> æ§åˆ¶é¢æ¿
            </h2>
            
            <div class="demo-controls">
                <div class="control-group">
                    <label>é€‰æ‹©å…¬å¼ç±»å‹ï¼š</label>
                    <select id="formulaType">
                        <option value="static">æµä½“é™åŠ›å­¦</option>
                        <option value="dynamics">æµä½“åŠ¨åŠ›å­¦</option>
                        <option value="viscous">ç²˜æ€§æµåŠ¨</option>
                        <option value="turbulent">æ¹æµ</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <label>é€‰æ‹©å…·ä½“å…¬å¼ï¼š</label>
                    <select id="formulaSelect">
                        <option value="basic">åŸºæœ¬æ–¹ç¨‹</option>
                        <option value="bernoulli">ä¼¯åŠªåˆ©æ–¹ç¨‹</option>
                        <option value="navier-stokes">N-Sæ–¹ç¨‹</option>
                        <option value="reynolds">é›·è¯ºæ•°</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <button onclick="renderFormula()">æ¸²æŸ“å…¬å¼</button>
                    <button onclick="renderAllFormulas()">æ¸²æŸ“æ‰€æœ‰å…¬å¼</button>
                    <button onclick="clearFormulas()">æ¸…é™¤å…¬å¼</button>
                </div>
            </div>
        </div>

        <div class="section">
            <h2 class="section-title">
                <i class="fas fa-info-circle"></i> åŠŸèƒ½ç‰¹æ€§
            </h2>
            
            <div class="feature-list">
                <div class="feature-item">
                    <div class="feature-title">ğŸ¨ ç¾è§‚è®¾è®¡</div>
                    <div class="feature-description">
                        é‡‡ç”¨ç°ä»£åŒ–çš„å¡ç‰‡è®¾è®¡ï¼Œæ¸å˜èƒŒæ™¯å’Œé˜´å½±æ•ˆæœï¼Œæä¾›ä¼˜ç§€çš„è§†è§‰ä½“éªŒ
                    </div>
                </div>
                
                <div class="feature-item">
                    <div class="feature-title">ğŸ“ æ•°å­¦å…¬å¼</div>
                    <div class="feature-description">
                        é›†æˆMathJaxï¼Œæ”¯æŒLaTeXæ•°å­¦å…¬å¼æ¸²æŸ“ï¼Œæ˜¾ç¤ºæ•ˆæœä¸“ä¸šç¾è§‚
                    </div>
                </div>
                
                <div class="feature-item">
                    <div class="feature-title">ğŸ“± å“åº”å¼</div>
                    <div class="feature-description">
                        å®Œå…¨å“åº”å¼è®¾è®¡ï¼Œåœ¨æ‰‹æœºã€å¹³æ¿ã€ç”µè„‘ä¸Šéƒ½æœ‰è‰¯å¥½çš„æ˜¾ç¤ºæ•ˆæœ
                    </div>
                </div>
                
                <div class="feature-item">
                    <div class="feature-title">âš¡ é«˜æ€§èƒ½</div>
                    <div class="feature-description">
                        å¼‚æ­¥åŠ è½½MathJaxï¼Œä¸é˜»å¡é¡µé¢æ¸²æŸ“ï¼Œæä¾›æµç•…çš„ç”¨æˆ·ä½“éªŒ
                    </div>
                </div>
                
                <div class="feature-item">
                    <div class="feature-title">ğŸ¯ åˆ†ç±»æ˜¾ç¤º</div>
                    <div class="feature-description">
                        ä¸åŒç±»åˆ«çš„å…¬å¼ä½¿ç”¨ä¸åŒçš„é¢œè‰²ä¸»é¢˜ï¼Œä¾¿äºåŒºåˆ†å’Œè®°å¿†
                    </div>
                </div>
                
                <div class="feature-item">
                    <div class="feature-title">ğŸ“– è¯¦ç»†è¯´æ˜</div>
                    <div class="feature-description">
                        æ¯ä¸ªå…¬å¼éƒ½åŒ…å«æ¨å¯¼è¿‡ç¨‹å’Œç‰©ç†æ„ä¹‰è¯´æ˜ï¼Œå¸®åŠ©æ·±å…¥ç†è§£
                    </div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2 class="section-title">
                <i class="fas fa-flask"></i> å…¬å¼æ¼”ç¤º
            </h2>
            
            <div class="info-box">
                <div class="info-title">ä½¿ç”¨è¯´æ˜</div>
                <div class="info-content">
                    ä½¿ç”¨ä¸Šæ–¹çš„æ§åˆ¶é¢æ¿é€‰æ‹©å…¬å¼ç±»å‹å’Œå…·ä½“å…¬å¼ï¼Œç„¶åç‚¹å‡»"æ¸²æŸ“å…¬å¼"æŒ‰é’®æŸ¥çœ‹æ•ˆæœã€‚
                    æ‰€æœ‰å…¬å¼éƒ½ä½¿ç”¨MathJaxè¿›è¡Œæ¸²æŸ“ï¼Œæ”¯æŒLaTeXè¯­æ³•ã€‚
                </div>
            </div>
            
            <div id="formulaDemo" class="formula-demo">
                <div class="demo-title">å…¬å¼å°†åœ¨è¿™é‡Œæ˜¾ç¤º</div>
                <p>è¯·ä½¿ç”¨æ§åˆ¶é¢æ¿é€‰æ‹©å¹¶æ¸²æŸ“å…¬å¼</p>
            </div>
        </div>

        <div class="section">
            <h2 class="section-title">
                <i class="fas fa-code"></i> ä»£ç ç¤ºä¾‹
            </h2>
            
            <div class="info-box">
                <div class="info-title">ä½¿ç”¨æ–¹æ³•</div>
                <div class="info-content">
                    <pre><code>// åˆå§‹åŒ–å…¬å¼æ¸²æŸ“å™¨
const renderer = new FormulaRenderer();
renderer.init();

// æ¸²æŸ“å•ä¸ªå…¬å¼
const formulaData = {
    title: "æµä½“é™åŠ›å­¦åŸºæœ¬æ–¹ç¨‹",
    formula: "$$\\nabla p = \\rho \\vec{g}$$",
    explanation: "å‹å¼ºæ¢¯åº¦ç­‰äºæµä½“å¯†åº¦ä¸é‡åŠ›åŠ é€Ÿåº¦çš„ä¹˜ç§¯",
    derivation: [
        "è€ƒè™‘æµä½“å¾®å…ƒåœ¨é‡åŠ›åœºä¸­çš„å¹³è¡¡",
        "å¾®å…ƒå—åŠ›ï¼šé‡åŠ› $F_g = \\rho \\vec{g} dV$",
        "è¡¨é¢åŠ›ï¼š$F_s = -\\nabla p dV$",
        "å¹³è¡¡æ¡ä»¶ï¼š$F_g + F_s = 0$",
        "$\\therefore \\nabla p = \\rho \\vec{g}$"
    ],
    physics: "å‹å¼ºæ¢¯åº¦ç­‰äºæµä½“å¯†åº¦ä¸é‡åŠ›åŠ é€Ÿåº¦çš„ä¹˜ç§¯ï¼Œè¿™æ˜¯æµä½“é™åŠ›å­¦çš„åŸºæœ¬å¾®åˆ†æ–¹ç¨‹ã€‚",
    category: "static"
};

renderer.renderSingleFormula(formulaData, "formulaDemo");</code></pre>
                </div>
            </div>
        </div>
    </div>

    <!-- åŠ è½½å…¬å¼æ¸²æŸ“å™¨ -->
    <script src="js/components/formulaRenderer.js"></script>
    <script>
        // å…¬å¼æ•°æ®
        const formulaDatabase = {
            static: {
                basic: {
                    title: "æµä½“é™åŠ›å­¦åŸºæœ¬æ–¹ç¨‹",
                    formula: "$$\\nabla p = \\rho \\vec{g}$$",
                    explanation: "å‹å¼ºæ¢¯åº¦ç­‰äºæµä½“å¯†åº¦ä¸é‡åŠ›åŠ é€Ÿåº¦çš„ä¹˜ç§¯",
                    derivation: [
                        "è€ƒè™‘æµä½“å¾®å…ƒåœ¨é‡åŠ›åœºä¸­çš„å¹³è¡¡",
                        "å¾®å…ƒå—åŠ›ï¼šé‡åŠ› $F_g = \\rho \\vec{g} dV$",
                        "è¡¨é¢åŠ›ï¼š$F_s = -\\nabla p dV$",
                        "å¹³è¡¡æ¡ä»¶ï¼š$F_g + F_s = 0$",
                        "å³ï¼š$\\rho \\vec{g} - \\nabla p = 0$",
                        "$\\therefore \\nabla p = \\rho \\vec{g}$"
                    ],
                    physics: "å‹å¼ºæ¢¯åº¦ç­‰äºæµä½“å¯†åº¦ä¸é‡åŠ›åŠ é€Ÿåº¦çš„ä¹˜ç§¯ï¼Œè¿™æ˜¯æµä½“é™åŠ›å­¦çš„åŸºæœ¬å¾®åˆ†æ–¹ç¨‹ã€‚",
                    category: "static"
                },
                pressure: {
                    title: "é™æ°´å‹å¼ºåˆ†å¸ƒ",
                    formula: "$$p = p_0 + \\rho g h$$",
                    explanation: "å¯¹äºä¸å¯å‹ç¼©æµä½“ï¼Œå‹å¼ºéšæ·±åº¦çº¿æ€§å¢åŠ ",
                    derivation: [
                        "å¯¹å¾®åˆ†æ–¹ç¨‹ $\\frac{dp}{dz} = -\\rho g$ ç§¯åˆ†",
                        "$\\int dp = -\\rho g \\int dz$",
                        "$p - p_0 = -\\rho g(z - z_0)$",
                        "ä»¤ $h = z_0 - z$ (æ·±åº¦)",
                        "$\\therefore p = p_0 + \\rho g h$"
                    ],
                    physics: "å¯¹äºä¸å¯å‹ç¼©æµä½“ï¼Œå‹å¼ºéšæ·±åº¦çº¿æ€§å¢åŠ ï¼Œæ–œç‡ä¸º $\\rho g$ã€‚",
                    category: "static"
                }
            },
            dynamics: {
                bernoulli: {
                    title: "ä¼¯åŠªåˆ©æ–¹ç¨‹",
                    formula: "$$\\frac{p}{\\rho g} + \\frac{v^2}{2g} + z = H$$",
                    explanation: "æ²¿æµçº¿æœºæ¢°èƒ½å®ˆæ’",
                    derivation: [
                        "æ²¿æµçº¿ç§¯åˆ†æ¬§æ‹‰æ–¹ç¨‹",
                        "$\\int[\\frac{\\partial \\vec{v}}{\\partial t} + (\\vec{v} \\cdot \\nabla)\\vec{v}] \\cdot ds = \\int[-\\frac{1}{\\rho}\\nabla p + \\vec{g}] \\cdot ds$",
                        "å®šå¸¸æµåŠ¨ï¼š$\\frac{\\partial \\vec{v}}{\\partial t} = 0$",
                        "$\\therefore \\int(\\vec{v} \\cdot \\nabla)\\vec{v} \\cdot ds = \\int[-\\frac{1}{\\rho}\\nabla p + \\vec{g}] \\cdot ds$",
                        "ç§¯åˆ†å¾—åˆ°ï¼š$\\frac{v^2}{2} + \\frac{p}{\\rho} + gz = å¸¸æ•°$"
                    ],
                    physics: "æ²¿æµçº¿æœºæ¢°èƒ½å®ˆæ’ï¼Œæ€»æ°´å¤´ä¿æŒä¸å˜ã€‚",
                    category: "dynamics"
                },
                continuity: {
                    title: "è¿ç»­æ€§æ–¹ç¨‹",
                    formula: "$$\\frac{\\partial \\rho}{\\partial t} + \\nabla \\cdot (\\rho \\vec{v}) = 0$$",
                    explanation: "åŸºäºè´¨é‡å®ˆæ’å®šå¾‹",
                    derivation: [
                        "åŸºäºè´¨é‡å®ˆæ’å®šå¾‹",
                        "æ§åˆ¶ä½“å†…è´¨é‡å˜åŒ–ç‡ = è´¨é‡é€šé‡",
                        "$\\frac{\\partial \\rho}{\\partial t} + \\nabla \\cdot (\\rho \\vec{v}) = 0$",
                        "å¯¹äºä¸å¯å‹ç¼©æµä½“ï¼š",
                        "$\\nabla \\cdot \\vec{v} = 0$ (é€Ÿåº¦æ•£åº¦ä¸ºé›¶)"
                    ],
                    physics: "æµä½“å¾®å›¢ä½“ç§¯åœ¨è¿åŠ¨è¿‡ç¨‹ä¸­ä¿æŒä¸å˜ã€‚",
                    category: "dynamics"
                }
            },
            viscous: {
                "navier-stokes": {
                    title: "N-Sæ–¹ç¨‹",
                    formula: "$$\\rho(\\frac{\\partial \\vec{v}}{\\partial t} + \\vec{v} \\cdot \\nabla\\vec{v}) = -\\nabla p + \\mu\\nabla^2\\vec{v} + \\rho\\vec{g}$$",
                    explanation: "ç²˜æ€§æµä½“çš„è¿åŠ¨æ–¹ç¨‹",
                    derivation: [
                        "åŸºäºåŠ¨é‡å®ˆæ’å®šå¾‹",
                        "è€ƒè™‘ç²˜æ€§åº”åŠ›ï¼š",
                        "$\\rho(\\frac{\\partial \\vec{v}}{\\partial t} + \\vec{v} \\cdot \\nabla\\vec{v}) = -\\nabla p + \\mu\\nabla^2\\vec{v} + \\rho\\vec{g}$"
                    ],
                    physics: "ç²˜æ€§æµä½“çš„è¿åŠ¨æ–¹ç¨‹ï¼ŒåŒ…å«æƒ¯æ€§åŠ›ã€å‹åŠ›æ¢¯åº¦ã€ç²˜æ€§åŠ›å’Œé‡åŠ›ã€‚",
                    category: "viscous"
                },
                reynolds: {
                    title: "é›·è¯ºæ•°",
                    formula: "$$Re = \\frac{\\rho v L}{\\mu} = \\frac{v L}{\\nu}$$",
                    explanation: "åˆ¤æ–­æµåŠ¨çŠ¶æ€çš„é‡è¦å‚æ•°",
                    derivation: [
                        "é›·è¯ºæ•°å®šä¹‰ï¼š",
                        "$Re = \\frac{æƒ¯æ€§åŠ›}{ç²˜æ€§åŠ›}$",
                        "$= \\frac{\\rho v^2 L^2}{\\mu v L}$",
                        "$= \\frac{\\rho v L}{\\mu} = \\frac{v L}{\\nu}$"
                    ],
                    physics: "åˆ¤æ–­æµåŠ¨çŠ¶æ€çš„é‡è¦å‚æ•°ï¼Œ$Re < 2300$ ä¸ºå±‚æµã€‚",
                    category: "viscous"
                }
            },
            turbulent: {
                rans: {
                    title: "RANSæ–¹ç¨‹",
                    formula: "$$\\frac{\\partial \\bar{u}_i}{\\partial t} + \\bar{u}_j\\frac{\\partial \\bar{u}_i}{\\partial x_j} = -\\frac{1}{\\rho}\\frac{\\partial \\bar{p}}{\\partial x_i} + \\nu\\nabla^2\\bar{u}_i + \\frac{1}{\\rho}\\frac{\\partial \\tau_{ij}}{\\partial x_j}$$",
                    explanation: "æ¹æµæ—¶å‡è¿åŠ¨æ–¹ç¨‹",
                    derivation: [
                        "å¯¹N-Sæ–¹ç¨‹è¿›è¡Œé›·è¯ºå¹³å‡",
                        "å¾—åˆ°RANSæ–¹ç¨‹ï¼š",
                        "$\\frac{\\partial \\bar{u}_i}{\\partial t} + \\bar{u}_j\\frac{\\partial \\bar{u}_i}{\\partial x_j} = -\\frac{1}{\\rho}\\frac{\\partial \\bar{p}}{\\partial x_i} + \\nu\\nabla^2\\bar{u}_i + \\frac{1}{\\rho}\\frac{\\partial \\tau_{ij}}{\\partial x_j}$"
                    ],
                    physics: "æ¹æµæ—¶å‡è¿åŠ¨æ–¹ç¨‹ï¼ŒåŒ…å«é›·è¯ºåº”åŠ›é¡¹ã€‚",
                    category: "turbulent"
                }
            }
        };

        // åˆå§‹åŒ–å…¬å¼æ¸²æŸ“å™¨
        let renderer;

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            renderer = new FormulaRenderer();
            renderer.init();
            
            // æ›´æ–°å…¬å¼é€‰æ‹©å™¨
            updateFormulaSelect();
        });

        // æ›´æ–°å…¬å¼é€‰æ‹©å™¨
        function updateFormulaSelect() {
            const typeSelect = document.getElementById('formulaType');
            const formulaSelect = document.getElementById('formulaSelect');
            const selectedType = typeSelect.value;
            
            // æ¸…ç©ºç°æœ‰é€‰é¡¹
            formulaSelect.innerHTML = '';
            
            // æ·»åŠ æ–°é€‰é¡¹
            const formulas = formulaDatabase[selectedType];
            if (formulas) {
                Object.keys(formulas).forEach(key => {
                    const option = document.createElement('option');
                    option.value = key;
                    option.textContent = formulas[key].title;
                    formulaSelect.appendChild(option);
                });
            }
        }

        // æ¸²æŸ“å•ä¸ªå…¬å¼
        function renderFormula() {
            const typeSelect = document.getElementById('formulaType');
            const formulaSelect = document.getElementById('formulaSelect');
            const selectedType = typeSelect.value;
            const selectedFormula = formulaSelect.value;
            
            const formulaData = formulaDatabase[selectedType][selectedFormula];
            if (formulaData && renderer) {
                renderer.renderSingleFormula(formulaData, 'formulaDemo');
            }
        }

        // æ¸²æŸ“æ‰€æœ‰å…¬å¼
        function renderAllFormulas() {
            if (!renderer) return;
            
            const demoContainer = document.getElementById('formulaDemo');
            demoContainer.innerHTML = '';
            
            // æ¸²æŸ“æ‰€æœ‰ç±»å‹çš„å…¬å¼
            Object.keys(formulaDatabase).forEach(type => {
                const typeTitle = document.createElement('h3');
                typeTitle.textContent = getTypeTitle(type);
                typeTitle.style.color = '#2c3e50';
                typeTitle.style.marginTop = '30px';
                typeTitle.style.marginBottom = '20px';
                demoContainer.appendChild(typeTitle);
                
                Object.values(formulaDatabase[type]).forEach(formulaData => {
                    const formulaDiv = document.createElement('div');
                    formulaDiv.innerHTML = renderer.renderFormulaContainer(formulaData);
                    demoContainer.appendChild(formulaDiv);
                });
            });
            
            renderer.typeset();
        }

        // æ¸…é™¤å…¬å¼
        function clearFormulas() {
            const demoContainer = document.getElementById('formulaDemo');
            demoContainer.innerHTML = '<div class="demo-title">å…¬å¼å·²æ¸…é™¤</div><p>è¯·ä½¿ç”¨æ§åˆ¶é¢æ¿é€‰æ‹©å¹¶æ¸²æŸ“å…¬å¼</p>';
        }

        // è·å–ç±»å‹æ ‡é¢˜
        function getTypeTitle(type) {
            const titles = {
                'static': 'æµä½“é™åŠ›å­¦',
                'dynamics': 'æµä½“åŠ¨åŠ›å­¦',
                'viscous': 'ç²˜æ€§æµåŠ¨',
                'turbulent': 'æ¹æµ'
            };
            return titles[type] || type;
        }

        // ç›‘å¬ç±»å‹é€‰æ‹©å˜åŒ–
        document.getElementById('formulaType').addEventListener('change', updateFormulaSelect);
    </script>
</body>
</html> 