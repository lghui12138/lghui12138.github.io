<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MathJaxç®€å•æµ‹è¯•</title>
    
    <!-- MathJaxé…ç½® -->
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true,
                processEnvironments: true
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
                enableMenu: false
            }
        };
    </script>
    
    <!-- MathJaxè„šæœ¬ -->
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" async></script>
    
    <style>
        body {
            font-family: 'Arial', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            min-height: 100vh;
        }
        
        .test-section {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .formula {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #4facfe;
        }
        
        .status {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-size: 12px;
        }
        
        button {
            background: linear-gradient(135deg, #4facfe, #00f2fe);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
        }
        
        button:hover {
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <div class="status" id="status">MathJaxçŠ¶æ€: åŠ è½½ä¸­...</div>
    
    <h1>ğŸ§ª MathJaxæ¸²æŸ“æµ‹è¯•</h1>
    
    <div class="test-section">
        <h2>æµ‹è¯•1: ç®€å•å…¬å¼</h2>
        <div class="formula">
            <strong>æ¬§æ‹‰æ–¹ç¨‹:</strong><br>
            $$\frac{\partial \vec{v}}{\partial t} + (\vec{v} \cdot \nabla)\vec{v} = -\frac{1}{\rho}\nabla p + \vec{g}$$
        </div>
        
        <div class="formula">
            <strong>ä¼¯åŠªåˆ©æ–¹ç¨‹:</strong><br>
            $$\frac{v^2}{2} + \frac{p}{\rho} + gz = å¸¸æ•°$$
        </div>
        
        <div class="formula">
            <strong>é›·è¯ºæ•°:</strong><br>
            $$Re = \frac{\rho V L}{\mu}$$
        </div>
    </div>
    
    <div class="test-section">
        <h2>æµ‹è¯•2: å¤æ‚å…¬å¼</h2>
        <div class="formula">
            <strong>Navier-Stokesæ–¹ç¨‹:</strong><br>
            $$\rho \frac{D\vec{v}}{Dt} = -\nabla p + \rho \vec{g} + \mu \nabla^2 \vec{v}$$
        </div>
        
        <div class="formula">
            <strong>è¿ç»­æ€§æ–¹ç¨‹:</strong><br>
            $$\frac{\partial \rho}{\partial t} + \nabla \cdot (\rho \vec{v}) = 0$$
        </div>
    </div>
    
    <div class="test-section">
        <h2>æµ‹è¯•3: å†…è”å…¬å¼</h2>
        <p>è¿™æ˜¯ä¸€ä¸ªå†…è”å…¬å¼æµ‹è¯•ï¼šå½“ $Re < 2300$ æ—¶ï¼ŒæµåŠ¨ä¸ºå±‚æµï¼›å½“ $Re > 4000$ æ—¶ï¼ŒæµåŠ¨ä¸ºæ¹æµã€‚</p>
        <p>å‹åŠ› $p$ ä¸å¯†åº¦ $\rho$ å’Œé‡åŠ›åŠ é€Ÿåº¦ $g$ çš„å…³ç³»ä¸ºï¼š$p = \rho g h$</p>
    </div>
    
    <div class="test-section">
        <h2>æ§åˆ¶æŒ‰é’®</h2>
        <button onclick="checkMathJaxStatus()">æ£€æŸ¥MathJaxçŠ¶æ€</button>
        <button onclick="forceRender()">å¼ºåˆ¶é‡æ–°æ¸²æŸ“</button>
        <button onclick="reloadMathJax()">é‡æ–°åŠ è½½MathJax</button>
        <button onclick="testSimpleFormula()">æµ‹è¯•ç®€å•å…¬å¼</button>
    </div>
    
    <script>
        // çŠ¶æ€æ›´æ–°å‡½æ•°
        function updateStatus(message) {
            document.getElementById('status').textContent = 'MathJaxçŠ¶æ€: ' + message;
        }
        
        // æ£€æŸ¥MathJaxçŠ¶æ€
        function checkMathJaxStatus() {
            console.log('=== MathJaxçŠ¶æ€æ£€æŸ¥ ===');
            console.log('MathJaxå¯¹è±¡å­˜åœ¨:', !!window.MathJax);
            if (window.MathJax) {
                console.log('MathJaxç‰ˆæœ¬:', window.MathJax.version);
                console.log('MathJax.typesetPromiseå­˜åœ¨:', !!window.MathJax.typesetPromise);
                updateStatus('å·²åŠ è½½ - ç‰ˆæœ¬: ' + (window.MathJax.version || 'æœªçŸ¥'));
            } else {
                updateStatus('æœªåŠ è½½');
            }
        }
        
        // å¼ºåˆ¶é‡æ–°æ¸²æŸ“
        function forceRender() {
            if (window.MathJax && window.MathJax.typesetPromise) {
                console.log('å¼ºåˆ¶é‡æ–°æ¸²æŸ“...');
                updateStatus('é‡æ–°æ¸²æŸ“ä¸­...');
                MathJax.typesetPromise().then(() => {
                    console.log('âœ… é‡æ–°æ¸²æŸ“å®Œæˆ');
                    updateStatus('æ¸²æŸ“å®Œæˆ');
                }).catch(error => {
                    console.error('âŒ æ¸²æŸ“å¤±è´¥:', error);
                    updateStatus('æ¸²æŸ“å¤±è´¥');
                });
            } else {
                console.log('MathJaxæœªåŠ è½½');
                updateStatus('MathJaxæœªåŠ è½½');
            }
        }
        
        // é‡æ–°åŠ è½½MathJax
        function reloadMathJax() {
            console.log('é‡æ–°åŠ è½½MathJax...');
            updateStatus('é‡æ–°åŠ è½½ä¸­...');
            
            // ç§»é™¤ç°æœ‰è„šæœ¬
            const scripts = document.querySelectorAll('script[src*="mathjax"]');
            scripts.forEach(script => script.remove());
            
            // é‡æ–°åŠ è½½
            const script = document.createElement('script');
            script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
            script.async = true;
            script.onload = () => {
                console.log('âœ… MathJaxé‡æ–°åŠ è½½å®Œæˆ');
                updateStatus('é‡æ–°åŠ è½½å®Œæˆ');
                setTimeout(checkMathJaxStatus, 1000);
            };
            document.head.appendChild(script);
        }
        
        // æµ‹è¯•ç®€å•å…¬å¼
        function testSimpleFormula() {
            const testDiv = document.createElement('div');
            testDiv.className = 'formula';
            testDiv.innerHTML = '<strong>æµ‹è¯•å…¬å¼:</strong><br>$$E = mc^2$$';
            
            document.querySelector('.test-section:last-child').appendChild(testDiv);
            
            if (window.MathJax && window.MathJax.typesetPromise) {
                MathJax.typesetPromise([testDiv]).then(() => {
                    console.log('âœ… æµ‹è¯•å…¬å¼æ¸²æŸ“å®Œæˆ');
                });
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåæ£€æŸ¥çŠ¶æ€
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(checkMathJaxStatus, 1000);
        });
        
        // ç›‘å¬MathJaxåŠ è½½
        window.addEventListener('load', () => {
            setTimeout(() => {
                if (window.MathJax && window.MathJax.typesetPromise) {
                    updateStatus('åŠ è½½å®Œæˆ');
                    console.log('âœ… MathJaxåŠ è½½å®Œæˆ');
                } else {
                    updateStatus('åŠ è½½å¤±è´¥');
                    console.log('âŒ MathJaxåŠ è½½å¤±è´¥');
                }
            }, 3000);
        });
    </script>
</body>
</html> 