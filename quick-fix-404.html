<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¿«é€Ÿä¿®å¤404é”™è¯¯</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            backdrop-filter: blur(10px);
        }
        
        h1 {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .fix-button {
            background: linear-gradient(45deg, #4facfe, #00f2fe);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            margin: 10px;
            font-size: 16px;
        }
        
        .result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .success { border-color: #4caf50; }
        .error { border-color: #f44336; }
        .warning { border-color: #ff9800; }
        
        .console-output {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 5px;
            padding: 10px;
            margin-top: 15px;
            font-family: monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ å¿«é€Ÿä¿®å¤404é”™è¯¯</h1>
        
        <div style="text-align: center; margin-bottom: 30px;">
            <button class="fix-button" onclick="disableModuleChecking()">ç¦ç”¨æ¨¡å—æ£€æŸ¥</button>
            <button class="fix-button" onclick="redirectOldUrls()">é‡å®šå‘æ—§URL</button>
            <button class="fix-button" onclick="clearConsole()">æ¸…é™¤æ§åˆ¶å°</button>
            <button class="fix-button" onclick="openMainPage()">æ‰“å¼€ä¸»é¡µé¢</button>
        </div>
        
        <div id="results"></div>
        <div id="consoleOutput" class="console-output"></div>
    </div>

    <script>
        // ç¦ç”¨æ¨¡å—æ£€æŸ¥
        function disableModuleChecking() {
            showResult('æ­£åœ¨ç¦ç”¨æ¨¡å—æ£€æŸ¥...', 'warning');
            
            try {
                // é‡å†™fetchå‡½æ•°æ¥æ‹¦æˆªå¯¹æ—§æ–‡ä»¶çš„è¯·æ±‚
                const originalFetch = window.fetch;
                window.fetch = function(url, options) {
                    if (typeof url === 'string' && url.includes('question-bank-module.html')) {
                        console.log('æ‹¦æˆªåˆ°æ—§æ–‡ä»¶è¯·æ±‚:', url);
                        showResult('å·²æ‹¦æˆªæ—§æ–‡ä»¶è¯·æ±‚: ' + url, 'success');
                        return Promise.resolve(new Response('', { status: 200 }));
                    }
                    return originalFetch(url, options);
                };
                
                showResult('âœ… å·²ç¦ç”¨æ¨¡å—æ£€æŸ¥ï¼Œæ‹¦æˆªæ—§æ–‡ä»¶è¯·æ±‚', 'success');
            } catch (error) {
                showResult('âŒ ç¦ç”¨æ¨¡å—æ£€æŸ¥å¤±è´¥: ' + error.message, 'error');
            }
        }
        
        // é‡å®šå‘æ—§URL
        function redirectOldUrls() {
            showResult('æ­£åœ¨è®¾ç½®URLé‡å®šå‘...', 'warning');
            
            try {
                // ç›‘å¬æ‰€æœ‰fetchè¯·æ±‚
                const originalFetch = window.fetch;
                window.fetch = function(url, options) {
                    if (typeof url === 'string') {
                        const newUrl = url.replace('question-bank-module.html', 'question-bank.html');
                        if (newUrl !== url) {
                            console.log('é‡å®šå‘URL:', url, '->', newUrl);
                            showResult('é‡å®šå‘: ' + url + ' -> ' + newUrl, 'success');
                            return originalFetch(newUrl, options);
                        }
                    }
                    return originalFetch(url, options);
                };
                
                showResult('âœ… å·²è®¾ç½®URLé‡å®šå‘', 'success');
            } catch (error) {
                showResult('âŒ è®¾ç½®é‡å®šå‘å¤±è´¥: ' + error.message, 'error');
            }
        }
        
        // æ¸…é™¤æ§åˆ¶å°
        function clearConsole() {
            showResult('æ­£åœ¨æ¸…é™¤æ§åˆ¶å°...', 'warning');
            
            try {
                console.clear();
                document.getElementById('consoleOutput').innerHTML = '';
                showResult('âœ… æ§åˆ¶å°å·²æ¸…é™¤', 'success');
            } catch (error) {
                showResult('âŒ æ¸…é™¤æ§åˆ¶å°å¤±è´¥: ' + error.message, 'error');
            }
        }
        
        // æ‰“å¼€ä¸»é¡µé¢
        function openMainPage() {
            showResult('æ­£åœ¨æ‰“å¼€ä¸»é¡µé¢...', 'warning');
            
            try {
                window.open('index-modular.html', '_blank');
                showResult('âœ… ä¸»é¡µé¢å·²æ‰“å¼€', 'success');
            } catch (error) {
                showResult('âŒ æ‰“å¼€ä¸»é¡µé¢å¤±è´¥: ' + error.message, 'error');
            }
        }
        
        // æ˜¾ç¤ºç»“æœ
        function showResult(message, type) {
            const resultsDiv = document.getElementById('results');
            const className = type === 'success' ? 'success' : type === 'error' ? 'error' : 'warning';
            
            resultsDiv.innerHTML = `
                <div class="result ${className}">
                    <strong>${type === 'success' ? 'âœ…' : type === 'error' ? 'âŒ' : 'âš ï¸'} ${message}</strong>
                </div>
            `;
            
            // æ·»åŠ åˆ°æ§åˆ¶å°è¾“å‡º
            const consoleOutput = document.getElementById('consoleOutput');
            const timestamp = new Date().toLocaleTimeString();
            consoleOutput.innerHTML += `[${timestamp}] ${message}\n`;
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        }
        
        // ç›‘å¬æ§åˆ¶å°é”™è¯¯
        const originalError = console.error;
        console.error = function(...args) {
            originalError.apply(console, args);
            const consoleOutput = document.getElementById('consoleOutput');
            const timestamp = new Date().toLocaleTimeString();
            consoleOutput.innerHTML += `[${timestamp}] ERROR: ${args.join(' ')}\n`;
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        };
        
        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨ä¿®å¤
        window.addEventListener('load', () => {
            console.log('å¿«é€Ÿä¿®å¤é¡µé¢å·²åŠ è½½');
            disableModuleChecking();
            redirectOldUrls();
        });
    </script>
</body>
</html> 